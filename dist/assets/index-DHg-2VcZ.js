function Mf(e,t){for(var r=0;r<t.length;r++){const n=t[r];if(typeof n!="string"&&!Array.isArray(n)){for(const s in n)if(s!=="default"&&!(s in e)){const i=Object.getOwnPropertyDescriptor(n,s);i&&Object.defineProperty(e,s,i.get?i:{enumerable:!0,get:()=>n[s]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function r(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(s){if(s.ep)return;s.ep=!0;const i=r(s);fetch(s.href,i)}})();function Uf(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function Ff(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var r=function n(){return this instanceof n?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(n){var s=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(r,n,s.get?s:{enumerable:!0,get:function(){return e[n]}})}),r}var zf={exports:{}},Fo={},Bf={exports:{}},he={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ta=Symbol.for("react.element"),_v=Symbol.for("react.portal"),bv=Symbol.for("react.fragment"),jv=Symbol.for("react.strict_mode"),Sv=Symbol.for("react.profiler"),kv=Symbol.for("react.provider"),Ev=Symbol.for("react.context"),Nv=Symbol.for("react.forward_ref"),Cv=Symbol.for("react.suspense"),Pv=Symbol.for("react.memo"),Tv=Symbol.for("react.lazy"),bd=Symbol.iterator;function Ov(e){return e===null||typeof e!="object"?null:(e=bd&&e[bd]||e["@@iterator"],typeof e=="function"?e:null)}var Vf={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Wf=Object.assign,qf={};function Ds(e,t,r){this.props=e,this.context=t,this.refs=qf,this.updater=r||Vf}Ds.prototype.isReactComponent={};Ds.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Ds.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Hf(){}Hf.prototype=Ds.prototype;function dc(e,t,r){this.props=e,this.context=t,this.refs=qf,this.updater=r||Vf}var hc=dc.prototype=new Hf;hc.constructor=dc;Wf(hc,Ds.prototype);hc.isPureReactComponent=!0;var jd=Array.isArray,Kf=Object.prototype.hasOwnProperty,fc={current:null},Gf={key:!0,ref:!0,__self:!0,__source:!0};function Jf(e,t,r){var n,s={},i=null,a=null;if(t!=null)for(n in t.ref!==void 0&&(a=t.ref),t.key!==void 0&&(i=""+t.key),t)Kf.call(t,n)&&!Gf.hasOwnProperty(n)&&(s[n]=t[n]);var l=arguments.length-2;if(l===1)s.children=r;else if(1<l){for(var u=Array(l),c=0;c<l;c++)u[c]=arguments[c+2];s.children=u}if(e&&e.defaultProps)for(n in l=e.defaultProps,l)s[n]===void 0&&(s[n]=l[n]);return{$$typeof:ta,type:e,key:i,ref:a,props:s,_owner:fc.current}}function Rv(e,t){return{$$typeof:ta,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function pc(e){return typeof e=="object"&&e!==null&&e.$$typeof===ta}function Iv(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var Sd=/\/+/g;function dl(e,t){return typeof e=="object"&&e!==null&&e.key!=null?Iv(""+e.key):t.toString(36)}function qa(e,t,r,n,s){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var a=!1;if(e===null)a=!0;else switch(i){case"string":case"number":a=!0;break;case"object":switch(e.$$typeof){case ta:case _v:a=!0}}if(a)return a=e,s=s(a),e=n===""?"."+dl(a,0):n,jd(s)?(r="",e!=null&&(r=e.replace(Sd,"$&/")+"/"),qa(s,t,r,"",function(c){return c})):s!=null&&(pc(s)&&(s=Rv(s,r+(!s.key||a&&a.key===s.key?"":(""+s.key).replace(Sd,"$&/")+"/")+e)),t.push(s)),1;if(a=0,n=n===""?".":n+":",jd(e))for(var l=0;l<e.length;l++){i=e[l];var u=n+dl(i,l);a+=qa(i,t,r,u,s)}else if(u=Ov(e),typeof u=="function")for(e=u.call(e),l=0;!(i=e.next()).done;)i=i.value,u=n+dl(i,l++),a+=qa(i,t,r,u,s);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return a}function ya(e,t,r){if(e==null)return e;var n=[],s=0;return qa(e,n,"","",function(i){return t.call(r,i,s++)}),n}function Av(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var mt={current:null},Ha={transition:null},Lv={ReactCurrentDispatcher:mt,ReactCurrentBatchConfig:Ha,ReactCurrentOwner:fc};function Qf(){throw Error("act(...) is not supported in production builds of React.")}he.Children={map:ya,forEach:function(e,t,r){ya(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return ya(e,function(){t++}),t},toArray:function(e){return ya(e,function(t){return t})||[]},only:function(e){if(!pc(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};he.Component=Ds;he.Fragment=bv;he.Profiler=Sv;he.PureComponent=dc;he.StrictMode=jv;he.Suspense=Cv;he.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Lv;he.act=Qf;he.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=Wf({},e.props),s=e.key,i=e.ref,a=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,a=fc.current),t.key!==void 0&&(s=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(u in t)Kf.call(t,u)&&!Gf.hasOwnProperty(u)&&(n[u]=t[u]===void 0&&l!==void 0?l[u]:t[u])}var u=arguments.length-2;if(u===1)n.children=r;else if(1<u){l=Array(u);for(var c=0;c<u;c++)l[c]=arguments[c+2];n.children=l}return{$$typeof:ta,type:e.type,key:s,ref:i,props:n,_owner:a}};he.createContext=function(e){return e={$$typeof:Ev,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:kv,_context:e},e.Consumer=e};he.createElement=Jf;he.createFactory=function(e){var t=Jf.bind(null,e);return t.type=e,t};he.createRef=function(){return{current:null}};he.forwardRef=function(e){return{$$typeof:Nv,render:e}};he.isValidElement=pc;he.lazy=function(e){return{$$typeof:Tv,_payload:{_status:-1,_result:e},_init:Av}};he.memo=function(e,t){return{$$typeof:Pv,type:e,compare:t===void 0?null:t}};he.startTransition=function(e){var t=Ha.transition;Ha.transition={};try{e()}finally{Ha.transition=t}};he.unstable_act=Qf;he.useCallback=function(e,t){return mt.current.useCallback(e,t)};he.useContext=function(e){return mt.current.useContext(e)};he.useDebugValue=function(){};he.useDeferredValue=function(e){return mt.current.useDeferredValue(e)};he.useEffect=function(e,t){return mt.current.useEffect(e,t)};he.useId=function(){return mt.current.useId()};he.useImperativeHandle=function(e,t,r){return mt.current.useImperativeHandle(e,t,r)};he.useInsertionEffect=function(e,t){return mt.current.useInsertionEffect(e,t)};he.useLayoutEffect=function(e,t){return mt.current.useLayoutEffect(e,t)};he.useMemo=function(e,t){return mt.current.useMemo(e,t)};he.useReducer=function(e,t,r){return mt.current.useReducer(e,t,r)};he.useRef=function(e){return mt.current.useRef(e)};he.useState=function(e){return mt.current.useState(e)};he.useSyncExternalStore=function(e,t,r){return mt.current.useSyncExternalStore(e,t,r)};he.useTransition=function(){return mt.current.useTransition()};he.version="18.3.1";Bf.exports=he;var w=Bf.exports;const Yf=Uf(w),Dv=Mf({__proto__:null,default:Yf},[w]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $v=w,Mv=Symbol.for("react.element"),Uv=Symbol.for("react.fragment"),Fv=Object.prototype.hasOwnProperty,zv=$v.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Bv={key:!0,ref:!0,__self:!0,__source:!0};function Xf(e,t,r){var n,s={},i=null,a=null;r!==void 0&&(i=""+r),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(a=t.ref);for(n in t)Fv.call(t,n)&&!Bv.hasOwnProperty(n)&&(s[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps,t)s[n]===void 0&&(s[n]=t[n]);return{$$typeof:Mv,type:e,key:i,ref:a,props:s,_owner:zv.current}}Fo.Fragment=Uv;Fo.jsx=Xf;Fo.jsxs=Xf;zf.exports=Fo;var o=zf.exports,Xl={},Zf={exports:{}},At={},ep={exports:{}},tp={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(D,Q){var ee=D.length;D.push(Q);e:for(;0<ee;){var fe=ee-1>>>1,ue=D[fe];if(0<s(ue,Q))D[fe]=Q,D[ee]=ue,ee=fe;else break e}}function r(D){return D.length===0?null:D[0]}function n(D){if(D.length===0)return null;var Q=D[0],ee=D.pop();if(ee!==Q){D[0]=ee;e:for(var fe=0,ue=D.length,Ae=ue>>>1;fe<Ae;){var Ve=2*(fe+1)-1,Te=D[Ve],me=Ve+1,R=D[me];if(0>s(Te,ee))me<ue&&0>s(R,Te)?(D[fe]=R,D[me]=ee,fe=me):(D[fe]=Te,D[Ve]=ee,fe=Ve);else if(me<ue&&0>s(R,ee))D[fe]=R,D[me]=ee,fe=me;else break e}}return Q}function s(D,Q){var ee=D.sortIndex-Q.sortIndex;return ee!==0?ee:D.id-Q.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var a=Date,l=a.now();e.unstable_now=function(){return a.now()-l}}var u=[],c=[],d=1,h=null,f=3,m=!1,x=!1,g=!1,_=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,p=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function y(D){for(var Q=r(c);Q!==null;){if(Q.callback===null)n(c);else if(Q.startTime<=D)n(c),Q.sortIndex=Q.expirationTime,t(u,Q);else break;Q=r(c)}}function j(D){if(g=!1,y(D),!x)if(r(u)!==null)x=!0,we(N);else{var Q=r(c);Q!==null&&Ie(j,Q.startTime-D)}}function N(D,Q){x=!1,g&&(g=!1,v(I),I=-1),m=!0;var ee=f;try{for(y(Q),h=r(u);h!==null&&(!(h.expirationTime>Q)||D&&!ne());){var fe=h.callback;if(typeof fe=="function"){h.callback=null,f=h.priorityLevel;var ue=fe(h.expirationTime<=Q);Q=e.unstable_now(),typeof ue=="function"?h.callback=ue:h===r(u)&&n(u),y(Q)}else n(u);h=r(u)}if(h!==null)var Ae=!0;else{var Ve=r(c);Ve!==null&&Ie(j,Ve.startTime-Q),Ae=!1}return Ae}finally{h=null,f=ee,m=!1}}var P=!1,b=null,I=-1,z=5,L=-1;function ne(){return!(e.unstable_now()-L<z)}function O(){if(b!==null){var D=e.unstable_now();L=D;var Q=!0;try{Q=b(!0,D)}finally{Q?J():(P=!1,b=null)}}else P=!1}var J;if(typeof p=="function")J=function(){p(O)};else if(typeof MessageChannel<"u"){var M=new MessageChannel,oe=M.port2;M.port1.onmessage=O,J=function(){oe.postMessage(null)}}else J=function(){_(O,0)};function we(D){b=D,P||(P=!0,J())}function Ie(D,Q){I=_(function(){D(e.unstable_now())},Q)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(D){D.callback=null},e.unstable_continueExecution=function(){x||m||(x=!0,we(N))},e.unstable_forceFrameRate=function(D){0>D||125<D?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):z=0<D?Math.floor(1e3/D):5},e.unstable_getCurrentPriorityLevel=function(){return f},e.unstable_getFirstCallbackNode=function(){return r(u)},e.unstable_next=function(D){switch(f){case 1:case 2:case 3:var Q=3;break;default:Q=f}var ee=f;f=Q;try{return D()}finally{f=ee}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(D,Q){switch(D){case 1:case 2:case 3:case 4:case 5:break;default:D=3}var ee=f;f=D;try{return Q()}finally{f=ee}},e.unstable_scheduleCallback=function(D,Q,ee){var fe=e.unstable_now();switch(typeof ee=="object"&&ee!==null?(ee=ee.delay,ee=typeof ee=="number"&&0<ee?fe+ee:fe):ee=fe,D){case 1:var ue=-1;break;case 2:ue=250;break;case 5:ue=1073741823;break;case 4:ue=1e4;break;default:ue=5e3}return ue=ee+ue,D={id:d++,callback:Q,priorityLevel:D,startTime:ee,expirationTime:ue,sortIndex:-1},ee>fe?(D.sortIndex=ee,t(c,D),r(u)===null&&D===r(c)&&(g?(v(I),I=-1):g=!0,Ie(j,ee-fe))):(D.sortIndex=ue,t(u,D),x||m||(x=!0,we(N))),D},e.unstable_shouldYield=ne,e.unstable_wrapCallback=function(D){var Q=f;return function(){var ee=f;f=Q;try{return D.apply(this,arguments)}finally{f=ee}}}})(tp);ep.exports=tp;var Vv=ep.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Wv=w,It=Vv;function $(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var rp=new Set,Ri={};function Bn(e,t){Ss(e,t),Ss(e+"Capture",t)}function Ss(e,t){for(Ri[e]=t,e=0;e<t.length;e++)rp.add(t[e])}var Cr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Zl=Object.prototype.hasOwnProperty,qv=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,kd={},Ed={};function Hv(e){return Zl.call(Ed,e)?!0:Zl.call(kd,e)?!1:qv.test(e)?Ed[e]=!0:(kd[e]=!0,!1)}function Kv(e,t,r,n){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function Gv(e,t,r,n){if(t===null||typeof t>"u"||Kv(e,t,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function gt(e,t,r,n,s,i,a){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=n,this.attributeNamespace=s,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=a}var ot={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){ot[e]=new gt(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];ot[t]=new gt(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){ot[e]=new gt(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){ot[e]=new gt(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){ot[e]=new gt(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){ot[e]=new gt(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){ot[e]=new gt(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){ot[e]=new gt(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){ot[e]=new gt(e,5,!1,e.toLowerCase(),null,!1,!1)});var mc=/[\-:]([a-z])/g;function gc(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(mc,gc);ot[t]=new gt(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(mc,gc);ot[t]=new gt(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(mc,gc);ot[t]=new gt(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){ot[e]=new gt(e,1,!1,e.toLowerCase(),null,!1,!1)});ot.xlinkHref=new gt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){ot[e]=new gt(e,1,!1,e.toLowerCase(),null,!0,!0)});function vc(e,t,r,n){var s=ot.hasOwnProperty(t)?ot[t]:null;(s!==null?s.type!==0:n||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(Gv(t,r,s,n)&&(r=null),n||s===null?Hv(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):s.mustUseProperty?e[s.propertyName]=r===null?s.type===3?!1:"":r:(t=s.attributeName,n=s.attributeNamespace,r===null?e.removeAttribute(t):(s=s.type,r=s===3||s===4&&r===!0?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}var Ir=Wv.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,wa=Symbol.for("react.element"),is=Symbol.for("react.portal"),as=Symbol.for("react.fragment"),yc=Symbol.for("react.strict_mode"),eu=Symbol.for("react.profiler"),np=Symbol.for("react.provider"),sp=Symbol.for("react.context"),wc=Symbol.for("react.forward_ref"),tu=Symbol.for("react.suspense"),ru=Symbol.for("react.suspense_list"),xc=Symbol.for("react.memo"),Br=Symbol.for("react.lazy"),ip=Symbol.for("react.offscreen"),Nd=Symbol.iterator;function ri(e){return e===null||typeof e!="object"?null:(e=Nd&&e[Nd]||e["@@iterator"],typeof e=="function"?e:null)}var Me=Object.assign,hl;function pi(e){if(hl===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);hl=t&&t[1]||""}return`
`+hl+e}var fl=!1;function pl(e,t){if(!e||fl)return"";fl=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var n=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){n=c}e.call(t.prototype)}else{try{throw Error()}catch(c){n=c}e()}}catch(c){if(c&&n&&typeof c.stack=="string"){for(var s=c.stack.split(`
`),i=n.stack.split(`
`),a=s.length-1,l=i.length-1;1<=a&&0<=l&&s[a]!==i[l];)l--;for(;1<=a&&0<=l;a--,l--)if(s[a]!==i[l]){if(a!==1||l!==1)do if(a--,l--,0>l||s[a]!==i[l]){var u=`
`+s[a].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}while(1<=a&&0<=l);break}}}finally{fl=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?pi(e):""}function Jv(e){switch(e.tag){case 5:return pi(e.type);case 16:return pi("Lazy");case 13:return pi("Suspense");case 19:return pi("SuspenseList");case 0:case 2:case 15:return e=pl(e.type,!1),e;case 11:return e=pl(e.type.render,!1),e;case 1:return e=pl(e.type,!0),e;default:return""}}function nu(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case as:return"Fragment";case is:return"Portal";case eu:return"Profiler";case yc:return"StrictMode";case tu:return"Suspense";case ru:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case sp:return(e.displayName||"Context")+".Consumer";case np:return(e._context.displayName||"Context")+".Provider";case wc:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case xc:return t=e.displayName||null,t!==null?t:nu(e.type)||"Memo";case Br:t=e._payload,e=e._init;try{return nu(e(t))}catch{}}return null}function Qv(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return nu(t);case 8:return t===yc?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function sn(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function ap(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Yv(e){var t=ap(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var s=r.get,i=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(a){n=""+a,i.call(this,a)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(a){n=""+a},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function xa(e){e._valueTracker||(e._valueTracker=Yv(e))}function op(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=ap(e)?e.checked?"true":"false":e.value),e=n,e!==r?(t.setValue(e),!0):!1}function so(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function su(e,t){var r=t.checked;return Me({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function Cd(e,t){var r=t.defaultValue==null?"":t.defaultValue,n=t.checked!=null?t.checked:t.defaultChecked;r=sn(t.value!=null?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function lp(e,t){t=t.checked,t!=null&&vc(e,"checked",t,!1)}function iu(e,t){lp(e,t);var r=sn(t.value),n=t.type;if(r!=null)n==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(n==="submit"||n==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?au(e,t.type,r):t.hasOwnProperty("defaultValue")&&au(e,t.type,sn(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Pd(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!(n!=="submit"&&n!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function au(e,t,r){(t!=="number"||so(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var mi=Array.isArray;function vs(e,t,r,n){if(e=e.options,t){t={};for(var s=0;s<r.length;s++)t["$"+r[s]]=!0;for(r=0;r<e.length;r++)s=t.hasOwnProperty("$"+e[r].value),e[r].selected!==s&&(e[r].selected=s),s&&n&&(e[r].defaultSelected=!0)}else{for(r=""+sn(r),t=null,s=0;s<e.length;s++){if(e[s].value===r){e[s].selected=!0,n&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function ou(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error($(91));return Me({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Td(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error($(92));if(mi(r)){if(1<r.length)throw Error($(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:sn(r)}}function up(e,t){var r=sn(t.value),n=sn(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),n!=null&&(e.defaultValue=""+n)}function Od(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function cp(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function lu(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?cp(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var _a,dp=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,n,s){MSApp.execUnsafeLocalFunction(function(){return e(t,r,n,s)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(_a=_a||document.createElement("div"),_a.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=_a.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Ii(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var xi={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Xv=["Webkit","ms","Moz","O"];Object.keys(xi).forEach(function(e){Xv.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),xi[t]=xi[e]})});function hp(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||xi.hasOwnProperty(e)&&xi[e]?(""+t).trim():t+"px"}function fp(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var n=r.indexOf("--")===0,s=hp(r,t[r],n);r==="float"&&(r="cssFloat"),n?e.setProperty(r,s):e[r]=s}}var Zv=Me({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function uu(e,t){if(t){if(Zv[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error($(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error($(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error($(61))}if(t.style!=null&&typeof t.style!="object")throw Error($(62))}}function cu(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var du=null;function _c(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var hu=null,ys=null,ws=null;function Rd(e){if(e=sa(e)){if(typeof hu!="function")throw Error($(280));var t=e.stateNode;t&&(t=qo(t),hu(e.stateNode,e.type,t))}}function pp(e){ys?ws?ws.push(e):ws=[e]:ys=e}function mp(){if(ys){var e=ys,t=ws;if(ws=ys=null,Rd(e),t)for(e=0;e<t.length;e++)Rd(t[e])}}function gp(e,t){return e(t)}function vp(){}var ml=!1;function yp(e,t,r){if(ml)return e(t,r);ml=!0;try{return gp(e,t,r)}finally{ml=!1,(ys!==null||ws!==null)&&(vp(),mp())}}function Ai(e,t){var r=e.stateNode;if(r===null)return null;var n=qo(r);if(n===null)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error($(231,t,typeof r));return r}var fu=!1;if(Cr)try{var ni={};Object.defineProperty(ni,"passive",{get:function(){fu=!0}}),window.addEventListener("test",ni,ni),window.removeEventListener("test",ni,ni)}catch{fu=!1}function ey(e,t,r,n,s,i,a,l,u){var c=Array.prototype.slice.call(arguments,3);try{t.apply(r,c)}catch(d){this.onError(d)}}var _i=!1,io=null,ao=!1,pu=null,ty={onError:function(e){_i=!0,io=e}};function ry(e,t,r,n,s,i,a,l,u){_i=!1,io=null,ey.apply(ty,arguments)}function ny(e,t,r,n,s,i,a,l,u){if(ry.apply(this,arguments),_i){if(_i){var c=io;_i=!1,io=null}else throw Error($(198));ao||(ao=!0,pu=c)}}function Vn(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function wp(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Id(e){if(Vn(e)!==e)throw Error($(188))}function sy(e){var t=e.alternate;if(!t){if(t=Vn(e),t===null)throw Error($(188));return t!==e?null:e}for(var r=e,n=t;;){var s=r.return;if(s===null)break;var i=s.alternate;if(i===null){if(n=s.return,n!==null){r=n;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===r)return Id(s),e;if(i===n)return Id(s),t;i=i.sibling}throw Error($(188))}if(r.return!==n.return)r=s,n=i;else{for(var a=!1,l=s.child;l;){if(l===r){a=!0,r=s,n=i;break}if(l===n){a=!0,n=s,r=i;break}l=l.sibling}if(!a){for(l=i.child;l;){if(l===r){a=!0,r=i,n=s;break}if(l===n){a=!0,n=i,r=s;break}l=l.sibling}if(!a)throw Error($(189))}}if(r.alternate!==n)throw Error($(190))}if(r.tag!==3)throw Error($(188));return r.stateNode.current===r?e:t}function xp(e){return e=sy(e),e!==null?_p(e):null}function _p(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=_p(e);if(t!==null)return t;e=e.sibling}return null}var bp=It.unstable_scheduleCallback,Ad=It.unstable_cancelCallback,iy=It.unstable_shouldYield,ay=It.unstable_requestPaint,We=It.unstable_now,oy=It.unstable_getCurrentPriorityLevel,bc=It.unstable_ImmediatePriority,jp=It.unstable_UserBlockingPriority,oo=It.unstable_NormalPriority,ly=It.unstable_LowPriority,Sp=It.unstable_IdlePriority,zo=null,pr=null;function uy(e){if(pr&&typeof pr.onCommitFiberRoot=="function")try{pr.onCommitFiberRoot(zo,e,void 0,(e.current.flags&128)===128)}catch{}}var sr=Math.clz32?Math.clz32:hy,cy=Math.log,dy=Math.LN2;function hy(e){return e>>>=0,e===0?32:31-(cy(e)/dy|0)|0}var ba=64,ja=4194304;function gi(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function lo(e,t){var r=e.pendingLanes;if(r===0)return 0;var n=0,s=e.suspendedLanes,i=e.pingedLanes,a=r&268435455;if(a!==0){var l=a&~s;l!==0?n=gi(l):(i&=a,i!==0&&(n=gi(i)))}else a=r&~s,a!==0?n=gi(a):i!==0&&(n=gi(i));if(n===0)return 0;if(t!==0&&t!==n&&!(t&s)&&(s=n&-n,i=t&-t,s>=i||s===16&&(i&4194240)!==0))return t;if(n&4&&(n|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=n;0<t;)r=31-sr(t),s=1<<r,n|=e[r],t&=~s;return n}function fy(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function py(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,s=e.expirationTimes,i=e.pendingLanes;0<i;){var a=31-sr(i),l=1<<a,u=s[a];u===-1?(!(l&r)||l&n)&&(s[a]=fy(l,t)):u<=t&&(e.expiredLanes|=l),i&=~l}}function mu(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function kp(){var e=ba;return ba<<=1,!(ba&4194240)&&(ba=64),e}function gl(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function ra(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-sr(t),e[t]=r}function my(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<r;){var s=31-sr(r),i=1<<s;t[s]=0,n[s]=-1,e[s]=-1,r&=~i}}function jc(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-sr(r),s=1<<n;s&t|e[n]&t&&(e[n]|=t),r&=~s}}var be=0;function Ep(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Np,Sc,Cp,Pp,Tp,gu=!1,Sa=[],Qr=null,Yr=null,Xr=null,Li=new Map,Di=new Map,Wr=[],gy="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ld(e,t){switch(e){case"focusin":case"focusout":Qr=null;break;case"dragenter":case"dragleave":Yr=null;break;case"mouseover":case"mouseout":Xr=null;break;case"pointerover":case"pointerout":Li.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Di.delete(t.pointerId)}}function si(e,t,r,n,s,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:i,targetContainers:[s]},t!==null&&(t=sa(t),t!==null&&Sc(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function vy(e,t,r,n,s){switch(t){case"focusin":return Qr=si(Qr,e,t,r,n,s),!0;case"dragenter":return Yr=si(Yr,e,t,r,n,s),!0;case"mouseover":return Xr=si(Xr,e,t,r,n,s),!0;case"pointerover":var i=s.pointerId;return Li.set(i,si(Li.get(i)||null,e,t,r,n,s)),!0;case"gotpointercapture":return i=s.pointerId,Di.set(i,si(Di.get(i)||null,e,t,r,n,s)),!0}return!1}function Op(e){var t=Cn(e.target);if(t!==null){var r=Vn(t);if(r!==null){if(t=r.tag,t===13){if(t=wp(r),t!==null){e.blockedOn=t,Tp(e.priority,function(){Cp(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Ka(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=vu(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var n=new r.constructor(r.type,r);du=n,r.target.dispatchEvent(n),du=null}else return t=sa(r),t!==null&&Sc(t),e.blockedOn=r,!1;t.shift()}return!0}function Dd(e,t,r){Ka(e)&&r.delete(t)}function yy(){gu=!1,Qr!==null&&Ka(Qr)&&(Qr=null),Yr!==null&&Ka(Yr)&&(Yr=null),Xr!==null&&Ka(Xr)&&(Xr=null),Li.forEach(Dd),Di.forEach(Dd)}function ii(e,t){e.blockedOn===t&&(e.blockedOn=null,gu||(gu=!0,It.unstable_scheduleCallback(It.unstable_NormalPriority,yy)))}function $i(e){function t(s){return ii(s,e)}if(0<Sa.length){ii(Sa[0],e);for(var r=1;r<Sa.length;r++){var n=Sa[r];n.blockedOn===e&&(n.blockedOn=null)}}for(Qr!==null&&ii(Qr,e),Yr!==null&&ii(Yr,e),Xr!==null&&ii(Xr,e),Li.forEach(t),Di.forEach(t),r=0;r<Wr.length;r++)n=Wr[r],n.blockedOn===e&&(n.blockedOn=null);for(;0<Wr.length&&(r=Wr[0],r.blockedOn===null);)Op(r),r.blockedOn===null&&Wr.shift()}var xs=Ir.ReactCurrentBatchConfig,uo=!0;function wy(e,t,r,n){var s=be,i=xs.transition;xs.transition=null;try{be=1,kc(e,t,r,n)}finally{be=s,xs.transition=i}}function xy(e,t,r,n){var s=be,i=xs.transition;xs.transition=null;try{be=4,kc(e,t,r,n)}finally{be=s,xs.transition=i}}function kc(e,t,r,n){if(uo){var s=vu(e,t,r,n);if(s===null)El(e,t,n,co,r),Ld(e,n);else if(vy(s,e,t,r,n))n.stopPropagation();else if(Ld(e,n),t&4&&-1<gy.indexOf(e)){for(;s!==null;){var i=sa(s);if(i!==null&&Np(i),i=vu(e,t,r,n),i===null&&El(e,t,n,co,r),i===s)break;s=i}s!==null&&n.stopPropagation()}else El(e,t,n,null,r)}}var co=null;function vu(e,t,r,n){if(co=null,e=_c(n),e=Cn(e),e!==null)if(t=Vn(e),t===null)e=null;else if(r=t.tag,r===13){if(e=wp(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return co=e,null}function Rp(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(oy()){case bc:return 1;case jp:return 4;case oo:case ly:return 16;case Sp:return 536870912;default:return 16}default:return 16}}var Kr=null,Ec=null,Ga=null;function Ip(){if(Ga)return Ga;var e,t=Ec,r=t.length,n,s="value"in Kr?Kr.value:Kr.textContent,i=s.length;for(e=0;e<r&&t[e]===s[e];e++);var a=r-e;for(n=1;n<=a&&t[r-n]===s[i-n];n++);return Ga=s.slice(e,1<n?1-n:void 0)}function Ja(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function ka(){return!0}function $d(){return!1}function Lt(e){function t(r,n,s,i,a){this._reactName=r,this._targetInst=s,this.type=n,this.nativeEvent=i,this.target=a,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(r=e[l],this[l]=r?r(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?ka:$d,this.isPropagationStopped=$d,this}return Me(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=ka)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=ka)},persist:function(){},isPersistent:ka}),t}var $s={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Nc=Lt($s),na=Me({},$s,{view:0,detail:0}),_y=Lt(na),vl,yl,ai,Bo=Me({},na,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Cc,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ai&&(ai&&e.type==="mousemove"?(vl=e.screenX-ai.screenX,yl=e.screenY-ai.screenY):yl=vl=0,ai=e),vl)},movementY:function(e){return"movementY"in e?e.movementY:yl}}),Md=Lt(Bo),by=Me({},Bo,{dataTransfer:0}),jy=Lt(by),Sy=Me({},na,{relatedTarget:0}),wl=Lt(Sy),ky=Me({},$s,{animationName:0,elapsedTime:0,pseudoElement:0}),Ey=Lt(ky),Ny=Me({},$s,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Cy=Lt(Ny),Py=Me({},$s,{data:0}),Ud=Lt(Py),Ty={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Oy={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ry={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Iy(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Ry[e])?!!t[e]:!1}function Cc(){return Iy}var Ay=Me({},na,{key:function(e){if(e.key){var t=Ty[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Ja(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Oy[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Cc,charCode:function(e){return e.type==="keypress"?Ja(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Ja(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Ly=Lt(Ay),Dy=Me({},Bo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Fd=Lt(Dy),$y=Me({},na,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Cc}),My=Lt($y),Uy=Me({},$s,{propertyName:0,elapsedTime:0,pseudoElement:0}),Fy=Lt(Uy),zy=Me({},Bo,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),By=Lt(zy),Vy=[9,13,27,32],Pc=Cr&&"CompositionEvent"in window,bi=null;Cr&&"documentMode"in document&&(bi=document.documentMode);var Wy=Cr&&"TextEvent"in window&&!bi,Ap=Cr&&(!Pc||bi&&8<bi&&11>=bi),zd=" ",Bd=!1;function Lp(e,t){switch(e){case"keyup":return Vy.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Dp(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var os=!1;function qy(e,t){switch(e){case"compositionend":return Dp(t);case"keypress":return t.which!==32?null:(Bd=!0,zd);case"textInput":return e=t.data,e===zd&&Bd?null:e;default:return null}}function Hy(e,t){if(os)return e==="compositionend"||!Pc&&Lp(e,t)?(e=Ip(),Ga=Ec=Kr=null,os=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Ap&&t.locale!=="ko"?null:t.data;default:return null}}var Ky={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Vd(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Ky[e.type]:t==="textarea"}function $p(e,t,r,n){pp(n),t=ho(t,"onChange"),0<t.length&&(r=new Nc("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var ji=null,Mi=null;function Gy(e){Gp(e,0)}function Vo(e){var t=cs(e);if(op(t))return e}function Jy(e,t){if(e==="change")return t}var Mp=!1;if(Cr){var xl;if(Cr){var _l="oninput"in document;if(!_l){var Wd=document.createElement("div");Wd.setAttribute("oninput","return;"),_l=typeof Wd.oninput=="function"}xl=_l}else xl=!1;Mp=xl&&(!document.documentMode||9<document.documentMode)}function qd(){ji&&(ji.detachEvent("onpropertychange",Up),Mi=ji=null)}function Up(e){if(e.propertyName==="value"&&Vo(Mi)){var t=[];$p(t,Mi,e,_c(e)),yp(Gy,t)}}function Qy(e,t,r){e==="focusin"?(qd(),ji=t,Mi=r,ji.attachEvent("onpropertychange",Up)):e==="focusout"&&qd()}function Yy(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Vo(Mi)}function Xy(e,t){if(e==="click")return Vo(t)}function Zy(e,t){if(e==="input"||e==="change")return Vo(t)}function e0(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var ar=typeof Object.is=="function"?Object.is:e0;function Ui(e,t){if(ar(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var s=r[n];if(!Zl.call(t,s)||!ar(e[s],t[s]))return!1}return!0}function Hd(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Kd(e,t){var r=Hd(e);e=0;for(var n;r;){if(r.nodeType===3){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Hd(r)}}function Fp(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Fp(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function zp(){for(var e=window,t=so();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=so(e.document)}return t}function Tc(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function t0(e){var t=zp(),r=e.focusedElem,n=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&Fp(r.ownerDocument.documentElement,r)){if(n!==null&&Tc(r)){if(t=n.start,e=n.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var s=r.textContent.length,i=Math.min(n.start,s);n=n.end===void 0?i:Math.min(n.end,s),!e.extend&&i>n&&(s=n,n=i,i=s),s=Kd(r,i);var a=Kd(r,n);s&&a&&(e.rangeCount!==1||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&(t=t.createRange(),t.setStart(s.node,s.offset),e.removeAllRanges(),i>n?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var r0=Cr&&"documentMode"in document&&11>=document.documentMode,ls=null,yu=null,Si=null,wu=!1;function Gd(e,t,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;wu||ls==null||ls!==so(n)||(n=ls,"selectionStart"in n&&Tc(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),Si&&Ui(Si,n)||(Si=n,n=ho(yu,"onSelect"),0<n.length&&(t=new Nc("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=ls)))}function Ea(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var us={animationend:Ea("Animation","AnimationEnd"),animationiteration:Ea("Animation","AnimationIteration"),animationstart:Ea("Animation","AnimationStart"),transitionend:Ea("Transition","TransitionEnd")},bl={},Bp={};Cr&&(Bp=document.createElement("div").style,"AnimationEvent"in window||(delete us.animationend.animation,delete us.animationiteration.animation,delete us.animationstart.animation),"TransitionEvent"in window||delete us.transitionend.transition);function Wo(e){if(bl[e])return bl[e];if(!us[e])return e;var t=us[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in Bp)return bl[e]=t[r];return e}var Vp=Wo("animationend"),Wp=Wo("animationiteration"),qp=Wo("animationstart"),Hp=Wo("transitionend"),Kp=new Map,Jd="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ln(e,t){Kp.set(e,t),Bn(t,[e])}for(var jl=0;jl<Jd.length;jl++){var Sl=Jd[jl],n0=Sl.toLowerCase(),s0=Sl[0].toUpperCase()+Sl.slice(1);ln(n0,"on"+s0)}ln(Vp,"onAnimationEnd");ln(Wp,"onAnimationIteration");ln(qp,"onAnimationStart");ln("dblclick","onDoubleClick");ln("focusin","onFocus");ln("focusout","onBlur");ln(Hp,"onTransitionEnd");Ss("onMouseEnter",["mouseout","mouseover"]);Ss("onMouseLeave",["mouseout","mouseover"]);Ss("onPointerEnter",["pointerout","pointerover"]);Ss("onPointerLeave",["pointerout","pointerover"]);Bn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Bn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Bn("onBeforeInput",["compositionend","keypress","textInput","paste"]);Bn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Bn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Bn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var vi="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),i0=new Set("cancel close invalid load scroll toggle".split(" ").concat(vi));function Qd(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,ny(n,t,void 0,e),e.currentTarget=null}function Gp(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var n=e[r],s=n.event;n=n.listeners;e:{var i=void 0;if(t)for(var a=n.length-1;0<=a;a--){var l=n[a],u=l.instance,c=l.currentTarget;if(l=l.listener,u!==i&&s.isPropagationStopped())break e;Qd(s,l,c),i=u}else for(a=0;a<n.length;a++){if(l=n[a],u=l.instance,c=l.currentTarget,l=l.listener,u!==i&&s.isPropagationStopped())break e;Qd(s,l,c),i=u}}}if(ao)throw e=pu,ao=!1,pu=null,e}function Ce(e,t){var r=t[Su];r===void 0&&(r=t[Su]=new Set);var n=e+"__bubble";r.has(n)||(Jp(t,e,2,!1),r.add(n))}function kl(e,t,r){var n=0;t&&(n|=4),Jp(r,e,n,t)}var Na="_reactListening"+Math.random().toString(36).slice(2);function Fi(e){if(!e[Na]){e[Na]=!0,rp.forEach(function(r){r!=="selectionchange"&&(i0.has(r)||kl(r,!1,e),kl(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Na]||(t[Na]=!0,kl("selectionchange",!1,t))}}function Jp(e,t,r,n){switch(Rp(t)){case 1:var s=wy;break;case 4:s=xy;break;default:s=kc}r=s.bind(null,t,r,e),s=void 0,!fu||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),n?s!==void 0?e.addEventListener(t,r,{capture:!0,passive:s}):e.addEventListener(t,r,!0):s!==void 0?e.addEventListener(t,r,{passive:s}):e.addEventListener(t,r,!1)}function El(e,t,r,n,s){var i=n;if(!(t&1)&&!(t&2)&&n!==null)e:for(;;){if(n===null)return;var a=n.tag;if(a===3||a===4){var l=n.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(a===4)for(a=n.return;a!==null;){var u=a.tag;if((u===3||u===4)&&(u=a.stateNode.containerInfo,u===s||u.nodeType===8&&u.parentNode===s))return;a=a.return}for(;l!==null;){if(a=Cn(l),a===null)return;if(u=a.tag,u===5||u===6){n=i=a;continue e}l=l.parentNode}}n=n.return}yp(function(){var c=i,d=_c(r),h=[];e:{var f=Kp.get(e);if(f!==void 0){var m=Nc,x=e;switch(e){case"keypress":if(Ja(r)===0)break e;case"keydown":case"keyup":m=Ly;break;case"focusin":x="focus",m=wl;break;case"focusout":x="blur",m=wl;break;case"beforeblur":case"afterblur":m=wl;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=Md;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=jy;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=My;break;case Vp:case Wp:case qp:m=Ey;break;case Hp:m=Fy;break;case"scroll":m=_y;break;case"wheel":m=By;break;case"copy":case"cut":case"paste":m=Cy;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=Fd}var g=(t&4)!==0,_=!g&&e==="scroll",v=g?f!==null?f+"Capture":null:f;g=[];for(var p=c,y;p!==null;){y=p;var j=y.stateNode;if(y.tag===5&&j!==null&&(y=j,v!==null&&(j=Ai(p,v),j!=null&&g.push(zi(p,j,y)))),_)break;p=p.return}0<g.length&&(f=new m(f,x,null,r,d),h.push({event:f,listeners:g}))}}if(!(t&7)){e:{if(f=e==="mouseover"||e==="pointerover",m=e==="mouseout"||e==="pointerout",f&&r!==du&&(x=r.relatedTarget||r.fromElement)&&(Cn(x)||x[Pr]))break e;if((m||f)&&(f=d.window===d?d:(f=d.ownerDocument)?f.defaultView||f.parentWindow:window,m?(x=r.relatedTarget||r.toElement,m=c,x=x?Cn(x):null,x!==null&&(_=Vn(x),x!==_||x.tag!==5&&x.tag!==6)&&(x=null)):(m=null,x=c),m!==x)){if(g=Md,j="onMouseLeave",v="onMouseEnter",p="mouse",(e==="pointerout"||e==="pointerover")&&(g=Fd,j="onPointerLeave",v="onPointerEnter",p="pointer"),_=m==null?f:cs(m),y=x==null?f:cs(x),f=new g(j,p+"leave",m,r,d),f.target=_,f.relatedTarget=y,j=null,Cn(d)===c&&(g=new g(v,p+"enter",x,r,d),g.target=y,g.relatedTarget=_,j=g),_=j,m&&x)t:{for(g=m,v=x,p=0,y=g;y;y=Qn(y))p++;for(y=0,j=v;j;j=Qn(j))y++;for(;0<p-y;)g=Qn(g),p--;for(;0<y-p;)v=Qn(v),y--;for(;p--;){if(g===v||v!==null&&g===v.alternate)break t;g=Qn(g),v=Qn(v)}g=null}else g=null;m!==null&&Yd(h,f,m,g,!1),x!==null&&_!==null&&Yd(h,_,x,g,!0)}}e:{if(f=c?cs(c):window,m=f.nodeName&&f.nodeName.toLowerCase(),m==="select"||m==="input"&&f.type==="file")var N=Jy;else if(Vd(f))if(Mp)N=Zy;else{N=Yy;var P=Qy}else(m=f.nodeName)&&m.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(N=Xy);if(N&&(N=N(e,c))){$p(h,N,r,d);break e}P&&P(e,f,c),e==="focusout"&&(P=f._wrapperState)&&P.controlled&&f.type==="number"&&au(f,"number",f.value)}switch(P=c?cs(c):window,e){case"focusin":(Vd(P)||P.contentEditable==="true")&&(ls=P,yu=c,Si=null);break;case"focusout":Si=yu=ls=null;break;case"mousedown":wu=!0;break;case"contextmenu":case"mouseup":case"dragend":wu=!1,Gd(h,r,d);break;case"selectionchange":if(r0)break;case"keydown":case"keyup":Gd(h,r,d)}var b;if(Pc)e:{switch(e){case"compositionstart":var I="onCompositionStart";break e;case"compositionend":I="onCompositionEnd";break e;case"compositionupdate":I="onCompositionUpdate";break e}I=void 0}else os?Lp(e,r)&&(I="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(I="onCompositionStart");I&&(Ap&&r.locale!=="ko"&&(os||I!=="onCompositionStart"?I==="onCompositionEnd"&&os&&(b=Ip()):(Kr=d,Ec="value"in Kr?Kr.value:Kr.textContent,os=!0)),P=ho(c,I),0<P.length&&(I=new Ud(I,e,null,r,d),h.push({event:I,listeners:P}),b?I.data=b:(b=Dp(r),b!==null&&(I.data=b)))),(b=Wy?qy(e,r):Hy(e,r))&&(c=ho(c,"onBeforeInput"),0<c.length&&(d=new Ud("onBeforeInput","beforeinput",null,r,d),h.push({event:d,listeners:c}),d.data=b))}Gp(h,t)})}function zi(e,t,r){return{instance:e,listener:t,currentTarget:r}}function ho(e,t){for(var r=t+"Capture",n=[];e!==null;){var s=e,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Ai(e,r),i!=null&&n.unshift(zi(e,i,s)),i=Ai(e,t),i!=null&&n.push(zi(e,i,s))),e=e.return}return n}function Qn(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Yd(e,t,r,n,s){for(var i=t._reactName,a=[];r!==null&&r!==n;){var l=r,u=l.alternate,c=l.stateNode;if(u!==null&&u===n)break;l.tag===5&&c!==null&&(l=c,s?(u=Ai(r,i),u!=null&&a.unshift(zi(r,u,l))):s||(u=Ai(r,i),u!=null&&a.push(zi(r,u,l)))),r=r.return}a.length!==0&&e.push({event:t,listeners:a})}var a0=/\r\n?/g,o0=/\u0000|\uFFFD/g;function Xd(e){return(typeof e=="string"?e:""+e).replace(a0,`
`).replace(o0,"")}function Ca(e,t,r){if(t=Xd(t),Xd(e)!==t&&r)throw Error($(425))}function fo(){}var xu=null,_u=null;function bu(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var ju=typeof setTimeout=="function"?setTimeout:void 0,l0=typeof clearTimeout=="function"?clearTimeout:void 0,Zd=typeof Promise=="function"?Promise:void 0,u0=typeof queueMicrotask=="function"?queueMicrotask:typeof Zd<"u"?function(e){return Zd.resolve(null).then(e).catch(c0)}:ju;function c0(e){setTimeout(function(){throw e})}function Nl(e,t){var r=t,n=0;do{var s=r.nextSibling;if(e.removeChild(r),s&&s.nodeType===8)if(r=s.data,r==="/$"){if(n===0){e.removeChild(s),$i(t);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=s}while(r);$i(t)}function Zr(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function eh(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var Ms=Math.random().toString(36).slice(2),fr="__reactFiber$"+Ms,Bi="__reactProps$"+Ms,Pr="__reactContainer$"+Ms,Su="__reactEvents$"+Ms,d0="__reactListeners$"+Ms,h0="__reactHandles$"+Ms;function Cn(e){var t=e[fr];if(t)return t;for(var r=e.parentNode;r;){if(t=r[Pr]||r[fr]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=eh(e);e!==null;){if(r=e[fr])return r;e=eh(e)}return t}e=r,r=e.parentNode}return null}function sa(e){return e=e[fr]||e[Pr],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function cs(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error($(33))}function qo(e){return e[Bi]||null}var ku=[],ds=-1;function un(e){return{current:e}}function Pe(e){0>ds||(e.current=ku[ds],ku[ds]=null,ds--)}function Ne(e,t){ds++,ku[ds]=e.current,e.current=t}var an={},ht=un(an),jt=un(!1),Dn=an;function ks(e,t){var r=e.type.contextTypes;if(!r)return an;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in r)s[i]=t[i];return n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function St(e){return e=e.childContextTypes,e!=null}function po(){Pe(jt),Pe(ht)}function th(e,t,r){if(ht.current!==an)throw Error($(168));Ne(ht,t),Ne(jt,r)}function Qp(e,t,r){var n=e.stateNode;if(t=t.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var s in n)if(!(s in t))throw Error($(108,Qv(e)||"Unknown",s));return Me({},r,n)}function mo(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||an,Dn=ht.current,Ne(ht,e),Ne(jt,jt.current),!0}function rh(e,t,r){var n=e.stateNode;if(!n)throw Error($(169));r?(e=Qp(e,t,Dn),n.__reactInternalMemoizedMergedChildContext=e,Pe(jt),Pe(ht),Ne(ht,e)):Pe(jt),Ne(jt,r)}var jr=null,Ho=!1,Cl=!1;function Yp(e){jr===null?jr=[e]:jr.push(e)}function f0(e){Ho=!0,Yp(e)}function cn(){if(!Cl&&jr!==null){Cl=!0;var e=0,t=be;try{var r=jr;for(be=1;e<r.length;e++){var n=r[e];do n=n(!0);while(n!==null)}jr=null,Ho=!1}catch(s){throw jr!==null&&(jr=jr.slice(e+1)),bp(bc,cn),s}finally{be=t,Cl=!1}}return null}var hs=[],fs=0,go=null,vo=0,Ut=[],Ft=0,$n=null,Sr=1,kr="";function xn(e,t){hs[fs++]=vo,hs[fs++]=go,go=e,vo=t}function Xp(e,t,r){Ut[Ft++]=Sr,Ut[Ft++]=kr,Ut[Ft++]=$n,$n=e;var n=Sr;e=kr;var s=32-sr(n)-1;n&=~(1<<s),r+=1;var i=32-sr(t)+s;if(30<i){var a=s-s%5;i=(n&(1<<a)-1).toString(32),n>>=a,s-=a,Sr=1<<32-sr(t)+s|r<<s|n,kr=i+e}else Sr=1<<i|r<<s|n,kr=e}function Oc(e){e.return!==null&&(xn(e,1),Xp(e,1,0))}function Rc(e){for(;e===go;)go=hs[--fs],hs[fs]=null,vo=hs[--fs],hs[fs]=null;for(;e===$n;)$n=Ut[--Ft],Ut[Ft]=null,kr=Ut[--Ft],Ut[Ft]=null,Sr=Ut[--Ft],Ut[Ft]=null}var Rt=null,Ot=null,Re=!1,nr=null;function Zp(e,t){var r=zt(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function nh(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Rt=e,Ot=Zr(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Rt=e,Ot=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=$n!==null?{id:Sr,overflow:kr}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=zt(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,Rt=e,Ot=null,!0):!1;default:return!1}}function Eu(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Nu(e){if(Re){var t=Ot;if(t){var r=t;if(!nh(e,t)){if(Eu(e))throw Error($(418));t=Zr(r.nextSibling);var n=Rt;t&&nh(e,t)?Zp(n,r):(e.flags=e.flags&-4097|2,Re=!1,Rt=e)}}else{if(Eu(e))throw Error($(418));e.flags=e.flags&-4097|2,Re=!1,Rt=e}}}function sh(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Rt=e}function Pa(e){if(e!==Rt)return!1;if(!Re)return sh(e),Re=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!bu(e.type,e.memoizedProps)),t&&(t=Ot)){if(Eu(e))throw em(),Error($(418));for(;t;)Zp(e,t),t=Zr(t.nextSibling)}if(sh(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error($(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){Ot=Zr(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}Ot=null}}else Ot=Rt?Zr(e.stateNode.nextSibling):null;return!0}function em(){for(var e=Ot;e;)e=Zr(e.nextSibling)}function Es(){Ot=Rt=null,Re=!1}function Ic(e){nr===null?nr=[e]:nr.push(e)}var p0=Ir.ReactCurrentBatchConfig;function oi(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error($(309));var n=r.stateNode}if(!n)throw Error($(147,e));var s=n,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(a){var l=s.refs;a===null?delete l[i]:l[i]=a},t._stringRef=i,t)}if(typeof e!="string")throw Error($(284));if(!r._owner)throw Error($(290,e))}return e}function Ta(e,t){throw e=Object.prototype.toString.call(t),Error($(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function ih(e){var t=e._init;return t(e._payload)}function tm(e){function t(v,p){if(e){var y=v.deletions;y===null?(v.deletions=[p],v.flags|=16):y.push(p)}}function r(v,p){if(!e)return null;for(;p!==null;)t(v,p),p=p.sibling;return null}function n(v,p){for(v=new Map;p!==null;)p.key!==null?v.set(p.key,p):v.set(p.index,p),p=p.sibling;return v}function s(v,p){return v=nn(v,p),v.index=0,v.sibling=null,v}function i(v,p,y){return v.index=y,e?(y=v.alternate,y!==null?(y=y.index,y<p?(v.flags|=2,p):y):(v.flags|=2,p)):(v.flags|=1048576,p)}function a(v){return e&&v.alternate===null&&(v.flags|=2),v}function l(v,p,y,j){return p===null||p.tag!==6?(p=Ll(y,v.mode,j),p.return=v,p):(p=s(p,y),p.return=v,p)}function u(v,p,y,j){var N=y.type;return N===as?d(v,p,y.props.children,j,y.key):p!==null&&(p.elementType===N||typeof N=="object"&&N!==null&&N.$$typeof===Br&&ih(N)===p.type)?(j=s(p,y.props),j.ref=oi(v,p,y),j.return=v,j):(j=ro(y.type,y.key,y.props,null,v.mode,j),j.ref=oi(v,p,y),j.return=v,j)}function c(v,p,y,j){return p===null||p.tag!==4||p.stateNode.containerInfo!==y.containerInfo||p.stateNode.implementation!==y.implementation?(p=Dl(y,v.mode,j),p.return=v,p):(p=s(p,y.children||[]),p.return=v,p)}function d(v,p,y,j,N){return p===null||p.tag!==7?(p=Ln(y,v.mode,j,N),p.return=v,p):(p=s(p,y),p.return=v,p)}function h(v,p,y){if(typeof p=="string"&&p!==""||typeof p=="number")return p=Ll(""+p,v.mode,y),p.return=v,p;if(typeof p=="object"&&p!==null){switch(p.$$typeof){case wa:return y=ro(p.type,p.key,p.props,null,v.mode,y),y.ref=oi(v,null,p),y.return=v,y;case is:return p=Dl(p,v.mode,y),p.return=v,p;case Br:var j=p._init;return h(v,j(p._payload),y)}if(mi(p)||ri(p))return p=Ln(p,v.mode,y,null),p.return=v,p;Ta(v,p)}return null}function f(v,p,y,j){var N=p!==null?p.key:null;if(typeof y=="string"&&y!==""||typeof y=="number")return N!==null?null:l(v,p,""+y,j);if(typeof y=="object"&&y!==null){switch(y.$$typeof){case wa:return y.key===N?u(v,p,y,j):null;case is:return y.key===N?c(v,p,y,j):null;case Br:return N=y._init,f(v,p,N(y._payload),j)}if(mi(y)||ri(y))return N!==null?null:d(v,p,y,j,null);Ta(v,y)}return null}function m(v,p,y,j,N){if(typeof j=="string"&&j!==""||typeof j=="number")return v=v.get(y)||null,l(p,v,""+j,N);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case wa:return v=v.get(j.key===null?y:j.key)||null,u(p,v,j,N);case is:return v=v.get(j.key===null?y:j.key)||null,c(p,v,j,N);case Br:var P=j._init;return m(v,p,y,P(j._payload),N)}if(mi(j)||ri(j))return v=v.get(y)||null,d(p,v,j,N,null);Ta(p,j)}return null}function x(v,p,y,j){for(var N=null,P=null,b=p,I=p=0,z=null;b!==null&&I<y.length;I++){b.index>I?(z=b,b=null):z=b.sibling;var L=f(v,b,y[I],j);if(L===null){b===null&&(b=z);break}e&&b&&L.alternate===null&&t(v,b),p=i(L,p,I),P===null?N=L:P.sibling=L,P=L,b=z}if(I===y.length)return r(v,b),Re&&xn(v,I),N;if(b===null){for(;I<y.length;I++)b=h(v,y[I],j),b!==null&&(p=i(b,p,I),P===null?N=b:P.sibling=b,P=b);return Re&&xn(v,I),N}for(b=n(v,b);I<y.length;I++)z=m(b,v,I,y[I],j),z!==null&&(e&&z.alternate!==null&&b.delete(z.key===null?I:z.key),p=i(z,p,I),P===null?N=z:P.sibling=z,P=z);return e&&b.forEach(function(ne){return t(v,ne)}),Re&&xn(v,I),N}function g(v,p,y,j){var N=ri(y);if(typeof N!="function")throw Error($(150));if(y=N.call(y),y==null)throw Error($(151));for(var P=N=null,b=p,I=p=0,z=null,L=y.next();b!==null&&!L.done;I++,L=y.next()){b.index>I?(z=b,b=null):z=b.sibling;var ne=f(v,b,L.value,j);if(ne===null){b===null&&(b=z);break}e&&b&&ne.alternate===null&&t(v,b),p=i(ne,p,I),P===null?N=ne:P.sibling=ne,P=ne,b=z}if(L.done)return r(v,b),Re&&xn(v,I),N;if(b===null){for(;!L.done;I++,L=y.next())L=h(v,L.value,j),L!==null&&(p=i(L,p,I),P===null?N=L:P.sibling=L,P=L);return Re&&xn(v,I),N}for(b=n(v,b);!L.done;I++,L=y.next())L=m(b,v,I,L.value,j),L!==null&&(e&&L.alternate!==null&&b.delete(L.key===null?I:L.key),p=i(L,p,I),P===null?N=L:P.sibling=L,P=L);return e&&b.forEach(function(O){return t(v,O)}),Re&&xn(v,I),N}function _(v,p,y,j){if(typeof y=="object"&&y!==null&&y.type===as&&y.key===null&&(y=y.props.children),typeof y=="object"&&y!==null){switch(y.$$typeof){case wa:e:{for(var N=y.key,P=p;P!==null;){if(P.key===N){if(N=y.type,N===as){if(P.tag===7){r(v,P.sibling),p=s(P,y.props.children),p.return=v,v=p;break e}}else if(P.elementType===N||typeof N=="object"&&N!==null&&N.$$typeof===Br&&ih(N)===P.type){r(v,P.sibling),p=s(P,y.props),p.ref=oi(v,P,y),p.return=v,v=p;break e}r(v,P);break}else t(v,P);P=P.sibling}y.type===as?(p=Ln(y.props.children,v.mode,j,y.key),p.return=v,v=p):(j=ro(y.type,y.key,y.props,null,v.mode,j),j.ref=oi(v,p,y),j.return=v,v=j)}return a(v);case is:e:{for(P=y.key;p!==null;){if(p.key===P)if(p.tag===4&&p.stateNode.containerInfo===y.containerInfo&&p.stateNode.implementation===y.implementation){r(v,p.sibling),p=s(p,y.children||[]),p.return=v,v=p;break e}else{r(v,p);break}else t(v,p);p=p.sibling}p=Dl(y,v.mode,j),p.return=v,v=p}return a(v);case Br:return P=y._init,_(v,p,P(y._payload),j)}if(mi(y))return x(v,p,y,j);if(ri(y))return g(v,p,y,j);Ta(v,y)}return typeof y=="string"&&y!==""||typeof y=="number"?(y=""+y,p!==null&&p.tag===6?(r(v,p.sibling),p=s(p,y),p.return=v,v=p):(r(v,p),p=Ll(y,v.mode,j),p.return=v,v=p),a(v)):r(v,p)}return _}var Ns=tm(!0),rm=tm(!1),yo=un(null),wo=null,ps=null,Ac=null;function Lc(){Ac=ps=wo=null}function Dc(e){var t=yo.current;Pe(yo),e._currentValue=t}function Cu(e,t,r){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function _s(e,t){wo=e,Ac=ps=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(bt=!0),e.firstContext=null)}function Vt(e){var t=e._currentValue;if(Ac!==e)if(e={context:e,memoizedValue:t,next:null},ps===null){if(wo===null)throw Error($(308));ps=e,wo.dependencies={lanes:0,firstContext:e}}else ps=ps.next=e;return t}var Pn=null;function $c(e){Pn===null?Pn=[e]:Pn.push(e)}function nm(e,t,r,n){var s=t.interleaved;return s===null?(r.next=r,$c(t)):(r.next=s.next,s.next=r),t.interleaved=r,Tr(e,n)}function Tr(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var Vr=!1;function Mc(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function sm(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Er(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function en(e,t,r){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,ge&2){var s=n.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),n.pending=t,Tr(e,r)}return s=n.interleaved,s===null?(t.next=t,$c(n)):(t.next=s.next,s.next=t),n.interleaved=t,Tr(e,r)}function Qa(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,jc(e,r)}}function ah(e,t){var r=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var s=null,i=null;if(r=r.firstBaseUpdate,r!==null){do{var a={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};i===null?s=i=a:i=i.next=a,r=r.next}while(r!==null);i===null?s=i=t:i=i.next=t}else s=i=t;r={baseState:n.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:n.shared,effects:n.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function xo(e,t,r,n){var s=e.updateQueue;Vr=!1;var i=s.firstBaseUpdate,a=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var u=l,c=u.next;u.next=null,a===null?i=c:a.next=c,a=u;var d=e.alternate;d!==null&&(d=d.updateQueue,l=d.lastBaseUpdate,l!==a&&(l===null?d.firstBaseUpdate=c:l.next=c,d.lastBaseUpdate=u))}if(i!==null){var h=s.baseState;a=0,d=c=u=null,l=i;do{var f=l.lane,m=l.eventTime;if((n&f)===f){d!==null&&(d=d.next={eventTime:m,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var x=e,g=l;switch(f=t,m=r,g.tag){case 1:if(x=g.payload,typeof x=="function"){h=x.call(m,h,f);break e}h=x;break e;case 3:x.flags=x.flags&-65537|128;case 0:if(x=g.payload,f=typeof x=="function"?x.call(m,h,f):x,f==null)break e;h=Me({},h,f);break e;case 2:Vr=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,f=s.effects,f===null?s.effects=[l]:f.push(l))}else m={eventTime:m,lane:f,tag:l.tag,payload:l.payload,callback:l.callback,next:null},d===null?(c=d=m,u=h):d=d.next=m,a|=f;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;f=l,l=f.next,f.next=null,s.lastBaseUpdate=f,s.shared.pending=null}}while(!0);if(d===null&&(u=h),s.baseState=u,s.firstBaseUpdate=c,s.lastBaseUpdate=d,t=s.shared.interleaved,t!==null){s=t;do a|=s.lane,s=s.next;while(s!==t)}else i===null&&(s.shared.lanes=0);Un|=a,e.lanes=a,e.memoizedState=h}}function oh(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var n=e[t],s=n.callback;if(s!==null){if(n.callback=null,n=r,typeof s!="function")throw Error($(191,s));s.call(n)}}}var ia={},mr=un(ia),Vi=un(ia),Wi=un(ia);function Tn(e){if(e===ia)throw Error($(174));return e}function Uc(e,t){switch(Ne(Wi,t),Ne(Vi,e),Ne(mr,ia),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:lu(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=lu(t,e)}Pe(mr),Ne(mr,t)}function Cs(){Pe(mr),Pe(Vi),Pe(Wi)}function im(e){Tn(Wi.current);var t=Tn(mr.current),r=lu(t,e.type);t!==r&&(Ne(Vi,e),Ne(mr,r))}function Fc(e){Vi.current===e&&(Pe(mr),Pe(Vi))}var De=un(0);function _o(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Pl=[];function zc(){for(var e=0;e<Pl.length;e++)Pl[e]._workInProgressVersionPrimary=null;Pl.length=0}var Ya=Ir.ReactCurrentDispatcher,Tl=Ir.ReactCurrentBatchConfig,Mn=0,$e=null,Ze=null,rt=null,bo=!1,ki=!1,qi=0,m0=0;function ut(){throw Error($(321))}function Bc(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!ar(e[r],t[r]))return!1;return!0}function Vc(e,t,r,n,s,i){if(Mn=i,$e=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Ya.current=e===null||e.memoizedState===null?w0:x0,e=r(n,s),ki){i=0;do{if(ki=!1,qi=0,25<=i)throw Error($(301));i+=1,rt=Ze=null,t.updateQueue=null,Ya.current=_0,e=r(n,s)}while(ki)}if(Ya.current=jo,t=Ze!==null&&Ze.next!==null,Mn=0,rt=Ze=$e=null,bo=!1,t)throw Error($(300));return e}function Wc(){var e=qi!==0;return qi=0,e}function hr(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return rt===null?$e.memoizedState=rt=e:rt=rt.next=e,rt}function Wt(){if(Ze===null){var e=$e.alternate;e=e!==null?e.memoizedState:null}else e=Ze.next;var t=rt===null?$e.memoizedState:rt.next;if(t!==null)rt=t,Ze=e;else{if(e===null)throw Error($(310));Ze=e,e={memoizedState:Ze.memoizedState,baseState:Ze.baseState,baseQueue:Ze.baseQueue,queue:Ze.queue,next:null},rt===null?$e.memoizedState=rt=e:rt=rt.next=e}return rt}function Hi(e,t){return typeof t=="function"?t(e):t}function Ol(e){var t=Wt(),r=t.queue;if(r===null)throw Error($(311));r.lastRenderedReducer=e;var n=Ze,s=n.baseQueue,i=r.pending;if(i!==null){if(s!==null){var a=s.next;s.next=i.next,i.next=a}n.baseQueue=s=i,r.pending=null}if(s!==null){i=s.next,n=n.baseState;var l=a=null,u=null,c=i;do{var d=c.lane;if((Mn&d)===d)u!==null&&(u=u.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),n=c.hasEagerState?c.eagerState:e(n,c.action);else{var h={lane:d,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};u===null?(l=u=h,a=n):u=u.next=h,$e.lanes|=d,Un|=d}c=c.next}while(c!==null&&c!==i);u===null?a=n:u.next=l,ar(n,t.memoizedState)||(bt=!0),t.memoizedState=n,t.baseState=a,t.baseQueue=u,r.lastRenderedState=n}if(e=r.interleaved,e!==null){s=e;do i=s.lane,$e.lanes|=i,Un|=i,s=s.next;while(s!==e)}else s===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function Rl(e){var t=Wt(),r=t.queue;if(r===null)throw Error($(311));r.lastRenderedReducer=e;var n=r.dispatch,s=r.pending,i=t.memoizedState;if(s!==null){r.pending=null;var a=s=s.next;do i=e(i,a.action),a=a.next;while(a!==s);ar(i,t.memoizedState)||(bt=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),r.lastRenderedState=i}return[i,n]}function am(){}function om(e,t){var r=$e,n=Wt(),s=t(),i=!ar(n.memoizedState,s);if(i&&(n.memoizedState=s,bt=!0),n=n.queue,qc(cm.bind(null,r,n,e),[e]),n.getSnapshot!==t||i||rt!==null&&rt.memoizedState.tag&1){if(r.flags|=2048,Ki(9,um.bind(null,r,n,s,t),void 0,null),nt===null)throw Error($(349));Mn&30||lm(r,t,s)}return s}function lm(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=$e.updateQueue,t===null?(t={lastEffect:null,stores:null},$e.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function um(e,t,r,n){t.value=r,t.getSnapshot=n,dm(t)&&hm(e)}function cm(e,t,r){return r(function(){dm(t)&&hm(e)})}function dm(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!ar(e,r)}catch{return!0}}function hm(e){var t=Tr(e,1);t!==null&&ir(t,e,1,-1)}function lh(e){var t=hr();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Hi,lastRenderedState:e},t.queue=e,e=e.dispatch=y0.bind(null,$e,e),[t.memoizedState,e]}function Ki(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},t=$e.updateQueue,t===null?(t={lastEffect:null,stores:null},$e.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e)),e}function fm(){return Wt().memoizedState}function Xa(e,t,r,n){var s=hr();$e.flags|=e,s.memoizedState=Ki(1|t,r,void 0,n===void 0?null:n)}function Ko(e,t,r,n){var s=Wt();n=n===void 0?null:n;var i=void 0;if(Ze!==null){var a=Ze.memoizedState;if(i=a.destroy,n!==null&&Bc(n,a.deps)){s.memoizedState=Ki(t,r,i,n);return}}$e.flags|=e,s.memoizedState=Ki(1|t,r,i,n)}function uh(e,t){return Xa(8390656,8,e,t)}function qc(e,t){return Ko(2048,8,e,t)}function pm(e,t){return Ko(4,2,e,t)}function mm(e,t){return Ko(4,4,e,t)}function gm(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function vm(e,t,r){return r=r!=null?r.concat([e]):null,Ko(4,4,gm.bind(null,t,e),r)}function Hc(){}function ym(e,t){var r=Wt();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&Bc(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function wm(e,t){var r=Wt();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&Bc(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function xm(e,t,r){return Mn&21?(ar(r,t)||(r=kp(),$e.lanes|=r,Un|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,bt=!0),e.memoizedState=r)}function g0(e,t){var r=be;be=r!==0&&4>r?r:4,e(!0);var n=Tl.transition;Tl.transition={};try{e(!1),t()}finally{be=r,Tl.transition=n}}function _m(){return Wt().memoizedState}function v0(e,t,r){var n=rn(e);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},bm(e))jm(t,r);else if(r=nm(e,t,r,n),r!==null){var s=pt();ir(r,e,n,s),Sm(r,t,n)}}function y0(e,t,r){var n=rn(e),s={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(bm(e))jm(t,s);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var a=t.lastRenderedState,l=i(a,r);if(s.hasEagerState=!0,s.eagerState=l,ar(l,a)){var u=t.interleaved;u===null?(s.next=s,$c(t)):(s.next=u.next,u.next=s),t.interleaved=s;return}}catch{}finally{}r=nm(e,t,s,n),r!==null&&(s=pt(),ir(r,e,n,s),Sm(r,t,n))}}function bm(e){var t=e.alternate;return e===$e||t!==null&&t===$e}function jm(e,t){ki=bo=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function Sm(e,t,r){if(r&4194240){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,jc(e,r)}}var jo={readContext:Vt,useCallback:ut,useContext:ut,useEffect:ut,useImperativeHandle:ut,useInsertionEffect:ut,useLayoutEffect:ut,useMemo:ut,useReducer:ut,useRef:ut,useState:ut,useDebugValue:ut,useDeferredValue:ut,useTransition:ut,useMutableSource:ut,useSyncExternalStore:ut,useId:ut,unstable_isNewReconciler:!1},w0={readContext:Vt,useCallback:function(e,t){return hr().memoizedState=[e,t===void 0?null:t],e},useContext:Vt,useEffect:uh,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,Xa(4194308,4,gm.bind(null,t,e),r)},useLayoutEffect:function(e,t){return Xa(4194308,4,e,t)},useInsertionEffect:function(e,t){return Xa(4,2,e,t)},useMemo:function(e,t){var r=hr();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=hr();return t=r!==void 0?r(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=v0.bind(null,$e,e),[n.memoizedState,e]},useRef:function(e){var t=hr();return e={current:e},t.memoizedState=e},useState:lh,useDebugValue:Hc,useDeferredValue:function(e){return hr().memoizedState=e},useTransition:function(){var e=lh(!1),t=e[0];return e=g0.bind(null,e[1]),hr().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var n=$e,s=hr();if(Re){if(r===void 0)throw Error($(407));r=r()}else{if(r=t(),nt===null)throw Error($(349));Mn&30||lm(n,t,r)}s.memoizedState=r;var i={value:r,getSnapshot:t};return s.queue=i,uh(cm.bind(null,n,i,e),[e]),n.flags|=2048,Ki(9,um.bind(null,n,i,r,t),void 0,null),r},useId:function(){var e=hr(),t=nt.identifierPrefix;if(Re){var r=kr,n=Sr;r=(n&~(1<<32-sr(n)-1)).toString(32)+r,t=":"+t+"R"+r,r=qi++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=m0++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},x0={readContext:Vt,useCallback:ym,useContext:Vt,useEffect:qc,useImperativeHandle:vm,useInsertionEffect:pm,useLayoutEffect:mm,useMemo:wm,useReducer:Ol,useRef:fm,useState:function(){return Ol(Hi)},useDebugValue:Hc,useDeferredValue:function(e){var t=Wt();return xm(t,Ze.memoizedState,e)},useTransition:function(){var e=Ol(Hi)[0],t=Wt().memoizedState;return[e,t]},useMutableSource:am,useSyncExternalStore:om,useId:_m,unstable_isNewReconciler:!1},_0={readContext:Vt,useCallback:ym,useContext:Vt,useEffect:qc,useImperativeHandle:vm,useInsertionEffect:pm,useLayoutEffect:mm,useMemo:wm,useReducer:Rl,useRef:fm,useState:function(){return Rl(Hi)},useDebugValue:Hc,useDeferredValue:function(e){var t=Wt();return Ze===null?t.memoizedState=e:xm(t,Ze.memoizedState,e)},useTransition:function(){var e=Rl(Hi)[0],t=Wt().memoizedState;return[e,t]},useMutableSource:am,useSyncExternalStore:om,useId:_m,unstable_isNewReconciler:!1};function Xt(e,t){if(e&&e.defaultProps){t=Me({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function Pu(e,t,r,n){t=e.memoizedState,r=r(n,t),r=r==null?t:Me({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var Go={isMounted:function(e){return(e=e._reactInternals)?Vn(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=pt(),s=rn(e),i=Er(n,s);i.payload=t,r!=null&&(i.callback=r),t=en(e,i,s),t!==null&&(ir(t,e,s,n),Qa(t,e,s))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=pt(),s=rn(e),i=Er(n,s);i.tag=1,i.payload=t,r!=null&&(i.callback=r),t=en(e,i,s),t!==null&&(ir(t,e,s,n),Qa(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=pt(),n=rn(e),s=Er(r,n);s.tag=2,t!=null&&(s.callback=t),t=en(e,s,n),t!==null&&(ir(t,e,n,r),Qa(t,e,n))}};function ch(e,t,r,n,s,i,a){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,i,a):t.prototype&&t.prototype.isPureReactComponent?!Ui(r,n)||!Ui(s,i):!0}function km(e,t,r){var n=!1,s=an,i=t.contextType;return typeof i=="object"&&i!==null?i=Vt(i):(s=St(t)?Dn:ht.current,n=t.contextTypes,i=(n=n!=null)?ks(e,s):an),t=new t(r,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Go,e.stateNode=t,t._reactInternals=e,n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=i),t}function dh(e,t,r,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&Go.enqueueReplaceState(t,t.state,null)}function Tu(e,t,r,n){var s=e.stateNode;s.props=r,s.state=e.memoizedState,s.refs={},Mc(e);var i=t.contextType;typeof i=="object"&&i!==null?s.context=Vt(i):(i=St(t)?Dn:ht.current,s.context=ks(e,i)),s.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(Pu(e,t,i,r),s.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(t=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),t!==s.state&&Go.enqueueReplaceState(s,s.state,null),xo(e,r,s,n),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308)}function Ps(e,t){try{var r="",n=t;do r+=Jv(n),n=n.return;while(n);var s=r}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:s,digest:null}}function Il(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function Ou(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var b0=typeof WeakMap=="function"?WeakMap:Map;function Em(e,t,r){r=Er(-1,r),r.tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){ko||(ko=!0,zu=n),Ou(e,t)},r}function Nm(e,t,r){r=Er(-1,r),r.tag=3;var n=e.type.getDerivedStateFromError;if(typeof n=="function"){var s=t.value;r.payload=function(){return n(s)},r.callback=function(){Ou(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(r.callback=function(){Ou(e,t),typeof n!="function"&&(tn===null?tn=new Set([this]):tn.add(this));var a=t.stack;this.componentDidCatch(t.value,{componentStack:a!==null?a:""})}),r}function hh(e,t,r){var n=e.pingCache;if(n===null){n=e.pingCache=new b0;var s=new Set;n.set(t,s)}else s=n.get(t),s===void 0&&(s=new Set,n.set(t,s));s.has(r)||(s.add(r),e=D0.bind(null,e,t,r),t.then(e,e))}function fh(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function ph(e,t,r,n,s){return e.mode&1?(e.flags|=65536,e.lanes=s,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=Er(-1,1),t.tag=2,en(r,t,1))),r.lanes|=1),e)}var j0=Ir.ReactCurrentOwner,bt=!1;function ft(e,t,r,n){t.child=e===null?rm(t,null,r,n):Ns(t,e.child,r,n)}function mh(e,t,r,n,s){r=r.render;var i=t.ref;return _s(t,s),n=Vc(e,t,r,n,i,s),r=Wc(),e!==null&&!bt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Or(e,t,s)):(Re&&r&&Oc(t),t.flags|=1,ft(e,t,n,s),t.child)}function gh(e,t,r,n,s){if(e===null){var i=r.type;return typeof i=="function"&&!ed(i)&&i.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=i,Cm(e,t,i,n,s)):(e=ro(r.type,null,n,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&s)){var a=i.memoizedProps;if(r=r.compare,r=r!==null?r:Ui,r(a,n)&&e.ref===t.ref)return Or(e,t,s)}return t.flags|=1,e=nn(i,n),e.ref=t.ref,e.return=t,t.child=e}function Cm(e,t,r,n,s){if(e!==null){var i=e.memoizedProps;if(Ui(i,n)&&e.ref===t.ref)if(bt=!1,t.pendingProps=n=i,(e.lanes&s)!==0)e.flags&131072&&(bt=!0);else return t.lanes=e.lanes,Or(e,t,s)}return Ru(e,t,r,n,s)}function Pm(e,t,r){var n=t.pendingProps,s=n.children,i=e!==null?e.memoizedState:null;if(n.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ne(gs,Nt),Nt|=r;else{if(!(r&1073741824))return e=i!==null?i.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ne(gs,Nt),Nt|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=i!==null?i.baseLanes:r,Ne(gs,Nt),Nt|=n}else i!==null?(n=i.baseLanes|r,t.memoizedState=null):n=r,Ne(gs,Nt),Nt|=n;return ft(e,t,s,r),t.child}function Tm(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function Ru(e,t,r,n,s){var i=St(r)?Dn:ht.current;return i=ks(t,i),_s(t,s),r=Vc(e,t,r,n,i,s),n=Wc(),e!==null&&!bt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Or(e,t,s)):(Re&&n&&Oc(t),t.flags|=1,ft(e,t,r,s),t.child)}function vh(e,t,r,n,s){if(St(r)){var i=!0;mo(t)}else i=!1;if(_s(t,s),t.stateNode===null)Za(e,t),km(t,r,n),Tu(t,r,n,s),n=!0;else if(e===null){var a=t.stateNode,l=t.memoizedProps;a.props=l;var u=a.context,c=r.contextType;typeof c=="object"&&c!==null?c=Vt(c):(c=St(r)?Dn:ht.current,c=ks(t,c));var d=r.getDerivedStateFromProps,h=typeof d=="function"||typeof a.getSnapshotBeforeUpdate=="function";h||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==n||u!==c)&&dh(t,a,n,c),Vr=!1;var f=t.memoizedState;a.state=f,xo(t,n,a,s),u=t.memoizedState,l!==n||f!==u||jt.current||Vr?(typeof d=="function"&&(Pu(t,r,d,n),u=t.memoizedState),(l=Vr||ch(t,r,l,n,f,u,c))?(h||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(t.flags|=4194308)):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=u),a.props=n,a.state=u,a.context=c,n=l):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{a=t.stateNode,sm(e,t),l=t.memoizedProps,c=t.type===t.elementType?l:Xt(t.type,l),a.props=c,h=t.pendingProps,f=a.context,u=r.contextType,typeof u=="object"&&u!==null?u=Vt(u):(u=St(r)?Dn:ht.current,u=ks(t,u));var m=r.getDerivedStateFromProps;(d=typeof m=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==h||f!==u)&&dh(t,a,n,u),Vr=!1,f=t.memoizedState,a.state=f,xo(t,n,a,s);var x=t.memoizedState;l!==h||f!==x||jt.current||Vr?(typeof m=="function"&&(Pu(t,r,m,n),x=t.memoizedState),(c=Vr||ch(t,r,c,n,f,x,u)||!1)?(d||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(n,x,u),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(n,x,u)),typeof a.componentDidUpdate=="function"&&(t.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof a.componentDidUpdate!="function"||l===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=x),a.props=n,a.state=x,a.context=u,n=c):(typeof a.componentDidUpdate!="function"||l===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),n=!1)}return Iu(e,t,r,n,i,s)}function Iu(e,t,r,n,s,i){Tm(e,t);var a=(t.flags&128)!==0;if(!n&&!a)return s&&rh(t,r,!1),Or(e,t,i);n=t.stateNode,j0.current=t;var l=a&&typeof r.getDerivedStateFromError!="function"?null:n.render();return t.flags|=1,e!==null&&a?(t.child=Ns(t,e.child,null,i),t.child=Ns(t,null,l,i)):ft(e,t,l,i),t.memoizedState=n.state,s&&rh(t,r,!0),t.child}function Om(e){var t=e.stateNode;t.pendingContext?th(e,t.pendingContext,t.pendingContext!==t.context):t.context&&th(e,t.context,!1),Uc(e,t.containerInfo)}function yh(e,t,r,n,s){return Es(),Ic(s),t.flags|=256,ft(e,t,r,n),t.child}var Au={dehydrated:null,treeContext:null,retryLane:0};function Lu(e){return{baseLanes:e,cachePool:null,transitions:null}}function Rm(e,t,r){var n=t.pendingProps,s=De.current,i=!1,a=(t.flags&128)!==0,l;if((l=a)||(l=e!==null&&e.memoizedState===null?!1:(s&2)!==0),l?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(s|=1),Ne(De,s&1),e===null)return Nu(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(a=n.children,e=n.fallback,i?(n=t.mode,i=t.child,a={mode:"hidden",children:a},!(n&1)&&i!==null?(i.childLanes=0,i.pendingProps=a):i=Yo(a,n,0,null),e=Ln(e,n,r,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=Lu(r),t.memoizedState=Au,e):Kc(t,a));if(s=e.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return S0(e,t,a,n,l,s,r);if(i){i=n.fallback,a=t.mode,s=e.child,l=s.sibling;var u={mode:"hidden",children:n.children};return!(a&1)&&t.child!==s?(n=t.child,n.childLanes=0,n.pendingProps=u,t.deletions=null):(n=nn(s,u),n.subtreeFlags=s.subtreeFlags&14680064),l!==null?i=nn(l,i):(i=Ln(i,a,r,null),i.flags|=2),i.return=t,n.return=t,n.sibling=i,t.child=n,n=i,i=t.child,a=e.child.memoizedState,a=a===null?Lu(r):{baseLanes:a.baseLanes|r,cachePool:null,transitions:a.transitions},i.memoizedState=a,i.childLanes=e.childLanes&~r,t.memoizedState=Au,n}return i=e.child,e=i.sibling,n=nn(i,{mode:"visible",children:n.children}),!(t.mode&1)&&(n.lanes=r),n.return=t,n.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n}function Kc(e,t){return t=Yo({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Oa(e,t,r,n){return n!==null&&Ic(n),Ns(t,e.child,null,r),e=Kc(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function S0(e,t,r,n,s,i,a){if(r)return t.flags&256?(t.flags&=-257,n=Il(Error($(422))),Oa(e,t,a,n)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=n.fallback,s=t.mode,n=Yo({mode:"visible",children:n.children},s,0,null),i=Ln(i,s,a,null),i.flags|=2,n.return=t,i.return=t,n.sibling=i,t.child=n,t.mode&1&&Ns(t,e.child,null,a),t.child.memoizedState=Lu(a),t.memoizedState=Au,i);if(!(t.mode&1))return Oa(e,t,a,null);if(s.data==="$!"){if(n=s.nextSibling&&s.nextSibling.dataset,n)var l=n.dgst;return n=l,i=Error($(419)),n=Il(i,n,void 0),Oa(e,t,a,n)}if(l=(a&e.childLanes)!==0,bt||l){if(n=nt,n!==null){switch(a&-a){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(n.suspendedLanes|a)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,Tr(e,s),ir(n,e,s,-1))}return Zc(),n=Il(Error($(421))),Oa(e,t,a,n)}return s.data==="$?"?(t.flags|=128,t.child=e.child,t=$0.bind(null,e),s._reactRetry=t,null):(e=i.treeContext,Ot=Zr(s.nextSibling),Rt=t,Re=!0,nr=null,e!==null&&(Ut[Ft++]=Sr,Ut[Ft++]=kr,Ut[Ft++]=$n,Sr=e.id,kr=e.overflow,$n=t),t=Kc(t,n.children),t.flags|=4096,t)}function wh(e,t,r){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),Cu(e.return,t,r)}function Al(e,t,r,n,s){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:s}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=n,i.tail=r,i.tailMode=s)}function Im(e,t,r){var n=t.pendingProps,s=n.revealOrder,i=n.tail;if(ft(e,t,n.children,r),n=De.current,n&2)n=n&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&wh(e,r,t);else if(e.tag===19)wh(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(Ne(De,n),!(t.mode&1))t.memoizedState=null;else switch(s){case"forwards":for(r=t.child,s=null;r!==null;)e=r.alternate,e!==null&&_o(e)===null&&(s=r),r=r.sibling;r=s,r===null?(s=t.child,t.child=null):(s=r.sibling,r.sibling=null),Al(t,!1,s,r,i);break;case"backwards":for(r=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&_o(e)===null){t.child=s;break}e=s.sibling,s.sibling=r,r=s,s=e}Al(t,!0,r,null,i);break;case"together":Al(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Za(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Or(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),Un|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error($(153));if(t.child!==null){for(e=t.child,r=nn(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=nn(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function k0(e,t,r){switch(t.tag){case 3:Om(t),Es();break;case 5:im(t);break;case 1:St(t.type)&&mo(t);break;case 4:Uc(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,s=t.memoizedProps.value;Ne(yo,n._currentValue),n._currentValue=s;break;case 13:if(n=t.memoizedState,n!==null)return n.dehydrated!==null?(Ne(De,De.current&1),t.flags|=128,null):r&t.child.childLanes?Rm(e,t,r):(Ne(De,De.current&1),e=Or(e,t,r),e!==null?e.sibling:null);Ne(De,De.current&1);break;case 19:if(n=(r&t.childLanes)!==0,e.flags&128){if(n)return Im(e,t,r);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Ne(De,De.current),n)break;return null;case 22:case 23:return t.lanes=0,Pm(e,t,r)}return Or(e,t,r)}var Am,Du,Lm,Dm;Am=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};Du=function(){};Lm=function(e,t,r,n){var s=e.memoizedProps;if(s!==n){e=t.stateNode,Tn(mr.current);var i=null;switch(r){case"input":s=su(e,s),n=su(e,n),i=[];break;case"select":s=Me({},s,{value:void 0}),n=Me({},n,{value:void 0}),i=[];break;case"textarea":s=ou(e,s),n=ou(e,n),i=[];break;default:typeof s.onClick!="function"&&typeof n.onClick=="function"&&(e.onclick=fo)}uu(r,n);var a;r=null;for(c in s)if(!n.hasOwnProperty(c)&&s.hasOwnProperty(c)&&s[c]!=null)if(c==="style"){var l=s[c];for(a in l)l.hasOwnProperty(a)&&(r||(r={}),r[a]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Ri.hasOwnProperty(c)?i||(i=[]):(i=i||[]).push(c,null));for(c in n){var u=n[c];if(l=s!=null?s[c]:void 0,n.hasOwnProperty(c)&&u!==l&&(u!=null||l!=null))if(c==="style")if(l){for(a in l)!l.hasOwnProperty(a)||u&&u.hasOwnProperty(a)||(r||(r={}),r[a]="");for(a in u)u.hasOwnProperty(a)&&l[a]!==u[a]&&(r||(r={}),r[a]=u[a])}else r||(i||(i=[]),i.push(c,r)),r=u;else c==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,l=l?l.__html:void 0,u!=null&&l!==u&&(i=i||[]).push(c,u)):c==="children"?typeof u!="string"&&typeof u!="number"||(i=i||[]).push(c,""+u):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Ri.hasOwnProperty(c)?(u!=null&&c==="onScroll"&&Ce("scroll",e),i||l===u||(i=[])):(i=i||[]).push(c,u))}r&&(i=i||[]).push("style",r);var c=i;(t.updateQueue=c)&&(t.flags|=4)}};Dm=function(e,t,r,n){r!==n&&(t.flags|=4)};function li(e,t){if(!Re)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function ct(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,n=0;if(t)for(var s=e.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags&14680064,n|=s.flags&14680064,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags,n|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}function E0(e,t,r){var n=t.pendingProps;switch(Rc(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ct(t),null;case 1:return St(t.type)&&po(),ct(t),null;case 3:return n=t.stateNode,Cs(),Pe(jt),Pe(ht),zc(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(Pa(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,nr!==null&&(Wu(nr),nr=null))),Du(e,t),ct(t),null;case 5:Fc(t);var s=Tn(Wi.current);if(r=t.type,e!==null&&t.stateNode!=null)Lm(e,t,r,n,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(t.stateNode===null)throw Error($(166));return ct(t),null}if(e=Tn(mr.current),Pa(t)){n=t.stateNode,r=t.type;var i=t.memoizedProps;switch(n[fr]=t,n[Bi]=i,e=(t.mode&1)!==0,r){case"dialog":Ce("cancel",n),Ce("close",n);break;case"iframe":case"object":case"embed":Ce("load",n);break;case"video":case"audio":for(s=0;s<vi.length;s++)Ce(vi[s],n);break;case"source":Ce("error",n);break;case"img":case"image":case"link":Ce("error",n),Ce("load",n);break;case"details":Ce("toggle",n);break;case"input":Cd(n,i),Ce("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!i.multiple},Ce("invalid",n);break;case"textarea":Td(n,i),Ce("invalid",n)}uu(r,i),s=null;for(var a in i)if(i.hasOwnProperty(a)){var l=i[a];a==="children"?typeof l=="string"?n.textContent!==l&&(i.suppressHydrationWarning!==!0&&Ca(n.textContent,l,e),s=["children",l]):typeof l=="number"&&n.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&Ca(n.textContent,l,e),s=["children",""+l]):Ri.hasOwnProperty(a)&&l!=null&&a==="onScroll"&&Ce("scroll",n)}switch(r){case"input":xa(n),Pd(n,i,!0);break;case"textarea":xa(n),Od(n);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(n.onclick=fo)}n=s,t.updateQueue=n,n!==null&&(t.flags|=4)}else{a=s.nodeType===9?s:s.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=cp(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=a.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof n.is=="string"?e=a.createElement(r,{is:n.is}):(e=a.createElement(r),r==="select"&&(a=e,n.multiple?a.multiple=!0:n.size&&(a.size=n.size))):e=a.createElementNS(e,r),e[fr]=t,e[Bi]=n,Am(e,t,!1,!1),t.stateNode=e;e:{switch(a=cu(r,n),r){case"dialog":Ce("cancel",e),Ce("close",e),s=n;break;case"iframe":case"object":case"embed":Ce("load",e),s=n;break;case"video":case"audio":for(s=0;s<vi.length;s++)Ce(vi[s],e);s=n;break;case"source":Ce("error",e),s=n;break;case"img":case"image":case"link":Ce("error",e),Ce("load",e),s=n;break;case"details":Ce("toggle",e),s=n;break;case"input":Cd(e,n),s=su(e,n),Ce("invalid",e);break;case"option":s=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},s=Me({},n,{value:void 0}),Ce("invalid",e);break;case"textarea":Td(e,n),s=ou(e,n),Ce("invalid",e);break;default:s=n}uu(r,s),l=s;for(i in l)if(l.hasOwnProperty(i)){var u=l[i];i==="style"?fp(e,u):i==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&dp(e,u)):i==="children"?typeof u=="string"?(r!=="textarea"||u!=="")&&Ii(e,u):typeof u=="number"&&Ii(e,""+u):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Ri.hasOwnProperty(i)?u!=null&&i==="onScroll"&&Ce("scroll",e):u!=null&&vc(e,i,u,a))}switch(r){case"input":xa(e),Pd(e,n,!1);break;case"textarea":xa(e),Od(e);break;case"option":n.value!=null&&e.setAttribute("value",""+sn(n.value));break;case"select":e.multiple=!!n.multiple,i=n.value,i!=null?vs(e,!!n.multiple,i,!1):n.defaultValue!=null&&vs(e,!!n.multiple,n.defaultValue,!0);break;default:typeof s.onClick=="function"&&(e.onclick=fo)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return ct(t),null;case 6:if(e&&t.stateNode!=null)Dm(e,t,e.memoizedProps,n);else{if(typeof n!="string"&&t.stateNode===null)throw Error($(166));if(r=Tn(Wi.current),Tn(mr.current),Pa(t)){if(n=t.stateNode,r=t.memoizedProps,n[fr]=t,(i=n.nodeValue!==r)&&(e=Rt,e!==null))switch(e.tag){case 3:Ca(n.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Ca(n.nodeValue,r,(e.mode&1)!==0)}i&&(t.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[fr]=t,t.stateNode=n}return ct(t),null;case 13:if(Pe(De),n=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Re&&Ot!==null&&t.mode&1&&!(t.flags&128))em(),Es(),t.flags|=98560,i=!1;else if(i=Pa(t),n!==null&&n.dehydrated!==null){if(e===null){if(!i)throw Error($(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error($(317));i[fr]=t}else Es(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;ct(t),i=!1}else nr!==null&&(Wu(nr),nr=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(n=n!==null,n!==(e!==null&&e.memoizedState!==null)&&n&&(t.child.flags|=8192,t.mode&1&&(e===null||De.current&1?et===0&&(et=3):Zc())),t.updateQueue!==null&&(t.flags|=4),ct(t),null);case 4:return Cs(),Du(e,t),e===null&&Fi(t.stateNode.containerInfo),ct(t),null;case 10:return Dc(t.type._context),ct(t),null;case 17:return St(t.type)&&po(),ct(t),null;case 19:if(Pe(De),i=t.memoizedState,i===null)return ct(t),null;if(n=(t.flags&128)!==0,a=i.rendering,a===null)if(n)li(i,!1);else{if(et!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(a=_o(e),a!==null){for(t.flags|=128,li(i,!1),n=a.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=r,r=t.child;r!==null;)i=r,e=n,i.flags&=14680066,a=i.alternate,a===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=a.childLanes,i.lanes=a.lanes,i.child=a.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=a.memoizedProps,i.memoizedState=a.memoizedState,i.updateQueue=a.updateQueue,i.type=a.type,e=a.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return Ne(De,De.current&1|2),t.child}e=e.sibling}i.tail!==null&&We()>Ts&&(t.flags|=128,n=!0,li(i,!1),t.lanes=4194304)}else{if(!n)if(e=_o(a),e!==null){if(t.flags|=128,n=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),li(i,!0),i.tail===null&&i.tailMode==="hidden"&&!a.alternate&&!Re)return ct(t),null}else 2*We()-i.renderingStartTime>Ts&&r!==1073741824&&(t.flags|=128,n=!0,li(i,!1),t.lanes=4194304);i.isBackwards?(a.sibling=t.child,t.child=a):(r=i.last,r!==null?r.sibling=a:t.child=a,i.last=a)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=We(),t.sibling=null,r=De.current,Ne(De,n?r&1|2:r&1),t):(ct(t),null);case 22:case 23:return Xc(),n=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==n&&(t.flags|=8192),n&&t.mode&1?Nt&1073741824&&(ct(t),t.subtreeFlags&6&&(t.flags|=8192)):ct(t),null;case 24:return null;case 25:return null}throw Error($(156,t.tag))}function N0(e,t){switch(Rc(t),t.tag){case 1:return St(t.type)&&po(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Cs(),Pe(jt),Pe(ht),zc(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Fc(t),null;case 13:if(Pe(De),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error($(340));Es()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Pe(De),null;case 4:return Cs(),null;case 10:return Dc(t.type._context),null;case 22:case 23:return Xc(),null;case 24:return null;default:return null}}var Ra=!1,dt=!1,C0=typeof WeakSet=="function"?WeakSet:Set,B=null;function ms(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){Be(e,t,n)}else r.current=null}function $u(e,t,r){try{r()}catch(n){Be(e,t,n)}}var xh=!1;function P0(e,t){if(xu=uo,e=zp(),Tc(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var s=n.anchorOffset,i=n.focusNode;n=n.focusOffset;try{r.nodeType,i.nodeType}catch{r=null;break e}var a=0,l=-1,u=-1,c=0,d=0,h=e,f=null;t:for(;;){for(var m;h!==r||s!==0&&h.nodeType!==3||(l=a+s),h!==i||n!==0&&h.nodeType!==3||(u=a+n),h.nodeType===3&&(a+=h.nodeValue.length),(m=h.firstChild)!==null;)f=h,h=m;for(;;){if(h===e)break t;if(f===r&&++c===s&&(l=a),f===i&&++d===n&&(u=a),(m=h.nextSibling)!==null)break;h=f,f=h.parentNode}h=m}r=l===-1||u===-1?null:{start:l,end:u}}else r=null}r=r||{start:0,end:0}}else r=null;for(_u={focusedElem:e,selectionRange:r},uo=!1,B=t;B!==null;)if(t=B,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,B=e;else for(;B!==null;){t=B;try{var x=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(x!==null){var g=x.memoizedProps,_=x.memoizedState,v=t.stateNode,p=v.getSnapshotBeforeUpdate(t.elementType===t.type?g:Xt(t.type,g),_);v.__reactInternalSnapshotBeforeUpdate=p}break;case 3:var y=t.stateNode.containerInfo;y.nodeType===1?y.textContent="":y.nodeType===9&&y.documentElement&&y.removeChild(y.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error($(163))}}catch(j){Be(t,t.return,j)}if(e=t.sibling,e!==null){e.return=t.return,B=e;break}B=t.return}return x=xh,xh=!1,x}function Ei(e,t,r){var n=t.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var s=n=n.next;do{if((s.tag&e)===e){var i=s.destroy;s.destroy=void 0,i!==void 0&&$u(t,r,i)}s=s.next}while(s!==n)}}function Jo(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var n=r.create;r.destroy=n()}r=r.next}while(r!==t)}}function Mu(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function $m(e){var t=e.alternate;t!==null&&(e.alternate=null,$m(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[fr],delete t[Bi],delete t[Su],delete t[d0],delete t[h0])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Mm(e){return e.tag===5||e.tag===3||e.tag===4}function _h(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Mm(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Uu(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=fo));else if(n!==4&&(e=e.child,e!==null))for(Uu(e,t,r),e=e.sibling;e!==null;)Uu(e,t,r),e=e.sibling}function Fu(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(n!==4&&(e=e.child,e!==null))for(Fu(e,t,r),e=e.sibling;e!==null;)Fu(e,t,r),e=e.sibling}var it=null,er=!1;function $r(e,t,r){for(r=r.child;r!==null;)Um(e,t,r),r=r.sibling}function Um(e,t,r){if(pr&&typeof pr.onCommitFiberUnmount=="function")try{pr.onCommitFiberUnmount(zo,r)}catch{}switch(r.tag){case 5:dt||ms(r,t);case 6:var n=it,s=er;it=null,$r(e,t,r),it=n,er=s,it!==null&&(er?(e=it,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):it.removeChild(r.stateNode));break;case 18:it!==null&&(er?(e=it,r=r.stateNode,e.nodeType===8?Nl(e.parentNode,r):e.nodeType===1&&Nl(e,r),$i(e)):Nl(it,r.stateNode));break;case 4:n=it,s=er,it=r.stateNode.containerInfo,er=!0,$r(e,t,r),it=n,er=s;break;case 0:case 11:case 14:case 15:if(!dt&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){s=n=n.next;do{var i=s,a=i.destroy;i=i.tag,a!==void 0&&(i&2||i&4)&&$u(r,t,a),s=s.next}while(s!==n)}$r(e,t,r);break;case 1:if(!dt&&(ms(r,t),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(l){Be(r,t,l)}$r(e,t,r);break;case 21:$r(e,t,r);break;case 22:r.mode&1?(dt=(n=dt)||r.memoizedState!==null,$r(e,t,r),dt=n):$r(e,t,r);break;default:$r(e,t,r)}}function bh(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new C0),t.forEach(function(n){var s=M0.bind(null,e,n);r.has(n)||(r.add(n),n.then(s,s))})}}function Jt(e,t){var r=t.deletions;if(r!==null)for(var n=0;n<r.length;n++){var s=r[n];try{var i=e,a=t,l=a;e:for(;l!==null;){switch(l.tag){case 5:it=l.stateNode,er=!1;break e;case 3:it=l.stateNode.containerInfo,er=!0;break e;case 4:it=l.stateNode.containerInfo,er=!0;break e}l=l.return}if(it===null)throw Error($(160));Um(i,a,s),it=null,er=!1;var u=s.alternate;u!==null&&(u.return=null),s.return=null}catch(c){Be(s,t,c)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Fm(t,e),t=t.sibling}function Fm(e,t){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Jt(t,e),cr(e),n&4){try{Ei(3,e,e.return),Jo(3,e)}catch(g){Be(e,e.return,g)}try{Ei(5,e,e.return)}catch(g){Be(e,e.return,g)}}break;case 1:Jt(t,e),cr(e),n&512&&r!==null&&ms(r,r.return);break;case 5:if(Jt(t,e),cr(e),n&512&&r!==null&&ms(r,r.return),e.flags&32){var s=e.stateNode;try{Ii(s,"")}catch(g){Be(e,e.return,g)}}if(n&4&&(s=e.stateNode,s!=null)){var i=e.memoizedProps,a=r!==null?r.memoizedProps:i,l=e.type,u=e.updateQueue;if(e.updateQueue=null,u!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&lp(s,i),cu(l,a);var c=cu(l,i);for(a=0;a<u.length;a+=2){var d=u[a],h=u[a+1];d==="style"?fp(s,h):d==="dangerouslySetInnerHTML"?dp(s,h):d==="children"?Ii(s,h):vc(s,d,h,c)}switch(l){case"input":iu(s,i);break;case"textarea":up(s,i);break;case"select":var f=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var m=i.value;m!=null?vs(s,!!i.multiple,m,!1):f!==!!i.multiple&&(i.defaultValue!=null?vs(s,!!i.multiple,i.defaultValue,!0):vs(s,!!i.multiple,i.multiple?[]:"",!1))}s[Bi]=i}catch(g){Be(e,e.return,g)}}break;case 6:if(Jt(t,e),cr(e),n&4){if(e.stateNode===null)throw Error($(162));s=e.stateNode,i=e.memoizedProps;try{s.nodeValue=i}catch(g){Be(e,e.return,g)}}break;case 3:if(Jt(t,e),cr(e),n&4&&r!==null&&r.memoizedState.isDehydrated)try{$i(t.containerInfo)}catch(g){Be(e,e.return,g)}break;case 4:Jt(t,e),cr(e);break;case 13:Jt(t,e),cr(e),s=e.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(Qc=We())),n&4&&bh(e);break;case 22:if(d=r!==null&&r.memoizedState!==null,e.mode&1?(dt=(c=dt)||d,Jt(t,e),dt=c):Jt(t,e),cr(e),n&8192){if(c=e.memoizedState!==null,(e.stateNode.isHidden=c)&&!d&&e.mode&1)for(B=e,d=e.child;d!==null;){for(h=B=d;B!==null;){switch(f=B,m=f.child,f.tag){case 0:case 11:case 14:case 15:Ei(4,f,f.return);break;case 1:ms(f,f.return);var x=f.stateNode;if(typeof x.componentWillUnmount=="function"){n=f,r=f.return;try{t=n,x.props=t.memoizedProps,x.state=t.memoizedState,x.componentWillUnmount()}catch(g){Be(n,r,g)}}break;case 5:ms(f,f.return);break;case 22:if(f.memoizedState!==null){Sh(h);continue}}m!==null?(m.return=f,B=m):Sh(h)}d=d.sibling}e:for(d=null,h=e;;){if(h.tag===5){if(d===null){d=h;try{s=h.stateNode,c?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=h.stateNode,u=h.memoizedProps.style,a=u!=null&&u.hasOwnProperty("display")?u.display:null,l.style.display=hp("display",a))}catch(g){Be(e,e.return,g)}}}else if(h.tag===6){if(d===null)try{h.stateNode.nodeValue=c?"":h.memoizedProps}catch(g){Be(e,e.return,g)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===e)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;h.sibling===null;){if(h.return===null||h.return===e)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:Jt(t,e),cr(e),n&4&&bh(e);break;case 21:break;default:Jt(t,e),cr(e)}}function cr(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(Mm(r)){var n=r;break e}r=r.return}throw Error($(160))}switch(n.tag){case 5:var s=n.stateNode;n.flags&32&&(Ii(s,""),n.flags&=-33);var i=_h(e);Fu(e,i,s);break;case 3:case 4:var a=n.stateNode.containerInfo,l=_h(e);Uu(e,l,a);break;default:throw Error($(161))}}catch(u){Be(e,e.return,u)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function T0(e,t,r){B=e,zm(e)}function zm(e,t,r){for(var n=(e.mode&1)!==0;B!==null;){var s=B,i=s.child;if(s.tag===22&&n){var a=s.memoizedState!==null||Ra;if(!a){var l=s.alternate,u=l!==null&&l.memoizedState!==null||dt;l=Ra;var c=dt;if(Ra=a,(dt=u)&&!c)for(B=s;B!==null;)a=B,u=a.child,a.tag===22&&a.memoizedState!==null?kh(s):u!==null?(u.return=a,B=u):kh(s);for(;i!==null;)B=i,zm(i),i=i.sibling;B=s,Ra=l,dt=c}jh(e)}else s.subtreeFlags&8772&&i!==null?(i.return=s,B=i):jh(e)}}function jh(e){for(;B!==null;){var t=B;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:dt||Jo(5,t);break;case 1:var n=t.stateNode;if(t.flags&4&&!dt)if(r===null)n.componentDidMount();else{var s=t.elementType===t.type?r.memoizedProps:Xt(t.type,r.memoizedProps);n.componentDidUpdate(s,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&oh(t,i,n);break;case 3:var a=t.updateQueue;if(a!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}oh(t,a,r)}break;case 5:var l=t.stateNode;if(r===null&&t.flags&4){r=l;var u=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&r.focus();break;case"img":u.src&&(r.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var c=t.alternate;if(c!==null){var d=c.memoizedState;if(d!==null){var h=d.dehydrated;h!==null&&$i(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error($(163))}dt||t.flags&512&&Mu(t)}catch(f){Be(t,t.return,f)}}if(t===e){B=null;break}if(r=t.sibling,r!==null){r.return=t.return,B=r;break}B=t.return}}function Sh(e){for(;B!==null;){var t=B;if(t===e){B=null;break}var r=t.sibling;if(r!==null){r.return=t.return,B=r;break}B=t.return}}function kh(e){for(;B!==null;){var t=B;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{Jo(4,t)}catch(u){Be(t,r,u)}break;case 1:var n=t.stateNode;if(typeof n.componentDidMount=="function"){var s=t.return;try{n.componentDidMount()}catch(u){Be(t,s,u)}}var i=t.return;try{Mu(t)}catch(u){Be(t,i,u)}break;case 5:var a=t.return;try{Mu(t)}catch(u){Be(t,a,u)}}}catch(u){Be(t,t.return,u)}if(t===e){B=null;break}var l=t.sibling;if(l!==null){l.return=t.return,B=l;break}B=t.return}}var O0=Math.ceil,So=Ir.ReactCurrentDispatcher,Gc=Ir.ReactCurrentOwner,Bt=Ir.ReactCurrentBatchConfig,ge=0,nt=null,Qe=null,at=0,Nt=0,gs=un(0),et=0,Gi=null,Un=0,Qo=0,Jc=0,Ni=null,xt=null,Qc=0,Ts=1/0,_r=null,ko=!1,zu=null,tn=null,Ia=!1,Gr=null,Eo=0,Ci=0,Bu=null,eo=-1,to=0;function pt(){return ge&6?We():eo!==-1?eo:eo=We()}function rn(e){return e.mode&1?ge&2&&at!==0?at&-at:p0.transition!==null?(to===0&&(to=kp()),to):(e=be,e!==0||(e=window.event,e=e===void 0?16:Rp(e.type)),e):1}function ir(e,t,r,n){if(50<Ci)throw Ci=0,Bu=null,Error($(185));ra(e,r,n),(!(ge&2)||e!==nt)&&(e===nt&&(!(ge&2)&&(Qo|=r),et===4&&qr(e,at)),kt(e,n),r===1&&ge===0&&!(t.mode&1)&&(Ts=We()+500,Ho&&cn()))}function kt(e,t){var r=e.callbackNode;py(e,t);var n=lo(e,e===nt?at:0);if(n===0)r!==null&&Ad(r),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(r!=null&&Ad(r),t===1)e.tag===0?f0(Eh.bind(null,e)):Yp(Eh.bind(null,e)),u0(function(){!(ge&6)&&cn()}),r=null;else{switch(Ep(n)){case 1:r=bc;break;case 4:r=jp;break;case 16:r=oo;break;case 536870912:r=Sp;break;default:r=oo}r=Jm(r,Bm.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function Bm(e,t){if(eo=-1,to=0,ge&6)throw Error($(327));var r=e.callbackNode;if(bs()&&e.callbackNode!==r)return null;var n=lo(e,e===nt?at:0);if(n===0)return null;if(n&30||n&e.expiredLanes||t)t=No(e,n);else{t=n;var s=ge;ge|=2;var i=Wm();(nt!==e||at!==t)&&(_r=null,Ts=We()+500,An(e,t));do try{A0();break}catch(l){Vm(e,l)}while(!0);Lc(),So.current=i,ge=s,Qe!==null?t=0:(nt=null,at=0,t=et)}if(t!==0){if(t===2&&(s=mu(e),s!==0&&(n=s,t=Vu(e,s))),t===1)throw r=Gi,An(e,0),qr(e,n),kt(e,We()),r;if(t===6)qr(e,n);else{if(s=e.current.alternate,!(n&30)&&!R0(s)&&(t=No(e,n),t===2&&(i=mu(e),i!==0&&(n=i,t=Vu(e,i))),t===1))throw r=Gi,An(e,0),qr(e,n),kt(e,We()),r;switch(e.finishedWork=s,e.finishedLanes=n,t){case 0:case 1:throw Error($(345));case 2:_n(e,xt,_r);break;case 3:if(qr(e,n),(n&130023424)===n&&(t=Qc+500-We(),10<t)){if(lo(e,0)!==0)break;if(s=e.suspendedLanes,(s&n)!==n){pt(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=ju(_n.bind(null,e,xt,_r),t);break}_n(e,xt,_r);break;case 4:if(qr(e,n),(n&4194240)===n)break;for(t=e.eventTimes,s=-1;0<n;){var a=31-sr(n);i=1<<a,a=t[a],a>s&&(s=a),n&=~i}if(n=s,n=We()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*O0(n/1960))-n,10<n){e.timeoutHandle=ju(_n.bind(null,e,xt,_r),n);break}_n(e,xt,_r);break;case 5:_n(e,xt,_r);break;default:throw Error($(329))}}}return kt(e,We()),e.callbackNode===r?Bm.bind(null,e):null}function Vu(e,t){var r=Ni;return e.current.memoizedState.isDehydrated&&(An(e,t).flags|=256),e=No(e,t),e!==2&&(t=xt,xt=r,t!==null&&Wu(t)),e}function Wu(e){xt===null?xt=e:xt.push.apply(xt,e)}function R0(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var s=r[n],i=s.getSnapshot;s=s.value;try{if(!ar(i(),s))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function qr(e,t){for(t&=~Jc,t&=~Qo,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-sr(t),n=1<<r;e[r]=-1,t&=~n}}function Eh(e){if(ge&6)throw Error($(327));bs();var t=lo(e,0);if(!(t&1))return kt(e,We()),null;var r=No(e,t);if(e.tag!==0&&r===2){var n=mu(e);n!==0&&(t=n,r=Vu(e,n))}if(r===1)throw r=Gi,An(e,0),qr(e,t),kt(e,We()),r;if(r===6)throw Error($(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,_n(e,xt,_r),kt(e,We()),null}function Yc(e,t){var r=ge;ge|=1;try{return e(t)}finally{ge=r,ge===0&&(Ts=We()+500,Ho&&cn())}}function Fn(e){Gr!==null&&Gr.tag===0&&!(ge&6)&&bs();var t=ge;ge|=1;var r=Bt.transition,n=be;try{if(Bt.transition=null,be=1,e)return e()}finally{be=n,Bt.transition=r,ge=t,!(ge&6)&&cn()}}function Xc(){Nt=gs.current,Pe(gs)}function An(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,l0(r)),Qe!==null)for(r=Qe.return;r!==null;){var n=r;switch(Rc(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&po();break;case 3:Cs(),Pe(jt),Pe(ht),zc();break;case 5:Fc(n);break;case 4:Cs();break;case 13:Pe(De);break;case 19:Pe(De);break;case 10:Dc(n.type._context);break;case 22:case 23:Xc()}r=r.return}if(nt=e,Qe=e=nn(e.current,null),at=Nt=t,et=0,Gi=null,Jc=Qo=Un=0,xt=Ni=null,Pn!==null){for(t=0;t<Pn.length;t++)if(r=Pn[t],n=r.interleaved,n!==null){r.interleaved=null;var s=n.next,i=r.pending;if(i!==null){var a=i.next;i.next=s,n.next=a}r.pending=n}Pn=null}return e}function Vm(e,t){do{var r=Qe;try{if(Lc(),Ya.current=jo,bo){for(var n=$e.memoizedState;n!==null;){var s=n.queue;s!==null&&(s.pending=null),n=n.next}bo=!1}if(Mn=0,rt=Ze=$e=null,ki=!1,qi=0,Gc.current=null,r===null||r.return===null){et=1,Gi=t,Qe=null;break}e:{var i=e,a=r.return,l=r,u=t;if(t=at,l.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var c=u,d=l,h=d.tag;if(!(d.mode&1)&&(h===0||h===11||h===15)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var m=fh(a);if(m!==null){m.flags&=-257,ph(m,a,l,i,t),m.mode&1&&hh(i,c,t),t=m,u=c;var x=t.updateQueue;if(x===null){var g=new Set;g.add(u),t.updateQueue=g}else x.add(u);break e}else{if(!(t&1)){hh(i,c,t),Zc();break e}u=Error($(426))}}else if(Re&&l.mode&1){var _=fh(a);if(_!==null){!(_.flags&65536)&&(_.flags|=256),ph(_,a,l,i,t),Ic(Ps(u,l));break e}}i=u=Ps(u,l),et!==4&&(et=2),Ni===null?Ni=[i]:Ni.push(i),i=a;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var v=Em(i,u,t);ah(i,v);break e;case 1:l=u;var p=i.type,y=i.stateNode;if(!(i.flags&128)&&(typeof p.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(tn===null||!tn.has(y)))){i.flags|=65536,t&=-t,i.lanes|=t;var j=Nm(i,l,t);ah(i,j);break e}}i=i.return}while(i!==null)}Hm(r)}catch(N){t=N,Qe===r&&r!==null&&(Qe=r=r.return);continue}break}while(!0)}function Wm(){var e=So.current;return So.current=jo,e===null?jo:e}function Zc(){(et===0||et===3||et===2)&&(et=4),nt===null||!(Un&268435455)&&!(Qo&268435455)||qr(nt,at)}function No(e,t){var r=ge;ge|=2;var n=Wm();(nt!==e||at!==t)&&(_r=null,An(e,t));do try{I0();break}catch(s){Vm(e,s)}while(!0);if(Lc(),ge=r,So.current=n,Qe!==null)throw Error($(261));return nt=null,at=0,et}function I0(){for(;Qe!==null;)qm(Qe)}function A0(){for(;Qe!==null&&!iy();)qm(Qe)}function qm(e){var t=Gm(e.alternate,e,Nt);e.memoizedProps=e.pendingProps,t===null?Hm(e):Qe=t,Gc.current=null}function Hm(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=N0(r,t),r!==null){r.flags&=32767,Qe=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{et=6,Qe=null;return}}else if(r=E0(r,t,Nt),r!==null){Qe=r;return}if(t=t.sibling,t!==null){Qe=t;return}Qe=t=e}while(t!==null);et===0&&(et=5)}function _n(e,t,r){var n=be,s=Bt.transition;try{Bt.transition=null,be=1,L0(e,t,r,n)}finally{Bt.transition=s,be=n}return null}function L0(e,t,r,n){do bs();while(Gr!==null);if(ge&6)throw Error($(327));r=e.finishedWork;var s=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error($(177));e.callbackNode=null,e.callbackPriority=0;var i=r.lanes|r.childLanes;if(my(e,i),e===nt&&(Qe=nt=null,at=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||Ia||(Ia=!0,Jm(oo,function(){return bs(),null})),i=(r.flags&15990)!==0,r.subtreeFlags&15990||i){i=Bt.transition,Bt.transition=null;var a=be;be=1;var l=ge;ge|=4,Gc.current=null,P0(e,r),Fm(r,e),t0(_u),uo=!!xu,_u=xu=null,e.current=r,T0(r),ay(),ge=l,be=a,Bt.transition=i}else e.current=r;if(Ia&&(Ia=!1,Gr=e,Eo=s),i=e.pendingLanes,i===0&&(tn=null),uy(r.stateNode),kt(e,We()),t!==null)for(n=e.onRecoverableError,r=0;r<t.length;r++)s=t[r],n(s.value,{componentStack:s.stack,digest:s.digest});if(ko)throw ko=!1,e=zu,zu=null,e;return Eo&1&&e.tag!==0&&bs(),i=e.pendingLanes,i&1?e===Bu?Ci++:(Ci=0,Bu=e):Ci=0,cn(),null}function bs(){if(Gr!==null){var e=Ep(Eo),t=Bt.transition,r=be;try{if(Bt.transition=null,be=16>e?16:e,Gr===null)var n=!1;else{if(e=Gr,Gr=null,Eo=0,ge&6)throw Error($(331));var s=ge;for(ge|=4,B=e.current;B!==null;){var i=B,a=i.child;if(B.flags&16){var l=i.deletions;if(l!==null){for(var u=0;u<l.length;u++){var c=l[u];for(B=c;B!==null;){var d=B;switch(d.tag){case 0:case 11:case 15:Ei(8,d,i)}var h=d.child;if(h!==null)h.return=d,B=h;else for(;B!==null;){d=B;var f=d.sibling,m=d.return;if($m(d),d===c){B=null;break}if(f!==null){f.return=m,B=f;break}B=m}}}var x=i.alternate;if(x!==null){var g=x.child;if(g!==null){x.child=null;do{var _=g.sibling;g.sibling=null,g=_}while(g!==null)}}B=i}}if(i.subtreeFlags&2064&&a!==null)a.return=i,B=a;else e:for(;B!==null;){if(i=B,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Ei(9,i,i.return)}var v=i.sibling;if(v!==null){v.return=i.return,B=v;break e}B=i.return}}var p=e.current;for(B=p;B!==null;){a=B;var y=a.child;if(a.subtreeFlags&2064&&y!==null)y.return=a,B=y;else e:for(a=p;B!==null;){if(l=B,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Jo(9,l)}}catch(N){Be(l,l.return,N)}if(l===a){B=null;break e}var j=l.sibling;if(j!==null){j.return=l.return,B=j;break e}B=l.return}}if(ge=s,cn(),pr&&typeof pr.onPostCommitFiberRoot=="function")try{pr.onPostCommitFiberRoot(zo,e)}catch{}n=!0}return n}finally{be=r,Bt.transition=t}}return!1}function Nh(e,t,r){t=Ps(r,t),t=Em(e,t,1),e=en(e,t,1),t=pt(),e!==null&&(ra(e,1,t),kt(e,t))}function Be(e,t,r){if(e.tag===3)Nh(e,e,r);else for(;t!==null;){if(t.tag===3){Nh(t,e,r);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(tn===null||!tn.has(n))){e=Ps(r,e),e=Nm(t,e,1),t=en(t,e,1),e=pt(),t!==null&&(ra(t,1,e),kt(t,e));break}}t=t.return}}function D0(e,t,r){var n=e.pingCache;n!==null&&n.delete(t),t=pt(),e.pingedLanes|=e.suspendedLanes&r,nt===e&&(at&r)===r&&(et===4||et===3&&(at&130023424)===at&&500>We()-Qc?An(e,0):Jc|=r),kt(e,t)}function Km(e,t){t===0&&(e.mode&1?(t=ja,ja<<=1,!(ja&130023424)&&(ja=4194304)):t=1);var r=pt();e=Tr(e,t),e!==null&&(ra(e,t,r),kt(e,r))}function $0(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),Km(e,r)}function M0(e,t){var r=0;switch(e.tag){case 13:var n=e.stateNode,s=e.memoizedState;s!==null&&(r=s.retryLane);break;case 19:n=e.stateNode;break;default:throw Error($(314))}n!==null&&n.delete(t),Km(e,r)}var Gm;Gm=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||jt.current)bt=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return bt=!1,k0(e,t,r);bt=!!(e.flags&131072)}else bt=!1,Re&&t.flags&1048576&&Xp(t,vo,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;Za(e,t),e=t.pendingProps;var s=ks(t,ht.current);_s(t,r),s=Vc(null,t,n,e,s,r);var i=Wc();return t.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,St(n)?(i=!0,mo(t)):i=!1,t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Mc(t),s.updater=Go,t.stateNode=s,s._reactInternals=t,Tu(t,n,e,r),t=Iu(null,t,n,!0,i,r)):(t.tag=0,Re&&i&&Oc(t),ft(null,t,s,r),t=t.child),t;case 16:n=t.elementType;e:{switch(Za(e,t),e=t.pendingProps,s=n._init,n=s(n._payload),t.type=n,s=t.tag=F0(n),e=Xt(n,e),s){case 0:t=Ru(null,t,n,e,r);break e;case 1:t=vh(null,t,n,e,r);break e;case 11:t=mh(null,t,n,e,r);break e;case 14:t=gh(null,t,n,Xt(n.type,e),r);break e}throw Error($(306,n,""))}return t;case 0:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:Xt(n,s),Ru(e,t,n,s,r);case 1:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:Xt(n,s),vh(e,t,n,s,r);case 3:e:{if(Om(t),e===null)throw Error($(387));n=t.pendingProps,i=t.memoizedState,s=i.element,sm(e,t),xo(t,n,null,r);var a=t.memoizedState;if(n=a.element,i.isDehydrated)if(i={element:n,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){s=Ps(Error($(423)),t),t=yh(e,t,n,r,s);break e}else if(n!==s){s=Ps(Error($(424)),t),t=yh(e,t,n,r,s);break e}else for(Ot=Zr(t.stateNode.containerInfo.firstChild),Rt=t,Re=!0,nr=null,r=rm(t,null,n,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Es(),n===s){t=Or(e,t,r);break e}ft(e,t,n,r)}t=t.child}return t;case 5:return im(t),e===null&&Nu(t),n=t.type,s=t.pendingProps,i=e!==null?e.memoizedProps:null,a=s.children,bu(n,s)?a=null:i!==null&&bu(n,i)&&(t.flags|=32),Tm(e,t),ft(e,t,a,r),t.child;case 6:return e===null&&Nu(t),null;case 13:return Rm(e,t,r);case 4:return Uc(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=Ns(t,null,n,r):ft(e,t,n,r),t.child;case 11:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:Xt(n,s),mh(e,t,n,s,r);case 7:return ft(e,t,t.pendingProps,r),t.child;case 8:return ft(e,t,t.pendingProps.children,r),t.child;case 12:return ft(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(n=t.type._context,s=t.pendingProps,i=t.memoizedProps,a=s.value,Ne(yo,n._currentValue),n._currentValue=a,i!==null)if(ar(i.value,a)){if(i.children===s.children&&!jt.current){t=Or(e,t,r);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var l=i.dependencies;if(l!==null){a=i.child;for(var u=l.firstContext;u!==null;){if(u.context===n){if(i.tag===1){u=Er(-1,r&-r),u.tag=2;var c=i.updateQueue;if(c!==null){c=c.shared;var d=c.pending;d===null?u.next=u:(u.next=d.next,d.next=u),c.pending=u}}i.lanes|=r,u=i.alternate,u!==null&&(u.lanes|=r),Cu(i.return,r,t),l.lanes|=r;break}u=u.next}}else if(i.tag===10)a=i.type===t.type?null:i.child;else if(i.tag===18){if(a=i.return,a===null)throw Error($(341));a.lanes|=r,l=a.alternate,l!==null&&(l.lanes|=r),Cu(a,r,t),a=i.sibling}else a=i.child;if(a!==null)a.return=i;else for(a=i;a!==null;){if(a===t){a=null;break}if(i=a.sibling,i!==null){i.return=a.return,a=i;break}a=a.return}i=a}ft(e,t,s.children,r),t=t.child}return t;case 9:return s=t.type,n=t.pendingProps.children,_s(t,r),s=Vt(s),n=n(s),t.flags|=1,ft(e,t,n,r),t.child;case 14:return n=t.type,s=Xt(n,t.pendingProps),s=Xt(n.type,s),gh(e,t,n,s,r);case 15:return Cm(e,t,t.type,t.pendingProps,r);case 17:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:Xt(n,s),Za(e,t),t.tag=1,St(n)?(e=!0,mo(t)):e=!1,_s(t,r),km(t,n,s),Tu(t,n,s,r),Iu(null,t,n,!0,e,r);case 19:return Im(e,t,r);case 22:return Pm(e,t,r)}throw Error($(156,t.tag))};function Jm(e,t){return bp(e,t)}function U0(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function zt(e,t,r,n){return new U0(e,t,r,n)}function ed(e){return e=e.prototype,!(!e||!e.isReactComponent)}function F0(e){if(typeof e=="function")return ed(e)?1:0;if(e!=null){if(e=e.$$typeof,e===wc)return 11;if(e===xc)return 14}return 2}function nn(e,t){var r=e.alternate;return r===null?(r=zt(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function ro(e,t,r,n,s,i){var a=2;if(n=e,typeof e=="function")ed(e)&&(a=1);else if(typeof e=="string")a=5;else e:switch(e){case as:return Ln(r.children,s,i,t);case yc:a=8,s|=8;break;case eu:return e=zt(12,r,t,s|2),e.elementType=eu,e.lanes=i,e;case tu:return e=zt(13,r,t,s),e.elementType=tu,e.lanes=i,e;case ru:return e=zt(19,r,t,s),e.elementType=ru,e.lanes=i,e;case ip:return Yo(r,s,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case np:a=10;break e;case sp:a=9;break e;case wc:a=11;break e;case xc:a=14;break e;case Br:a=16,n=null;break e}throw Error($(130,e==null?e:typeof e,""))}return t=zt(a,r,t,s),t.elementType=e,t.type=n,t.lanes=i,t}function Ln(e,t,r,n){return e=zt(7,e,n,t),e.lanes=r,e}function Yo(e,t,r,n){return e=zt(22,e,n,t),e.elementType=ip,e.lanes=r,e.stateNode={isHidden:!1},e}function Ll(e,t,r){return e=zt(6,e,null,t),e.lanes=r,e}function Dl(e,t,r){return t=zt(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function z0(e,t,r,n,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gl(0),this.expirationTimes=gl(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gl(0),this.identifierPrefix=n,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function td(e,t,r,n,s,i,a,l,u){return e=new z0(e,t,r,l,u),t===1?(t=1,i===!0&&(t|=8)):t=0,i=zt(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},Mc(i),e}function B0(e,t,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:is,key:n==null?null:""+n,children:e,containerInfo:t,implementation:r}}function Qm(e){if(!e)return an;e=e._reactInternals;e:{if(Vn(e)!==e||e.tag!==1)throw Error($(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(St(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error($(171))}if(e.tag===1){var r=e.type;if(St(r))return Qp(e,r,t)}return t}function Ym(e,t,r,n,s,i,a,l,u){return e=td(r,n,!0,e,s,i,a,l,u),e.context=Qm(null),r=e.current,n=pt(),s=rn(r),i=Er(n,s),i.callback=t??null,en(r,i,s),e.current.lanes=s,ra(e,s,n),kt(e,n),e}function Xo(e,t,r,n){var s=t.current,i=pt(),a=rn(s);return r=Qm(r),t.context===null?t.context=r:t.pendingContext=r,t=Er(i,a),t.payload={element:e},n=n===void 0?null:n,n!==null&&(t.callback=n),e=en(s,t,a),e!==null&&(ir(e,s,a,i),Qa(e,s,a)),a}function Co(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Ch(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function rd(e,t){Ch(e,t),(e=e.alternate)&&Ch(e,t)}function V0(){return null}var Xm=typeof reportError=="function"?reportError:function(e){console.error(e)};function nd(e){this._internalRoot=e}Zo.prototype.render=nd.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error($(409));Xo(e,t,null,null)};Zo.prototype.unmount=nd.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Fn(function(){Xo(null,e,null,null)}),t[Pr]=null}};function Zo(e){this._internalRoot=e}Zo.prototype.unstable_scheduleHydration=function(e){if(e){var t=Pp();e={blockedOn:null,target:e,priority:t};for(var r=0;r<Wr.length&&t!==0&&t<Wr[r].priority;r++);Wr.splice(r,0,e),r===0&&Op(e)}};function sd(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function el(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Ph(){}function W0(e,t,r,n,s){if(s){if(typeof n=="function"){var i=n;n=function(){var c=Co(a);i.call(c)}}var a=Ym(t,n,e,0,null,!1,!1,"",Ph);return e._reactRootContainer=a,e[Pr]=a.current,Fi(e.nodeType===8?e.parentNode:e),Fn(),a}for(;s=e.lastChild;)e.removeChild(s);if(typeof n=="function"){var l=n;n=function(){var c=Co(u);l.call(c)}}var u=td(e,0,!1,null,null,!1,!1,"",Ph);return e._reactRootContainer=u,e[Pr]=u.current,Fi(e.nodeType===8?e.parentNode:e),Fn(function(){Xo(t,u,r,n)}),u}function tl(e,t,r,n,s){var i=r._reactRootContainer;if(i){var a=i;if(typeof s=="function"){var l=s;s=function(){var u=Co(a);l.call(u)}}Xo(t,a,e,s)}else a=W0(r,t,e,s,n);return Co(a)}Np=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=gi(t.pendingLanes);r!==0&&(jc(t,r|1),kt(t,We()),!(ge&6)&&(Ts=We()+500,cn()))}break;case 13:Fn(function(){var n=Tr(e,1);if(n!==null){var s=pt();ir(n,e,1,s)}}),rd(e,1)}};Sc=function(e){if(e.tag===13){var t=Tr(e,134217728);if(t!==null){var r=pt();ir(t,e,134217728,r)}rd(e,134217728)}};Cp=function(e){if(e.tag===13){var t=rn(e),r=Tr(e,t);if(r!==null){var n=pt();ir(r,e,t,n)}rd(e,t)}};Pp=function(){return be};Tp=function(e,t){var r=be;try{return be=e,t()}finally{be=r}};hu=function(e,t,r){switch(t){case"input":if(iu(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var s=qo(n);if(!s)throw Error($(90));op(n),iu(n,s)}}}break;case"textarea":up(e,r);break;case"select":t=r.value,t!=null&&vs(e,!!r.multiple,t,!1)}};gp=Yc;vp=Fn;var q0={usingClientEntryPoint:!1,Events:[sa,cs,qo,pp,mp,Yc]},ui={findFiberByHostInstance:Cn,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},H0={bundleType:ui.bundleType,version:ui.version,rendererPackageName:ui.rendererPackageName,rendererConfig:ui.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ir.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=xp(e),e===null?null:e.stateNode},findFiberByHostInstance:ui.findFiberByHostInstance||V0,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Aa=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Aa.isDisabled&&Aa.supportsFiber)try{zo=Aa.inject(H0),pr=Aa}catch{}}At.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=q0;At.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!sd(t))throw Error($(200));return B0(e,t,null,r)};At.createRoot=function(e,t){if(!sd(e))throw Error($(299));var r=!1,n="",s=Xm;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=td(e,1,!1,null,null,r,!1,n,s),e[Pr]=t.current,Fi(e.nodeType===8?e.parentNode:e),new nd(t)};At.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error($(188)):(e=Object.keys(e).join(","),Error($(268,e)));return e=xp(t),e=e===null?null:e.stateNode,e};At.flushSync=function(e){return Fn(e)};At.hydrate=function(e,t,r){if(!el(t))throw Error($(200));return tl(null,e,t,!0,r)};At.hydrateRoot=function(e,t,r){if(!sd(e))throw Error($(405));var n=r!=null&&r.hydratedSources||null,s=!1,i="",a=Xm;if(r!=null&&(r.unstable_strictMode===!0&&(s=!0),r.identifierPrefix!==void 0&&(i=r.identifierPrefix),r.onRecoverableError!==void 0&&(a=r.onRecoverableError)),t=Ym(t,null,e,1,r??null,s,!1,i,a),e[Pr]=t.current,Fi(e),n)for(e=0;e<n.length;e++)r=n[e],s=r._getVersion,s=s(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,s]:t.mutableSourceEagerHydrationData.push(r,s);return new Zo(t)};At.render=function(e,t,r){if(!el(t))throw Error($(200));return tl(null,e,t,!1,r)};At.unmountComponentAtNode=function(e){if(!el(e))throw Error($(40));return e._reactRootContainer?(Fn(function(){tl(null,null,e,!1,function(){e._reactRootContainer=null,e[Pr]=null})}),!0):!1};At.unstable_batchedUpdates=Yc;At.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!el(r))throw Error($(200));if(e==null||e._reactInternals===void 0)throw Error($(38));return tl(e,t,r,!1,n)};At.version="18.3.1-next-f1338f8080-20240426";function Zm(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Zm)}catch(e){console.error(e)}}Zm(),Zf.exports=At;var id=Zf.exports;const K0=Uf(id),G0=Mf({__proto__:null,default:K0},[id]);var Th=id;Xl.createRoot=Th.createRoot,Xl.hydrateRoot=Th.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Oe(){return Oe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Oe.apply(this,arguments)}var Ge;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(Ge||(Ge={}));const Oh="popstate";function J0(e){e===void 0&&(e={});function t(n,s){let{pathname:i,search:a,hash:l}=n.location;return Ji("",{pathname:i,search:a,hash:l},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function r(n,s){return typeof s=="string"?s:zn(s)}return Y0(t,r,null,e)}function de(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Os(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function Q0(){return Math.random().toString(36).substr(2,8)}function Rh(e,t){return{usr:e.state,key:e.key,idx:t}}function Ji(e,t,r,n){return r===void 0&&(r=null),Oe({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?dn(t):t,{state:r,key:t&&t.key||n||Q0()})}function zn(e){let{pathname:t="/",search:r="",hash:n=""}=e;return r&&r!=="?"&&(t+=r.charAt(0)==="?"?r:"?"+r),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function dn(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substr(r),e=e.substr(0,r));let n=e.indexOf("?");n>=0&&(t.search=e.substr(n),e=e.substr(0,n)),e&&(t.pathname=e)}return t}function Y0(e,t,r,n){n===void 0&&(n={});let{window:s=document.defaultView,v5Compat:i=!1}=n,a=s.history,l=Ge.Pop,u=null,c=d();c==null&&(c=0,a.replaceState(Oe({},a.state,{idx:c}),""));function d(){return(a.state||{idx:null}).idx}function h(){l=Ge.Pop;let _=d(),v=_==null?null:_-c;c=_,u&&u({action:l,location:g.location,delta:v})}function f(_,v){l=Ge.Push;let p=Ji(g.location,_,v);c=d()+1;let y=Rh(p,c),j=g.createHref(p);try{a.pushState(y,"",j)}catch(N){if(N instanceof DOMException&&N.name==="DataCloneError")throw N;s.location.assign(j)}i&&u&&u({action:l,location:g.location,delta:1})}function m(_,v){l=Ge.Replace;let p=Ji(g.location,_,v);c=d();let y=Rh(p,c),j=g.createHref(p);a.replaceState(y,"",j),i&&u&&u({action:l,location:g.location,delta:0})}function x(_){let v=s.location.origin!=="null"?s.location.origin:s.location.href,p=typeof _=="string"?_:zn(_);return p=p.replace(/ $/,"%20"),de(v,"No window.location.(origin|href) available to create URL for href: "+p),new URL(p,v)}let g={get action(){return l},get location(){return e(s,a)},listen(_){if(u)throw new Error("A history only accepts one active listener");return s.addEventListener(Oh,h),u=_,()=>{s.removeEventListener(Oh,h),u=null}},createHref(_){return t(s,_)},createURL:x,encodeLocation(_){let v=x(_);return{pathname:v.pathname,search:v.search,hash:v.hash}},push:f,replace:m,go(_){return a.go(_)}};return g}var _e;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(_e||(_e={}));const X0=new Set(["lazy","caseSensitive","path","id","index","children"]);function Z0(e){return e.index===!0}function Po(e,t,r,n){return r===void 0&&(r=[]),n===void 0&&(n={}),e.map((s,i)=>{let a=[...r,String(i)],l=typeof s.id=="string"?s.id:a.join("-");if(de(s.index!==!0||!s.children,"Cannot specify children on an index route"),de(!n[l],'Found a route id collision on id "'+l+`".  Route id's must be globally unique within Data Router usages`),Z0(s)){let u=Oe({},s,t(s),{id:l});return n[l]=u,u}else{let u=Oe({},s,t(s),{id:l,children:void 0});return n[l]=u,s.children&&(u.children=Po(s.children,t,a,n)),u}})}function Sn(e,t,r){return r===void 0&&(r="/"),no(e,t,r,!1)}function no(e,t,r,n){let s=typeof t=="string"?dn(t):t,i=Rr(s.pathname||"/",r);if(i==null)return null;let a=eg(e);tw(a);let l=null;for(let u=0;l==null&&u<a.length;++u){let c=hw(i);l=cw(a[u],c,n)}return l}function ew(e,t){let{route:r,pathname:n,params:s}=e;return{id:r.id,pathname:n,params:s,data:t[r.id],handle:r.handle}}function eg(e,t,r,n){t===void 0&&(t=[]),r===void 0&&(r=[]),n===void 0&&(n="");let s=(i,a,l)=>{let u={relativePath:l===void 0?i.path||"":l,caseSensitive:i.caseSensitive===!0,childrenIndex:a,route:i};u.relativePath.startsWith("/")&&(de(u.relativePath.startsWith(n),'Absolute route path "'+u.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),u.relativePath=u.relativePath.slice(n.length));let c=Nr([n,u.relativePath]),d=r.concat(u);i.children&&i.children.length>0&&(de(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),eg(i.children,t,d,c)),!(i.path==null&&!i.index)&&t.push({path:c,score:lw(c,i.index),routesMeta:d})};return e.forEach((i,a)=>{var l;if(i.path===""||!((l=i.path)!=null&&l.includes("?")))s(i,a);else for(let u of tg(i.path))s(i,a,u)}),t}function tg(e){let t=e.split("/");if(t.length===0)return[];let[r,...n]=t,s=r.endsWith("?"),i=r.replace(/\?$/,"");if(n.length===0)return s?[i,""]:[i];let a=tg(n.join("/")),l=[];return l.push(...a.map(u=>u===""?i:[i,u].join("/"))),s&&l.push(...a),l.map(u=>e.startsWith("/")&&u===""?"/":u)}function tw(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:uw(t.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}const rw=/^:[\w-]+$/,nw=3,sw=2,iw=1,aw=10,ow=-2,Ih=e=>e==="*";function lw(e,t){let r=e.split("/"),n=r.length;return r.some(Ih)&&(n+=ow),t&&(n+=sw),r.filter(s=>!Ih(s)).reduce((s,i)=>s+(rw.test(i)?nw:i===""?iw:aw),n)}function uw(e,t){return e.length===t.length&&e.slice(0,-1).every((n,s)=>n===t[s])?e[e.length-1]-t[t.length-1]:0}function cw(e,t,r){r===void 0&&(r=!1);let{routesMeta:n}=e,s={},i="/",a=[];for(let l=0;l<n.length;++l){let u=n[l],c=l===n.length-1,d=i==="/"?t:t.slice(i.length)||"/",h=To({path:u.relativePath,caseSensitive:u.caseSensitive,end:c},d),f=u.route;if(!h&&c&&r&&!n[n.length-1].route.index&&(h=To({path:u.relativePath,caseSensitive:u.caseSensitive,end:!1},d)),!h)return null;Object.assign(s,h.params),a.push({params:s,pathname:Nr([i,h.pathname]),pathnameBase:mw(Nr([i,h.pathnameBase])),route:f}),h.pathnameBase!=="/"&&(i=Nr([i,h.pathnameBase]))}return a}function To(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,n]=dw(e.path,e.caseSensitive,e.end),s=t.match(r);if(!s)return null;let i=s[0],a=i.replace(/(.)\/+$/,"$1"),l=s.slice(1);return{params:n.reduce((c,d,h)=>{let{paramName:f,isOptional:m}=d;if(f==="*"){let g=l[h]||"";a=i.slice(0,i.length-g.length).replace(/(.)\/+$/,"$1")}const x=l[h];return m&&!x?c[f]=void 0:c[f]=(x||"").replace(/%2F/g,"/"),c},{}),pathname:i,pathnameBase:a,pattern:e}}function dw(e,t,r){t===void 0&&(t=!1),r===void 0&&(r=!0),Os(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let n=[],s="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,l,u)=>(n.push({paramName:l,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(n.push({paramName:"*"}),s+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?s+="\\/*$":e!==""&&e!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,t?void 0:"i"),n]}function hw(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Os(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function Rr(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,n=e.charAt(r);return n&&n!=="/"?null:e.slice(r)||"/"}function fw(e,t){t===void 0&&(t="/");let{pathname:r,search:n="",hash:s=""}=typeof e=="string"?dn(e):e;return{pathname:r?r.startsWith("/")?r:pw(r,t):t,search:gw(n),hash:vw(s)}}function pw(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(s=>{s===".."?r.length>1&&r.pop():s!=="."&&r.push(s)}),r.length>1?r.join("/"):"/"}function $l(e,t,r,n){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function rg(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function rl(e,t){let r=rg(e);return t?r.map((n,s)=>s===r.length-1?n.pathname:n.pathnameBase):r.map(n=>n.pathnameBase)}function nl(e,t,r,n){n===void 0&&(n=!1);let s;typeof e=="string"?s=dn(e):(s=Oe({},e),de(!s.pathname||!s.pathname.includes("?"),$l("?","pathname","search",s)),de(!s.pathname||!s.pathname.includes("#"),$l("#","pathname","hash",s)),de(!s.search||!s.search.includes("#"),$l("#","search","hash",s)));let i=e===""||s.pathname==="",a=i?"/":s.pathname,l;if(a==null)l=r;else{let h=t.length-1;if(!n&&a.startsWith("..")){let f=a.split("/");for(;f[0]==="..";)f.shift(),h-=1;s.pathname=f.join("/")}l=h>=0?t[h]:"/"}let u=fw(s,l),c=a&&a!=="/"&&a.endsWith("/"),d=(i||a===".")&&r.endsWith("/");return!u.pathname.endsWith("/")&&(c||d)&&(u.pathname+="/"),u}const Nr=e=>e.join("/").replace(/\/\/+/g,"/"),mw=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),gw=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,vw=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;class Oo{constructor(t,r,n,s){s===void 0&&(s=!1),this.status=t,this.statusText=r||"",this.internal=s,n instanceof Error?(this.data=n.toString(),this.error=n):this.data=n}}function Qi(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const ng=["post","put","patch","delete"],yw=new Set(ng),ww=["get",...ng],xw=new Set(ww),_w=new Set([301,302,303,307,308]),bw=new Set([307,308]),Ml={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},jw={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},ci={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},ad=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Sw=e=>({hasErrorBoundary:!!e.hasErrorBoundary}),sg="remix-router-transitions";function kw(e){const t=e.window?e.window:typeof window<"u"?window:void 0,r=typeof t<"u"&&typeof t.document<"u"&&typeof t.document.createElement<"u",n=!r;de(e.routes.length>0,"You must provide a non-empty routes array to createRouter");let s;if(e.mapRouteProperties)s=e.mapRouteProperties;else if(e.detectErrorBoundary){let k=e.detectErrorBoundary;s=E=>({hasErrorBoundary:k(E)})}else s=Sw;let i={},a=Po(e.routes,s,void 0,i),l,u=e.basename||"/",c=e.dataStrategy||Pw,d=e.patchRoutesOnNavigation,h=Oe({v7_fetcherPersist:!1,v7_normalizeFormMethod:!1,v7_partialHydration:!1,v7_prependBasename:!1,v7_relativeSplatPath:!1,v7_skipActionErrorRevalidation:!1},e.future),f=null,m=new Set,x=null,g=null,_=null,v=e.hydrationData!=null,p=Sn(a,e.history.location,u),y=!1,j=null;if(p==null&&!d){let k=wt(404,{pathname:e.history.location.pathname}),{matches:E,route:T}=Wh(a);p=E,j={[T.id]:k}}p&&!e.hydrationData&&ce(p,a,e.history.location.pathname).active&&(p=null);let N;if(p)if(p.some(k=>k.route.lazy))N=!1;else if(!p.some(k=>k.route.loader))N=!0;else if(h.v7_partialHydration){let k=e.hydrationData?e.hydrationData.loaderData:null,E=e.hydrationData?e.hydrationData.errors:null;if(E){let T=p.findIndex(A=>E[A.route.id]!==void 0);N=p.slice(0,T+1).every(A=>!Hu(A.route,k,E))}else N=p.every(T=>!Hu(T.route,k,E))}else N=e.hydrationData!=null;else if(N=!1,p=[],h.v7_partialHydration){let k=ce(null,a,e.history.location.pathname);k.active&&k.matches&&(y=!0,p=k.matches)}let P,b={historyAction:e.history.action,location:e.history.location,matches:p,initialized:N,navigation:Ml,restoreScrollPosition:e.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:e.hydrationData&&e.hydrationData.loaderData||{},actionData:e.hydrationData&&e.hydrationData.actionData||null,errors:e.hydrationData&&e.hydrationData.errors||j,fetchers:new Map,blockers:new Map},I=Ge.Pop,z=!1,L,ne=!1,O=new Map,J=null,M=!1,oe=!1,we=[],Ie=new Set,D=new Map,Q=0,ee=-1,fe=new Map,ue=new Set,Ae=new Map,Ve=new Map,Te=new Set,me=new Map,R=new Map,Z;function xe(){if(f=e.history.listen(k=>{let{action:E,location:T,delta:A}=k;if(Z){Z(),Z=void 0;return}Os(R.size===0||A!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let F=pa({currentLocation:b.location,nextLocation:T,historyAction:E});if(F&&A!=null){let X=new Promise(se=>{Z=se});e.history.go(A*-1),wr(F,{state:"blocked",location:T,proceed(){wr(F,{state:"proceeding",proceed:void 0,reset:void 0,location:T}),X.then(()=>e.history.go(A))},reset(){let se=new Map(b.blockers);se.set(F,ci),Se({blockers:se})}});return}return ae(E,T)}),r){Vw(t,O);let k=()=>Ww(t,O);t.addEventListener("pagehide",k),J=()=>t.removeEventListener("pagehide",k)}return b.initialized||ae(Ge.Pop,b.location,{initialHydration:!0}),P}function lt(){f&&f(),J&&J(),m.clear(),L&&L.abort(),b.fetchers.forEach((k,E)=>pn(E)),b.blockers.forEach((k,E)=>lr(E))}function Dt(k){return m.add(k),()=>m.delete(k)}function Se(k,E){E===void 0&&(E={}),b=Oe({},b,k);let T=[],A=[];h.v7_fetcherPersist&&b.fetchers.forEach((F,X)=>{F.state==="idle"&&(Te.has(X)?A.push(X):T.push(X))}),Te.forEach(F=>{!b.fetchers.has(F)&&!D.has(F)&&A.push(F)}),[...m].forEach(F=>F(b,{deletedFetchers:A,viewTransitionOpts:E.viewTransitionOpts,flushSync:E.flushSync===!0})),h.v7_fetcherPersist?(T.forEach(F=>b.fetchers.delete(F)),A.forEach(F=>pn(F))):A.forEach(F=>Te.delete(F))}function S(k,E,T){var A,F;let{flushSync:X}=T===void 0?{}:T,se=b.actionData!=null&&b.navigation.formMethod!=null&&tr(b.navigation.formMethod)&&b.navigation.state==="loading"&&((A=k.state)==null?void 0:A._isRedirect)!==!0,q;E.actionData?Object.keys(E.actionData).length>0?q=E.actionData:q=null:se?q=b.actionData:q=null;let G=E.loaderData?Bh(b.loaderData,E.loaderData,E.matches||[],E.errors):b.loaderData,V=b.blockers;V.size>0&&(V=new Map(V),V.forEach((pe,st)=>V.set(st,ci)));let Y=z===!0||b.navigation.formMethod!=null&&tr(b.navigation.formMethod)&&((F=k.state)==null?void 0:F._isRedirect)!==!0;l&&(a=l,l=void 0),M||I===Ge.Pop||(I===Ge.Push?e.history.push(k,k.state):I===Ge.Replace&&e.history.replace(k,k.state));let le;if(I===Ge.Pop){let pe=O.get(b.location.pathname);pe&&pe.has(k.pathname)?le={currentLocation:b.location,nextLocation:k}:O.has(k.pathname)&&(le={currentLocation:k,nextLocation:b.location})}else if(ne){let pe=O.get(b.location.pathname);pe?pe.add(k.pathname):(pe=new Set([k.pathname]),O.set(b.location.pathname,pe)),le={currentLocation:b.location,nextLocation:k}}Se(Oe({},E,{actionData:q,loaderData:G,historyAction:I,location:k,initialized:!0,navigation:Ml,revalidation:"idle",restoreScrollPosition:re(k,E.matches||b.matches),preventScrollReset:Y,blockers:V}),{viewTransitionOpts:le,flushSync:X===!0}),I=Ge.Pop,z=!1,ne=!1,M=!1,oe=!1,we=[]}async function U(k,E){if(typeof k=="number"){e.history.go(k);return}let T=qu(b.location,b.matches,u,h.v7_prependBasename,k,h.v7_relativeSplatPath,E==null?void 0:E.fromRouteId,E==null?void 0:E.relative),{path:A,submission:F,error:X}=Ah(h.v7_normalizeFormMethod,!1,T,E),se=b.location,q=Ji(b.location,A,E&&E.state);q=Oe({},q,e.history.encodeLocation(q));let G=E&&E.replace!=null?E.replace:void 0,V=Ge.Push;G===!0?V=Ge.Replace:G===!1||F!=null&&tr(F.formMethod)&&F.formAction===b.location.pathname+b.location.search&&(V=Ge.Replace);let Y=E&&"preventScrollReset"in E?E.preventScrollReset===!0:void 0,le=(E&&E.flushSync)===!0,pe=pa({currentLocation:se,nextLocation:q,historyAction:V});if(pe){wr(pe,{state:"blocked",location:q,proceed(){wr(pe,{state:"proceeding",proceed:void 0,reset:void 0,location:q}),U(k,E)},reset(){let st=new Map(b.blockers);st.set(pe,ci),Se({blockers:st})}});return}return await ae(V,q,{submission:F,pendingError:X,preventScrollReset:Y,replace:E&&E.replace,enableViewTransition:E&&E.viewTransition,flushSync:le})}function W(){if(Dr(),Se({revalidation:"loading"}),b.navigation.state!=="submitting"){if(b.navigation.state==="idle"){ae(b.historyAction,b.location,{startUninterruptedRevalidation:!0});return}ae(I||b.historyAction,b.navigation.location,{overrideNavigation:b.navigation,enableViewTransition:ne===!0})}}async function ae(k,E,T){L&&L.abort(),L=null,I=k,M=(T&&T.startUninterruptedRevalidation)===!0,C(b.location,b.matches),z=(T&&T.preventScrollReset)===!0,ne=(T&&T.enableViewTransition)===!0;let A=l||a,F=T&&T.overrideNavigation,X=T!=null&&T.initialHydration&&b.matches&&b.matches.length>0&&!y?b.matches:Sn(A,E,u),se=(T&&T.flushSync)===!0;if(X&&b.initialized&&!oe&&Lw(b.location,E)&&!(T&&T.submission&&tr(T.submission.formMethod))){S(E,{matches:X},{flushSync:se});return}let q=ce(X,A,E.pathname);if(q.active&&q.matches&&(X=q.matches),!X){let{error:ke,notFoundMatches:ye,route:Fe}=Hn(E.pathname);S(E,{matches:ye,loaderData:{},errors:{[Fe.id]:ke}},{flushSync:se});return}L=new AbortController;let G=Yn(e.history,E,L.signal,T&&T.submission),V;if(T&&T.pendingError)V=[kn(X).route.id,{type:_e.error,error:T.pendingError}];else if(T&&T.submission&&tr(T.submission.formMethod)){let ke=await je(G,E,T.submission,X,q.active,{replace:T.replace,flushSync:se});if(ke.shortCircuited)return;if(ke.pendingActionResult){let[ye,Fe]=ke.pendingActionResult;if(Ct(Fe)&&Qi(Fe.error)&&Fe.error.status===404){L=null,S(E,{matches:ke.matches,loaderData:{},errors:{[ye]:Fe.error}});return}}X=ke.matches||X,V=ke.pendingActionResult,F=Ul(E,T.submission),se=!1,q.active=!1,G=Yn(e.history,G.url,G.signal)}let{shortCircuited:Y,matches:le,loaderData:pe,errors:st}=await He(G,E,X,q.active,F,T&&T.submission,T&&T.fetcherSubmission,T&&T.replace,T&&T.initialHydration===!0,se,V);Y||(L=null,S(E,Oe({matches:le||X},Vh(V),{loaderData:pe,errors:st})))}async function je(k,E,T,A,F,X){X===void 0&&(X={}),Dr();let se=zw(E,T);if(Se({navigation:se},{flushSync:X.flushSync===!0}),F){let V=await Ue(A,E.pathname,k.signal);if(V.type==="aborted")return{shortCircuited:!0};if(V.type==="error"){let Y=kn(V.partialMatches).route.id;return{matches:V.partialMatches,pendingActionResult:[Y,{type:_e.error,error:V.error}]}}else if(V.matches)A=V.matches;else{let{notFoundMatches:Y,error:le,route:pe}=Hn(E.pathname);return{matches:Y,pendingActionResult:[pe.id,{type:_e.error,error:le}]}}}let q,G=yi(A,E);if(!G.route.action&&!G.route.lazy)q={type:_e.error,error:wt(405,{method:k.method,pathname:E.pathname,routeId:G.route.id})};else if(q=(await or("action",b,k,[G],A,null))[G.route.id],k.signal.aborted)return{shortCircuited:!0};if(On(q)){let V;return X&&X.replace!=null?V=X.replace:V=Uh(q.response.headers.get("Location"),new URL(k.url),u)===b.location.pathname+b.location.search,await qt(k,q,!0,{submission:T,replace:V}),{shortCircuited:!0}}if(Jr(q))throw wt(400,{type:"defer-action"});if(Ct(q)){let V=kn(A,G.route.id);return(X&&X.replace)!==!0&&(I=Ge.Push),{matches:A,pendingActionResult:[V.route.id,q]}}return{matches:A,pendingActionResult:[G.route.id,q]}}async function He(k,E,T,A,F,X,se,q,G,V,Y){let le=F||Ul(E,X),pe=X||se||Hh(le),st=!M&&(!h.v7_partialHydration||!G);if(A){if(st){let ze=tt(Y);Se(Oe({navigation:le},ze!==void 0?{actionData:ze}:{}),{flushSync:V})}let ve=await Ue(T,E.pathname,k.signal);if(ve.type==="aborted")return{shortCircuited:!0};if(ve.type==="error"){let ze=kn(ve.partialMatches).route.id;return{matches:ve.partialMatches,loaderData:{},errors:{[ze]:ve.error}}}else if(ve.matches)T=ve.matches;else{let{error:ze,notFoundMatches:Gn,route:ti}=Hn(E.pathname);return{matches:Gn,loaderData:{},errors:{[ti.id]:ze}}}}let ke=l||a,[ye,Fe]=Dh(e.history,b,T,pe,E,h.v7_partialHydration&&G===!0,h.v7_skipActionErrorRevalidation,oe,we,Ie,Te,Ae,ue,ke,u,Y);if(Qs(ve=>!(T&&T.some(ze=>ze.route.id===ve))||ye&&ye.some(ze=>ze.route.id===ve)),ee=++Q,ye.length===0&&Fe.length===0){let ve=ha();return S(E,Oe({matches:T,loaderData:{},errors:Y&&Ct(Y[1])?{[Y[0]]:Y[1].error}:null},Vh(Y),ve?{fetchers:new Map(b.fetchers)}:{}),{flushSync:V}),{shortCircuited:!0}}if(st){let ve={};if(!A){ve.navigation=le;let ze=tt(Y);ze!==void 0&&(ve.actionData=ze)}Fe.length>0&&(ve.fetchers=$t(Fe)),Se(ve,{flushSync:V})}Fe.forEach(ve=>{Kt(ve.key),ve.controller&&D.set(ve.key,ve.controller)});let Kn=()=>Fe.forEach(ve=>Kt(ve.key));L&&L.signal.addEventListener("abort",Kn);let{loaderResults:Zs,fetcherResults:xr}=await fn(b,T,ye,Fe,k);if(k.signal.aborted)return{shortCircuited:!0};L&&L.signal.removeEventListener("abort",Kn),Fe.forEach(ve=>D.delete(ve.key));let ur=La(Zs);if(ur)return await qt(k,ur.result,!0,{replace:q}),{shortCircuited:!0};if(ur=La(xr),ur)return ue.add(ur.key),await qt(k,ur.result,!0,{replace:q}),{shortCircuited:!0};let{loaderData:cl,errors:ei}=zh(b,T,Zs,Y,Fe,xr,me);me.forEach((ve,ze)=>{ve.subscribe(Gn=>{(Gn||ve.done)&&me.delete(ze)})}),h.v7_partialHydration&&G&&b.errors&&(ei=Oe({},b.errors,ei));let mn=ha(),ga=Js(ee),va=mn||ga||Fe.length>0;return Oe({matches:T,loaderData:cl,errors:ei},va?{fetchers:new Map(b.fetchers)}:{})}function tt(k){if(k&&!Ct(k[1]))return{[k[0]]:k[1].data};if(b.actionData)return Object.keys(b.actionData).length===0?null:b.actionData}function $t(k){return k.forEach(E=>{let T=b.fetchers.get(E.key),A=di(void 0,T?T.data:void 0);b.fetchers.set(E.key,A)}),new Map(b.fetchers)}function ll(k,E,T,A){if(n)throw new Error("router.fetch() was called during the server render, but it shouldn't be. You are likely calling a useFetcher() method in the body of your component. Try moving it to a useEffect or a callback.");Kt(k);let F=(A&&A.flushSync)===!0,X=l||a,se=qu(b.location,b.matches,u,h.v7_prependBasename,T,h.v7_relativeSplatPath,E,A==null?void 0:A.relative),q=Sn(X,se,u),G=ce(q,X,se);if(G.active&&G.matches&&(q=G.matches),!q){Ht(k,E,wt(404,{pathname:se}),{flushSync:F});return}let{path:V,submission:Y,error:le}=Ah(h.v7_normalizeFormMethod,!0,se,A);if(le){Ht(k,E,le,{flushSync:F});return}let pe=yi(q,V),st=(A&&A.preventScrollReset)===!0;if(Y&&tr(Y.formMethod)){ul(k,E,V,pe,q,G.active,F,st,Y);return}Ae.set(k,{routeId:E,path:V}),qn(k,E,V,pe,q,G.active,F,st,Y)}async function ul(k,E,T,A,F,X,se,q,G){Dr(),Ae.delete(k);function V(Ke){if(!Ke.route.action&&!Ke.route.lazy){let Jn=wt(405,{method:G.formMethod,pathname:T,routeId:E});return Ht(k,E,Jn,{flushSync:se}),!0}return!1}if(!X&&V(A))return;let Y=b.fetchers.get(k);Mt(k,Bw(G,Y),{flushSync:se});let le=new AbortController,pe=Yn(e.history,T,le.signal,G);if(X){let Ke=await Ue(F,new URL(pe.url).pathname,pe.signal,k);if(Ke.type==="aborted")return;if(Ke.type==="error"){Ht(k,E,Ke.error,{flushSync:se});return}else if(Ke.matches){if(F=Ke.matches,A=yi(F,T),V(A))return}else{Ht(k,E,wt(404,{pathname:T}),{flushSync:se});return}}D.set(k,le);let st=Q,ye=(await or("action",b,pe,[A],F,k))[A.route.id];if(pe.signal.aborted){D.get(k)===le&&D.delete(k);return}if(h.v7_fetcherPersist&&Te.has(k)){if(On(ye)||Ct(ye)){Mt(k,Ur(void 0));return}}else{if(On(ye))if(D.delete(k),ee>st){Mt(k,Ur(void 0));return}else return ue.add(k),Mt(k,di(G)),qt(pe,ye,!1,{fetcherSubmission:G,preventScrollReset:q});if(Ct(ye)){Ht(k,E,ye.error);return}}if(Jr(ye))throw wt(400,{type:"defer-action"});let Fe=b.navigation.location||b.location,Kn=Yn(e.history,Fe,le.signal),Zs=l||a,xr=b.navigation.state!=="idle"?Sn(Zs,b.navigation.location,u):b.matches;de(xr,"Didn't find any matches after fetcher action");let ur=++Q;fe.set(k,ur);let cl=di(G,ye.data);b.fetchers.set(k,cl);let[ei,mn]=Dh(e.history,b,xr,G,Fe,!1,h.v7_skipActionErrorRevalidation,oe,we,Ie,Te,Ae,ue,Zs,u,[A.route.id,ye]);mn.filter(Ke=>Ke.key!==k).forEach(Ke=>{let Jn=Ke.key,_d=b.fetchers.get(Jn),xv=di(void 0,_d?_d.data:void 0);b.fetchers.set(Jn,xv),Kt(Jn),Ke.controller&&D.set(Jn,Ke.controller)}),Se({fetchers:new Map(b.fetchers)});let ga=()=>mn.forEach(Ke=>Kt(Ke.key));le.signal.addEventListener("abort",ga);let{loaderResults:va,fetcherResults:ve}=await fn(b,xr,ei,mn,Kn);if(le.signal.aborted)return;le.signal.removeEventListener("abort",ga),fe.delete(k),D.delete(k),mn.forEach(Ke=>D.delete(Ke.key));let ze=La(va);if(ze)return qt(Kn,ze.result,!1,{preventScrollReset:q});if(ze=La(ve),ze)return ue.add(ze.key),qt(Kn,ze.result,!1,{preventScrollReset:q});let{loaderData:Gn,errors:ti}=zh(b,xr,va,void 0,mn,ve,me);if(b.fetchers.has(k)){let Ke=Ur(ye.data);b.fetchers.set(k,Ke)}Js(ur),b.navigation.state==="loading"&&ur>ee?(de(I,"Expected pending action"),L&&L.abort(),S(b.navigation.location,{matches:xr,loaderData:Gn,errors:ti,fetchers:new Map(b.fetchers)})):(Se({errors:ti,loaderData:Bh(b.loaderData,Gn,xr,ti),fetchers:new Map(b.fetchers)}),oe=!1)}async function qn(k,E,T,A,F,X,se,q,G){let V=b.fetchers.get(k);Mt(k,di(G,V?V.data:void 0),{flushSync:se});let Y=new AbortController,le=Yn(e.history,T,Y.signal);if(X){let ye=await Ue(F,new URL(le.url).pathname,le.signal,k);if(ye.type==="aborted")return;if(ye.type==="error"){Ht(k,E,ye.error,{flushSync:se});return}else if(ye.matches)F=ye.matches,A=yi(F,T);else{Ht(k,E,wt(404,{pathname:T}),{flushSync:se});return}}D.set(k,Y);let pe=Q,ke=(await or("loader",b,le,[A],F,k))[A.route.id];if(Jr(ke)&&(ke=await od(ke,le.signal,!0)||ke),D.get(k)===Y&&D.delete(k),!le.signal.aborted){if(Te.has(k)){Mt(k,Ur(void 0));return}if(On(ke))if(ee>pe){Mt(k,Ur(void 0));return}else{ue.add(k),await qt(le,ke,!1,{preventScrollReset:q});return}if(Ct(ke)){Ht(k,E,ke.error);return}de(!Jr(ke),"Unhandled fetcher deferred data"),Mt(k,Ur(ke.data))}}async function qt(k,E,T,A){let{submission:F,fetcherSubmission:X,preventScrollReset:se,replace:q}=A===void 0?{}:A;E.response.headers.has("X-Remix-Revalidate")&&(oe=!0);let G=E.response.headers.get("Location");de(G,"Expected a Location header on the redirect Response"),G=Uh(G,new URL(k.url),u);let V=Ji(b.location,G,{_isRedirect:!0});if(r){let ye=!1;if(E.response.headers.has("X-Remix-Reload-Document"))ye=!0;else if(ad.test(G)){const Fe=e.history.createURL(G);ye=Fe.origin!==t.location.origin||Rr(Fe.pathname,u)==null}if(ye){q?t.location.replace(G):t.location.assign(G);return}}L=null;let Y=q===!0||E.response.headers.has("X-Remix-Replace")?Ge.Replace:Ge.Push,{formMethod:le,formAction:pe,formEncType:st}=b.navigation;!F&&!X&&le&&pe&&st&&(F=Hh(b.navigation));let ke=F||X;if(bw.has(E.response.status)&&ke&&tr(ke.formMethod))await ae(Y,V,{submission:Oe({},ke,{formAction:G}),preventScrollReset:se||z,enableViewTransition:T?ne:void 0});else{let ye=Ul(V,F);await ae(Y,V,{overrideNavigation:ye,fetcherSubmission:X,preventScrollReset:se||z,enableViewTransition:T?ne:void 0})}}async function or(k,E,T,A,F,X){let se,q={};try{se=await Tw(c,k,E,T,A,F,X,i,s)}catch(G){return A.forEach(V=>{q[V.route.id]={type:_e.error,error:G}}),q}for(let[G,V]of Object.entries(se))if(Dw(V)){let Y=V.result;q[G]={type:_e.redirect,response:Iw(Y,T,G,F,u,h.v7_relativeSplatPath)}}else q[G]=await Rw(V);return q}async function fn(k,E,T,A,F){let X=k.matches,se=or("loader",k,F,T,E,null),q=Promise.all(A.map(async Y=>{if(Y.matches&&Y.match&&Y.controller){let pe=(await or("loader",k,Yn(e.history,Y.path,Y.controller.signal),[Y.match],Y.matches,Y.key))[Y.match.route.id];return{[Y.key]:pe}}else return Promise.resolve({[Y.key]:{type:_e.error,error:wt(404,{pathname:Y.path})}})})),G=await se,V=(await q).reduce((Y,le)=>Object.assign(Y,le),{});return await Promise.all([Uw(E,G,F.signal,X,k.loaderData),Fw(E,V,A)]),{loaderResults:G,fetcherResults:V}}function Dr(){oe=!0,we.push(...Qs()),Ae.forEach((k,E)=>{D.has(E)&&Ie.add(E),Kt(E)})}function Mt(k,E,T){T===void 0&&(T={}),b.fetchers.set(k,E),Se({fetchers:new Map(b.fetchers)},{flushSync:(T&&T.flushSync)===!0})}function Ht(k,E,T,A){A===void 0&&(A={});let F=kn(b.matches,E);pn(k),Se({errors:{[F.route.id]:T},fetchers:new Map(b.fetchers)},{flushSync:(A&&A.flushSync)===!0})}function ca(k){return Ve.set(k,(Ve.get(k)||0)+1),Te.has(k)&&Te.delete(k),b.fetchers.get(k)||jw}function pn(k){let E=b.fetchers.get(k);D.has(k)&&!(E&&E.state==="loading"&&fe.has(k))&&Kt(k),Ae.delete(k),fe.delete(k),ue.delete(k),h.v7_fetcherPersist&&Te.delete(k),Ie.delete(k),b.fetchers.delete(k)}function da(k){let E=(Ve.get(k)||0)-1;E<=0?(Ve.delete(k),Te.add(k),h.v7_fetcherPersist||pn(k)):Ve.set(k,E),Se({fetchers:new Map(b.fetchers)})}function Kt(k){let E=D.get(k);E&&(E.abort(),D.delete(k))}function Gs(k){for(let E of k){let T=ca(E),A=Ur(T.data);b.fetchers.set(E,A)}}function ha(){let k=[],E=!1;for(let T of ue){let A=b.fetchers.get(T);de(A,"Expected fetcher: "+T),A.state==="loading"&&(ue.delete(T),k.push(T),E=!0)}return Gs(k),E}function Js(k){let E=[];for(let[T,A]of fe)if(A<k){let F=b.fetchers.get(T);de(F,"Expected fetcher: "+T),F.state==="loading"&&(Kt(T),fe.delete(T),E.push(T))}return Gs(E),E.length>0}function fa(k,E){let T=b.blockers.get(k)||ci;return R.get(k)!==E&&R.set(k,E),T}function lr(k){b.blockers.delete(k),R.delete(k)}function wr(k,E){let T=b.blockers.get(k)||ci;de(T.state==="unblocked"&&E.state==="blocked"||T.state==="blocked"&&E.state==="blocked"||T.state==="blocked"&&E.state==="proceeding"||T.state==="blocked"&&E.state==="unblocked"||T.state==="proceeding"&&E.state==="unblocked","Invalid blocker state transition: "+T.state+" -> "+E.state);let A=new Map(b.blockers);A.set(k,E),Se({blockers:A})}function pa(k){let{currentLocation:E,nextLocation:T,historyAction:A}=k;if(R.size===0)return;R.size>1&&Os(!1,"A router only supports one blocker at a time");let F=Array.from(R.entries()),[X,se]=F[F.length-1],q=b.blockers.get(X);if(!(q&&q.state==="proceeding")&&se({currentLocation:E,nextLocation:T,historyAction:A}))return X}function Hn(k){let E=wt(404,{pathname:k}),T=l||a,{matches:A,route:F}=Wh(T);return Qs(),{notFoundMatches:A,route:F,error:E}}function Qs(k){let E=[];return me.forEach((T,A)=>{(!k||k(A))&&(T.cancel(),E.push(A),me.delete(A))}),E}function ma(k,E,T){if(x=k,_=E,g=T||null,!v&&b.navigation===Ml){v=!0;let A=re(b.location,b.matches);A!=null&&Se({restoreScrollPosition:A})}return()=>{x=null,_=null,g=null}}function Ys(k,E){return g&&g(k,E.map(A=>ew(A,b.loaderData)))||k.key}function C(k,E){if(x&&_){let T=Ys(k,E);x[T]=_()}}function re(k,E){if(x){let T=Ys(k,E),A=x[T];if(typeof A=="number")return A}return null}function ce(k,E,T){if(d)if(k){if(Object.keys(k[0].params).length>0)return{active:!0,matches:no(E,T,u,!0)}}else return{active:!0,matches:no(E,T,u,!0)||[]};return{active:!1,matches:null}}async function Ue(k,E,T,A){if(!d)return{type:"success",matches:k};let F=k;for(;;){let X=l==null,se=l||a,q=i;try{await d({signal:T,path:E,matches:F,fetcherKey:A,patch:(Y,le)=>{T.aborted||Mh(Y,le,se,q,s)}})}catch(Y){return{type:"error",error:Y,partialMatches:F}}finally{X&&!T.aborted&&(a=[...a])}if(T.aborted)return{type:"aborted"};let G=Sn(se,E,u);if(G)return{type:"success",matches:G};let V=no(se,E,u,!0);if(!V||F.length===V.length&&F.every((Y,le)=>Y.route.id===V[le].route.id))return{type:"success",matches:null};F=V}}function Gt(k){i={},l=Po(k,s,void 0,i)}function Xs(k,E){let T=l==null;Mh(k,E,l||a,i,s),T&&(a=[...a],Se({}))}return P={get basename(){return u},get future(){return h},get state(){return b},get routes(){return a},get window(){return t},initialize:xe,subscribe:Dt,enableScrollRestoration:ma,navigate:U,fetch:ll,revalidate:W,createHref:k=>e.history.createHref(k),encodeLocation:k=>e.history.encodeLocation(k),getFetcher:ca,deleteFetcher:da,dispose:lt,getBlocker:fa,deleteBlocker:lr,patchRoutes:Xs,_internalFetchControllers:D,_internalActiveDeferreds:me,_internalSetRoutes:Gt},P}function Ew(e){return e!=null&&("formData"in e&&e.formData!=null||"body"in e&&e.body!==void 0)}function qu(e,t,r,n,s,i,a,l){let u,c;if(a){u=[];for(let h of t)if(u.push(h),h.route.id===a){c=h;break}}else u=t,c=t[t.length-1];let d=nl(s||".",rl(u,i),Rr(e.pathname,r)||e.pathname,l==="path");if(s==null&&(d.search=e.search,d.hash=e.hash),(s==null||s===""||s===".")&&c){let h=ld(d.search);if(c.route.index&&!h)d.search=d.search?d.search.replace(/^\?/,"?index&"):"?index";else if(!c.route.index&&h){let f=new URLSearchParams(d.search),m=f.getAll("index");f.delete("index"),m.filter(g=>g).forEach(g=>f.append("index",g));let x=f.toString();d.search=x?"?"+x:""}}return n&&r!=="/"&&(d.pathname=d.pathname==="/"?r:Nr([r,d.pathname])),zn(d)}function Ah(e,t,r,n){if(!n||!Ew(n))return{path:r};if(n.formMethod&&!Mw(n.formMethod))return{path:r,error:wt(405,{method:n.formMethod})};let s=()=>({path:r,error:wt(400,{type:"invalid-body"})}),i=n.formMethod||"get",a=e?i.toUpperCase():i.toLowerCase(),l=og(r);if(n.body!==void 0){if(n.formEncType==="text/plain"){if(!tr(a))return s();let f=typeof n.body=="string"?n.body:n.body instanceof FormData||n.body instanceof URLSearchParams?Array.from(n.body.entries()).reduce((m,x)=>{let[g,_]=x;return""+m+g+"="+_+`
`},""):String(n.body);return{path:r,submission:{formMethod:a,formAction:l,formEncType:n.formEncType,formData:void 0,json:void 0,text:f}}}else if(n.formEncType==="application/json"){if(!tr(a))return s();try{let f=typeof n.body=="string"?JSON.parse(n.body):n.body;return{path:r,submission:{formMethod:a,formAction:l,formEncType:n.formEncType,formData:void 0,json:f,text:void 0}}}catch{return s()}}}de(typeof FormData=="function","FormData is not available in this environment");let u,c;if(n.formData)u=Ku(n.formData),c=n.formData;else if(n.body instanceof FormData)u=Ku(n.body),c=n.body;else if(n.body instanceof URLSearchParams)u=n.body,c=Fh(u);else if(n.body==null)u=new URLSearchParams,c=new FormData;else try{u=new URLSearchParams(n.body),c=Fh(u)}catch{return s()}let d={formMethod:a,formAction:l,formEncType:n&&n.formEncType||"application/x-www-form-urlencoded",formData:c,json:void 0,text:void 0};if(tr(d.formMethod))return{path:r,submission:d};let h=dn(r);return t&&h.search&&ld(h.search)&&u.append("index",""),h.search="?"+u,{path:zn(h),submission:d}}function Lh(e,t,r){r===void 0&&(r=!1);let n=e.findIndex(s=>s.route.id===t);return n>=0?e.slice(0,r?n+1:n):e}function Dh(e,t,r,n,s,i,a,l,u,c,d,h,f,m,x,g){let _=g?Ct(g[1])?g[1].error:g[1].data:void 0,v=e.createURL(t.location),p=e.createURL(s),y=r;i&&t.errors?y=Lh(r,Object.keys(t.errors)[0],!0):g&&Ct(g[1])&&(y=Lh(r,g[0]));let j=g?g[1].statusCode:void 0,N=a&&j&&j>=400,P=y.filter((I,z)=>{let{route:L}=I;if(L.lazy)return!0;if(L.loader==null)return!1;if(i)return Hu(L,t.loaderData,t.errors);if(Nw(t.loaderData,t.matches[z],I)||u.some(J=>J===I.route.id))return!0;let ne=t.matches[z],O=I;return $h(I,Oe({currentUrl:v,currentParams:ne.params,nextUrl:p,nextParams:O.params},n,{actionResult:_,actionStatus:j,defaultShouldRevalidate:N?!1:l||v.pathname+v.search===p.pathname+p.search||v.search!==p.search||ig(ne,O)}))}),b=[];return h.forEach((I,z)=>{if(i||!r.some(M=>M.route.id===I.routeId)||d.has(z))return;let L=Sn(m,I.path,x);if(!L){b.push({key:z,routeId:I.routeId,path:I.path,matches:null,match:null,controller:null});return}let ne=t.fetchers.get(z),O=yi(L,I.path),J=!1;f.has(z)?J=!1:c.has(z)?(c.delete(z),J=!0):ne&&ne.state!=="idle"&&ne.data===void 0?J=l:J=$h(O,Oe({currentUrl:v,currentParams:t.matches[t.matches.length-1].params,nextUrl:p,nextParams:r[r.length-1].params},n,{actionResult:_,actionStatus:j,defaultShouldRevalidate:N?!1:l})),J&&b.push({key:z,routeId:I.routeId,path:I.path,matches:L,match:O,controller:new AbortController})}),[P,b]}function Hu(e,t,r){if(e.lazy)return!0;if(!e.loader)return!1;let n=t!=null&&t[e.id]!==void 0,s=r!=null&&r[e.id]!==void 0;return!n&&s?!1:typeof e.loader=="function"&&e.loader.hydrate===!0?!0:!n&&!s}function Nw(e,t,r){let n=!t||r.route.id!==t.route.id,s=e[r.route.id]===void 0;return n||s}function ig(e,t){let r=e.route.path;return e.pathname!==t.pathname||r!=null&&r.endsWith("*")&&e.params["*"]!==t.params["*"]}function $h(e,t){if(e.route.shouldRevalidate){let r=e.route.shouldRevalidate(t);if(typeof r=="boolean")return r}return t.defaultShouldRevalidate}function Mh(e,t,r,n,s){var i;let a;if(e){let c=n[e];de(c,"No route found to patch children into: routeId = "+e),c.children||(c.children=[]),a=c.children}else a=r;let l=t.filter(c=>!a.some(d=>ag(c,d))),u=Po(l,s,[e||"_","patch",String(((i=a)==null?void 0:i.length)||"0")],n);a.push(...u)}function ag(e,t){return"id"in e&&"id"in t&&e.id===t.id?!0:e.index===t.index&&e.path===t.path&&e.caseSensitive===t.caseSensitive?(!e.children||e.children.length===0)&&(!t.children||t.children.length===0)?!0:e.children.every((r,n)=>{var s;return(s=t.children)==null?void 0:s.some(i=>ag(r,i))}):!1}async function Cw(e,t,r){if(!e.lazy)return;let n=await e.lazy();if(!e.lazy)return;let s=r[e.id];de(s,"No route found in manifest");let i={};for(let a in n){let u=s[a]!==void 0&&a!=="hasErrorBoundary";Os(!u,'Route "'+s.id+'" has a static property "'+a+'" defined but its lazy function is also returning a value for this property. '+('The lazy route property "'+a+'" will be ignored.')),!u&&!X0.has(a)&&(i[a]=n[a])}Object.assign(s,i),Object.assign(s,Oe({},t(s),{lazy:void 0}))}async function Pw(e){let{matches:t}=e,r=t.filter(s=>s.shouldLoad);return(await Promise.all(r.map(s=>s.resolve()))).reduce((s,i,a)=>Object.assign(s,{[r[a].route.id]:i}),{})}async function Tw(e,t,r,n,s,i,a,l,u,c){let d=i.map(m=>m.route.lazy?Cw(m.route,u,l):void 0),h=i.map((m,x)=>{let g=d[x],_=s.some(p=>p.route.id===m.route.id);return Oe({},m,{shouldLoad:_,resolve:async p=>(p&&n.method==="GET"&&(m.route.lazy||m.route.loader)&&(_=!0),_?Ow(t,n,m,g,p,c):Promise.resolve({type:_e.data,result:void 0}))})}),f=await e({matches:h,request:n,params:i[0].params,fetcherKey:a,context:c});try{await Promise.all(d)}catch{}return f}async function Ow(e,t,r,n,s,i){let a,l,u=c=>{let d,h=new Promise((x,g)=>d=g);l=()=>d(),t.signal.addEventListener("abort",l);let f=x=>typeof c!="function"?Promise.reject(new Error("You cannot call the handler for a route which defines a boolean "+('"'+e+'" [routeId: '+r.route.id+"]"))):c({request:t,params:r.params,context:i},...x!==void 0?[x]:[]),m=(async()=>{try{return{type:"data",result:await(s?s(g=>f(g)):f())}}catch(x){return{type:"error",result:x}}})();return Promise.race([m,h])};try{let c=r.route[e];if(n)if(c){let d,[h]=await Promise.all([u(c).catch(f=>{d=f}),n]);if(d!==void 0)throw d;a=h}else if(await n,c=r.route[e],c)a=await u(c);else if(e==="action"){let d=new URL(t.url),h=d.pathname+d.search;throw wt(405,{method:t.method,pathname:h,routeId:r.route.id})}else return{type:_e.data,result:void 0};else if(c)a=await u(c);else{let d=new URL(t.url),h=d.pathname+d.search;throw wt(404,{pathname:h})}de(a.result!==void 0,"You defined "+(e==="action"?"an action":"a loader")+" for route "+('"'+r.route.id+"\" but didn't return anything from your `"+e+"` ")+"function. Please return a value or `null`.")}catch(c){return{type:_e.error,result:c}}finally{l&&t.signal.removeEventListener("abort",l)}return a}async function Rw(e){let{result:t,type:r}=e;if(lg(t)){let h;try{let f=t.headers.get("Content-Type");f&&/\bapplication\/json\b/.test(f)?t.body==null?h=null:h=await t.json():h=await t.text()}catch(f){return{type:_e.error,error:f}}return r===_e.error?{type:_e.error,error:new Oo(t.status,t.statusText,h),statusCode:t.status,headers:t.headers}:{type:_e.data,data:h,statusCode:t.status,headers:t.headers}}if(r===_e.error){if(qh(t)){var n,s;if(t.data instanceof Error){var i,a;return{type:_e.error,error:t.data,statusCode:(i=t.init)==null?void 0:i.status,headers:(a=t.init)!=null&&a.headers?new Headers(t.init.headers):void 0}}return{type:_e.error,error:new Oo(((n=t.init)==null?void 0:n.status)||500,void 0,t.data),statusCode:Qi(t)?t.status:void 0,headers:(s=t.init)!=null&&s.headers?new Headers(t.init.headers):void 0}}return{type:_e.error,error:t,statusCode:Qi(t)?t.status:void 0}}if($w(t)){var l,u;return{type:_e.deferred,deferredData:t,statusCode:(l=t.init)==null?void 0:l.status,headers:((u=t.init)==null?void 0:u.headers)&&new Headers(t.init.headers)}}if(qh(t)){var c,d;return{type:_e.data,data:t.data,statusCode:(c=t.init)==null?void 0:c.status,headers:(d=t.init)!=null&&d.headers?new Headers(t.init.headers):void 0}}return{type:_e.data,data:t}}function Iw(e,t,r,n,s,i){let a=e.headers.get("Location");if(de(a,"Redirects returned/thrown from loaders/actions must have a Location header"),!ad.test(a)){let l=n.slice(0,n.findIndex(u=>u.route.id===r)+1);a=qu(new URL(t.url),l,s,!0,a,i),e.headers.set("Location",a)}return e}function Uh(e,t,r){if(ad.test(e)){let n=e,s=n.startsWith("//")?new URL(t.protocol+n):new URL(n),i=Rr(s.pathname,r)!=null;if(s.origin===t.origin&&i)return s.pathname+s.search+s.hash}return e}function Yn(e,t,r,n){let s=e.createURL(og(t)).toString(),i={signal:r};if(n&&tr(n.formMethod)){let{formMethod:a,formEncType:l}=n;i.method=a.toUpperCase(),l==="application/json"?(i.headers=new Headers({"Content-Type":l}),i.body=JSON.stringify(n.json)):l==="text/plain"?i.body=n.text:l==="application/x-www-form-urlencoded"&&n.formData?i.body=Ku(n.formData):i.body=n.formData}return new Request(s,i)}function Ku(e){let t=new URLSearchParams;for(let[r,n]of e.entries())t.append(r,typeof n=="string"?n:n.name);return t}function Fh(e){let t=new FormData;for(let[r,n]of e.entries())t.append(r,n);return t}function Aw(e,t,r,n,s){let i={},a=null,l,u=!1,c={},d=r&&Ct(r[1])?r[1].error:void 0;return e.forEach(h=>{if(!(h.route.id in t))return;let f=h.route.id,m=t[f];if(de(!On(m),"Cannot handle redirect results in processLoaderData"),Ct(m)){let x=m.error;d!==void 0&&(x=d,d=void 0),a=a||{};{let g=kn(e,f);a[g.route.id]==null&&(a[g.route.id]=x)}i[f]=void 0,u||(u=!0,l=Qi(m.error)?m.error.status:500),m.headers&&(c[f]=m.headers)}else Jr(m)?(n.set(f,m.deferredData),i[f]=m.deferredData.data,m.statusCode!=null&&m.statusCode!==200&&!u&&(l=m.statusCode),m.headers&&(c[f]=m.headers)):(i[f]=m.data,m.statusCode&&m.statusCode!==200&&!u&&(l=m.statusCode),m.headers&&(c[f]=m.headers))}),d!==void 0&&r&&(a={[r[0]]:d},i[r[0]]=void 0),{loaderData:i,errors:a,statusCode:l||200,loaderHeaders:c}}function zh(e,t,r,n,s,i,a){let{loaderData:l,errors:u}=Aw(t,r,n,a);return s.forEach(c=>{let{key:d,match:h,controller:f}=c,m=i[d];if(de(m,"Did not find corresponding fetcher result"),!(f&&f.signal.aborted))if(Ct(m)){let x=kn(e.matches,h==null?void 0:h.route.id);u&&u[x.route.id]||(u=Oe({},u,{[x.route.id]:m.error})),e.fetchers.delete(d)}else if(On(m))de(!1,"Unhandled fetcher revalidation redirect");else if(Jr(m))de(!1,"Unhandled fetcher deferred data");else{let x=Ur(m.data);e.fetchers.set(d,x)}}),{loaderData:l,errors:u}}function Bh(e,t,r,n){let s=Oe({},t);for(let i of r){let a=i.route.id;if(t.hasOwnProperty(a)?t[a]!==void 0&&(s[a]=t[a]):e[a]!==void 0&&i.route.loader&&(s[a]=e[a]),n&&n.hasOwnProperty(a))break}return s}function Vh(e){return e?Ct(e[1])?{actionData:{}}:{actionData:{[e[0]]:e[1].data}}:{}}function kn(e,t){return(t?e.slice(0,e.findIndex(n=>n.route.id===t)+1):[...e]).reverse().find(n=>n.route.hasErrorBoundary===!0)||e[0]}function Wh(e){let t=e.length===1?e[0]:e.find(r=>r.index||!r.path||r.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:t}],route:t}}function wt(e,t){let{pathname:r,routeId:n,method:s,type:i,message:a}=t===void 0?{}:t,l="Unknown Server Error",u="Unknown @remix-run/router error";return e===400?(l="Bad Request",s&&r&&n?u="You made a "+s+' request to "'+r+'" but '+('did not provide a `loader` for route "'+n+'", ')+"so there is no way to handle the request.":i==="defer-action"?u="defer() is not supported in actions":i==="invalid-body"&&(u="Unable to encode submission body")):e===403?(l="Forbidden",u='Route "'+n+'" does not match URL "'+r+'"'):e===404?(l="Not Found",u='No route matches URL "'+r+'"'):e===405&&(l="Method Not Allowed",s&&r&&n?u="You made a "+s.toUpperCase()+' request to "'+r+'" but '+('did not provide an `action` for route "'+n+'", ')+"so there is no way to handle the request.":s&&(u='Invalid request method "'+s.toUpperCase()+'"')),new Oo(e||500,l,new Error(u),!0)}function La(e){let t=Object.entries(e);for(let r=t.length-1;r>=0;r--){let[n,s]=t[r];if(On(s))return{key:n,result:s}}}function og(e){let t=typeof e=="string"?dn(e):e;return zn(Oe({},t,{hash:""}))}function Lw(e,t){return e.pathname!==t.pathname||e.search!==t.search?!1:e.hash===""?t.hash!=="":e.hash===t.hash?!0:t.hash!==""}function Dw(e){return lg(e.result)&&_w.has(e.result.status)}function Jr(e){return e.type===_e.deferred}function Ct(e){return e.type===_e.error}function On(e){return(e&&e.type)===_e.redirect}function qh(e){return typeof e=="object"&&e!=null&&"type"in e&&"data"in e&&"init"in e&&e.type==="DataWithResponseInit"}function $w(e){let t=e;return t&&typeof t=="object"&&typeof t.data=="object"&&typeof t.subscribe=="function"&&typeof t.cancel=="function"&&typeof t.resolveData=="function"}function lg(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.headers=="object"&&typeof e.body<"u"}function Mw(e){return xw.has(e.toLowerCase())}function tr(e){return yw.has(e.toLowerCase())}async function Uw(e,t,r,n,s){let i=Object.entries(t);for(let a=0;a<i.length;a++){let[l,u]=i[a],c=e.find(f=>(f==null?void 0:f.route.id)===l);if(!c)continue;let d=n.find(f=>f.route.id===c.route.id),h=d!=null&&!ig(d,c)&&(s&&s[c.route.id])!==void 0;Jr(u)&&h&&await od(u,r,!1).then(f=>{f&&(t[l]=f)})}}async function Fw(e,t,r){for(let n=0;n<r.length;n++){let{key:s,routeId:i,controller:a}=r[n],l=t[s];e.find(c=>(c==null?void 0:c.route.id)===i)&&Jr(l)&&(de(a,"Expected an AbortController for revalidating fetcher deferred result"),await od(l,a.signal,!0).then(c=>{c&&(t[s]=c)}))}}async function od(e,t,r){if(r===void 0&&(r=!1),!await e.deferredData.resolveData(t)){if(r)try{return{type:_e.data,data:e.deferredData.unwrappedData}}catch(s){return{type:_e.error,error:s}}return{type:_e.data,data:e.deferredData.data}}}function ld(e){return new URLSearchParams(e).getAll("index").some(t=>t==="")}function yi(e,t){let r=typeof t=="string"?dn(t).search:t.search;if(e[e.length-1].route.index&&ld(r||""))return e[e.length-1];let n=rg(e);return n[n.length-1]}function Hh(e){let{formMethod:t,formAction:r,formEncType:n,text:s,formData:i,json:a}=e;if(!(!t||!r||!n)){if(s!=null)return{formMethod:t,formAction:r,formEncType:n,formData:void 0,json:void 0,text:s};if(i!=null)return{formMethod:t,formAction:r,formEncType:n,formData:i,json:void 0,text:void 0};if(a!==void 0)return{formMethod:t,formAction:r,formEncType:n,formData:void 0,json:a,text:void 0}}}function Ul(e,t){return t?{state:"loading",location:e,formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text}:{state:"loading",location:e,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function zw(e,t){return{state:"submitting",location:e,formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text}}function di(e,t){return e?{state:"loading",formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text,data:t}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:t}}function Bw(e,t){return{state:"submitting",formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text,data:t?t.data:void 0}}function Ur(e){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:e}}function Vw(e,t){try{let r=e.sessionStorage.getItem(sg);if(r){let n=JSON.parse(r);for(let[s,i]of Object.entries(n||{}))i&&Array.isArray(i)&&t.set(s,new Set(i||[]))}}catch{}}function Ww(e,t){if(t.size>0){let r={};for(let[n,s]of t)r[n]=[...s];try{e.sessionStorage.setItem(sg,JSON.stringify(r))}catch(n){Os(!1,"Failed to save applied view transitions in sessionStorage ("+n+").")}}}/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ro(){return Ro=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ro.apply(this,arguments)}const aa=w.createContext(null),ud=w.createContext(null),Ar=w.createContext(null),cd=w.createContext(null),vr=w.createContext({outlet:null,matches:[],isDataRoute:!1}),ug=w.createContext(null);function qw(e,t){let{relative:r}=t===void 0?{}:t;Us()||de(!1);let{basename:n,navigator:s}=w.useContext(Ar),{hash:i,pathname:a,search:l}=sl(e,{relative:r}),u=a;return n!=="/"&&(u=a==="/"?n:Nr([n,a])),s.createHref({pathname:u,search:l,hash:i})}function Us(){return w.useContext(cd)!=null}function Fs(){return Us()||de(!1),w.useContext(cd).location}function cg(e){w.useContext(Ar).static||w.useLayoutEffect(e)}function oa(){let{isDataRoute:e}=w.useContext(vr);return e?ax():Hw()}function Hw(){Us()||de(!1);let e=w.useContext(aa),{basename:t,future:r,navigator:n}=w.useContext(Ar),{matches:s}=w.useContext(vr),{pathname:i}=Fs(),a=JSON.stringify(rl(s,r.v7_relativeSplatPath)),l=w.useRef(!1);return cg(()=>{l.current=!0}),w.useCallback(function(c,d){if(d===void 0&&(d={}),!l.current)return;if(typeof c=="number"){n.go(c);return}let h=nl(c,JSON.parse(a),i,d.relative==="path");e==null&&t!=="/"&&(h.pathname=h.pathname==="/"?t:Nr([t,h.pathname])),(d.replace?n.replace:n.push)(h,d.state,d)},[t,n,a,i,e])}const Kw=w.createContext(null);function Gw(e){let t=w.useContext(vr).outlet;return t&&w.createElement(Kw.Provider,{value:e},t)}function Jw(){let{matches:e}=w.useContext(vr),t=e[e.length-1];return t?t.params:{}}function sl(e,t){let{relative:r}=t===void 0?{}:t,{future:n}=w.useContext(Ar),{matches:s}=w.useContext(vr),{pathname:i}=Fs(),a=JSON.stringify(rl(s,n.v7_relativeSplatPath));return w.useMemo(()=>nl(e,JSON.parse(a),i,r==="path"),[e,a,i,r])}function Qw(e,t,r,n){Us()||de(!1);let{navigator:s}=w.useContext(Ar),{matches:i}=w.useContext(vr),a=i[i.length-1],l=a?a.params:{};a&&a.pathname;let u=a?a.pathnameBase:"/";a&&a.route;let c=Fs(),d;d=c;let h=d.pathname||"/",f=h;if(u!=="/"){let g=u.replace(/^\//,"").split("/");f="/"+h.replace(/^\//,"").split("/").slice(g.length).join("/")}let m=Sn(e,{pathname:f});return tx(m&&m.map(g=>Object.assign({},g,{params:Object.assign({},l,g.params),pathname:Nr([u,s.encodeLocation?s.encodeLocation(g.pathname).pathname:g.pathname]),pathnameBase:g.pathnameBase==="/"?u:Nr([u,s.encodeLocation?s.encodeLocation(g.pathnameBase).pathname:g.pathnameBase])})),i,r,n)}function Yw(){let e=ix(),t=Qi(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return w.createElement(w.Fragment,null,w.createElement("h2",null,"Unexpected Application Error!"),w.createElement("h3",{style:{fontStyle:"italic"}},t),r?w.createElement("pre",{style:s},r):null,null)}const Xw=w.createElement(Yw,null);class Zw extends w.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,r){return r.location!==t.location||r.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:r.error,location:r.location,revalidation:t.revalidation||r.revalidation}}componentDidCatch(t,r){console.error("React Router caught the following error during render",t,r)}render(){return this.state.error!==void 0?w.createElement(vr.Provider,{value:this.props.routeContext},w.createElement(ug.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function ex(e){let{routeContext:t,match:r,children:n}=e,s=w.useContext(aa);return s&&s.static&&s.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=r.route.id),w.createElement(vr.Provider,{value:t},n)}function tx(e,t,r,n){var s;if(t===void 0&&(t=[]),r===void 0&&(r=null),n===void 0&&(n=null),e==null){var i;if(!r)return null;if(r.errors)e=r.matches;else if((i=n)!=null&&i.v7_partialHydration&&t.length===0&&!r.initialized&&r.matches.length>0)e=r.matches;else return null}let a=e,l=(s=r)==null?void 0:s.errors;if(l!=null){let d=a.findIndex(h=>h.route.id&&(l==null?void 0:l[h.route.id])!==void 0);d>=0||de(!1),a=a.slice(0,Math.min(a.length,d+1))}let u=!1,c=-1;if(r&&n&&n.v7_partialHydration)for(let d=0;d<a.length;d++){let h=a[d];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(c=d),h.route.id){let{loaderData:f,errors:m}=r,x=h.route.loader&&f[h.route.id]===void 0&&(!m||m[h.route.id]===void 0);if(h.route.lazy||x){u=!0,c>=0?a=a.slice(0,c+1):a=[a[0]];break}}}return a.reduceRight((d,h,f)=>{let m,x=!1,g=null,_=null;r&&(m=l&&h.route.id?l[h.route.id]:void 0,g=h.route.errorElement||Xw,u&&(c<0&&f===0?(ox("route-fallback"),x=!0,_=null):c===f&&(x=!0,_=h.route.hydrateFallbackElement||null)));let v=t.concat(a.slice(0,f+1)),p=()=>{let y;return m?y=g:x?y=_:h.route.Component?y=w.createElement(h.route.Component,null):h.route.element?y=h.route.element:y=d,w.createElement(ex,{match:h,routeContext:{outlet:d,matches:v,isDataRoute:r!=null},children:y})};return r&&(h.route.ErrorBoundary||h.route.errorElement||f===0)?w.createElement(Zw,{location:r.location,revalidation:r.revalidation,component:g,error:m,children:p(),routeContext:{outlet:null,matches:v,isDataRoute:!0}}):p()},null)}var dg=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(dg||{}),hg=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(hg||{});function rx(e){let t=w.useContext(aa);return t||de(!1),t}function nx(e){let t=w.useContext(ud);return t||de(!1),t}function sx(e){let t=w.useContext(vr);return t||de(!1),t}function fg(e){let t=sx(),r=t.matches[t.matches.length-1];return r.route.id||de(!1),r.route.id}function ix(){var e;let t=w.useContext(ug),r=nx(hg.UseRouteError),n=fg();return t!==void 0?t:(e=r.errors)==null?void 0:e[n]}function ax(){let{router:e}=rx(dg.UseNavigateStable),t=fg(),r=w.useRef(!1);return cg(()=>{r.current=!0}),w.useCallback(function(s,i){i===void 0&&(i={}),r.current&&(typeof s=="number"?e.navigate(s):e.navigate(s,Ro({fromRouteId:t},i)))},[e,t])}const Kh={};function ox(e,t,r){Kh[e]||(Kh[e]=!0)}function lx(e,t){e==null||e.v7_startTransition,(e==null?void 0:e.v7_relativeSplatPath)===void 0&&(!t||t.v7_relativeSplatPath),t&&(t.v7_fetcherPersist,t.v7_normalizeFormMethod,t.v7_partialHydration,t.v7_skipActionErrorRevalidation)}function Rn(e){let{to:t,replace:r,state:n,relative:s}=e;Us()||de(!1);let{future:i,static:a}=w.useContext(Ar),{matches:l}=w.useContext(vr),{pathname:u}=Fs(),c=oa(),d=nl(t,rl(l,i.v7_relativeSplatPath),u,s==="path"),h=JSON.stringify(d);return w.useEffect(()=>c(JSON.parse(h),{replace:r,state:n,relative:s}),[c,h,s,r,n]),null}function la(e){return Gw(e.context)}function ux(e){let{basename:t="/",children:r=null,location:n,navigationType:s=Ge.Pop,navigator:i,static:a=!1,future:l}=e;Us()&&de(!1);let u=t.replace(/^\/*/,"/"),c=w.useMemo(()=>({basename:u,navigator:i,static:a,future:Ro({v7_relativeSplatPath:!1},l)}),[u,l,i,a]);typeof n=="string"&&(n=dn(n));let{pathname:d="/",search:h="",hash:f="",state:m=null,key:x="default"}=n,g=w.useMemo(()=>{let _=Rr(d,u);return _==null?null:{location:{pathname:_,search:h,hash:f,state:m,key:x},navigationType:s}},[u,d,h,f,m,x,s]);return g==null?null:w.createElement(Ar.Provider,{value:c},w.createElement(cd.Provider,{children:r,value:g}))}new Promise(()=>{});function cx(e){let t={hasErrorBoundary:e.ErrorBoundary!=null||e.errorElement!=null};return e.Component&&Object.assign(t,{element:w.createElement(e.Component),Component:void 0}),e.HydrateFallback&&Object.assign(t,{hydrateFallbackElement:w.createElement(e.HydrateFallback),HydrateFallback:void 0}),e.ErrorBoundary&&Object.assign(t,{errorElement:w.createElement(e.ErrorBoundary),ErrorBoundary:void 0}),t}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Rs(){return Rs=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Rs.apply(this,arguments)}function pg(e,t){if(e==null)return{};var r={},n=Object.keys(e),s,i;for(i=0;i<n.length;i++)s=n[i],!(t.indexOf(s)>=0)&&(r[s]=e[s]);return r}function dx(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function hx(e,t){return e.button===0&&(!t||t==="_self")&&!dx(e)}const fx=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],px=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],mx="6";try{window.__reactRouterVersion=mx}catch{}function gx(e,t){return kw({basename:void 0,future:Rs({},void 0,{v7_prependBasename:!0}),history:J0({window:void 0}),hydrationData:vx(),routes:e,mapRouteProperties:cx,dataStrategy:void 0,patchRoutesOnNavigation:void 0,window:void 0}).initialize()}function vx(){var e;let t=(e=window)==null?void 0:e.__staticRouterHydrationData;return t&&t.errors&&(t=Rs({},t,{errors:yx(t.errors)})),t}function yx(e){if(!e)return null;let t=Object.entries(e),r={};for(let[n,s]of t)if(s&&s.__type==="RouteErrorResponse")r[n]=new Oo(s.status,s.statusText,s.data,s.internal===!0);else if(s&&s.__type==="Error"){if(s.__subType){let i=window[s.__subType];if(typeof i=="function")try{let a=new i(s.message);a.stack="",r[n]=a}catch{}}if(r[n]==null){let i=new Error(s.message);i.stack="",r[n]=i}}else r[n]=s;return r}const mg=w.createContext({isTransitioning:!1}),wx=w.createContext(new Map),xx="startTransition",Gh=Dv[xx],_x="flushSync",Jh=G0[_x];function bx(e){Gh?Gh(e):e()}function hi(e){Jh?Jh(e):e()}let jx=class{constructor(){this.status="pending",this.promise=new Promise((t,r)=>{this.resolve=n=>{this.status==="pending"&&(this.status="resolved",t(n))},this.reject=n=>{this.status==="pending"&&(this.status="rejected",r(n))}})}};function Sx(e){let{fallbackElement:t,router:r,future:n}=e,[s,i]=w.useState(r.state),[a,l]=w.useState(),[u,c]=w.useState({isTransitioning:!1}),[d,h]=w.useState(),[f,m]=w.useState(),[x,g]=w.useState(),_=w.useRef(new Map),{v7_startTransition:v}=n||{},p=w.useCallback(I=>{v?bx(I):I()},[v]),y=w.useCallback((I,z)=>{let{deletedFetchers:L,flushSync:ne,viewTransitionOpts:O}=z;I.fetchers.forEach((M,oe)=>{M.data!==void 0&&_.current.set(oe,M.data)}),L.forEach(M=>_.current.delete(M));let J=r.window==null||r.window.document==null||typeof r.window.document.startViewTransition!="function";if(!O||J){ne?hi(()=>i(I)):p(()=>i(I));return}if(ne){hi(()=>{f&&(d&&d.resolve(),f.skipTransition()),c({isTransitioning:!0,flushSync:!0,currentLocation:O.currentLocation,nextLocation:O.nextLocation})});let M=r.window.document.startViewTransition(()=>{hi(()=>i(I))});M.finished.finally(()=>{hi(()=>{h(void 0),m(void 0),l(void 0),c({isTransitioning:!1})})}),hi(()=>m(M));return}f?(d&&d.resolve(),f.skipTransition(),g({state:I,currentLocation:O.currentLocation,nextLocation:O.nextLocation})):(l(I),c({isTransitioning:!0,flushSync:!1,currentLocation:O.currentLocation,nextLocation:O.nextLocation}))},[r.window,f,d,_,p]);w.useLayoutEffect(()=>r.subscribe(y),[r,y]),w.useEffect(()=>{u.isTransitioning&&!u.flushSync&&h(new jx)},[u]),w.useEffect(()=>{if(d&&a&&r.window){let I=a,z=d.promise,L=r.window.document.startViewTransition(async()=>{p(()=>i(I)),await z});L.finished.finally(()=>{h(void 0),m(void 0),l(void 0),c({isTransitioning:!1})}),m(L)}},[p,a,d,r.window]),w.useEffect(()=>{d&&a&&s.location.key===a.location.key&&d.resolve()},[d,f,s.location,a]),w.useEffect(()=>{!u.isTransitioning&&x&&(l(x.state),c({isTransitioning:!0,flushSync:!1,currentLocation:x.currentLocation,nextLocation:x.nextLocation}),g(void 0))},[u.isTransitioning,x]),w.useEffect(()=>{},[]);let j=w.useMemo(()=>({createHref:r.createHref,encodeLocation:r.encodeLocation,go:I=>r.navigate(I),push:(I,z,L)=>r.navigate(I,{state:z,preventScrollReset:L==null?void 0:L.preventScrollReset}),replace:(I,z,L)=>r.navigate(I,{replace:!0,state:z,preventScrollReset:L==null?void 0:L.preventScrollReset})}),[r]),N=r.basename||"/",P=w.useMemo(()=>({router:r,navigator:j,static:!1,basename:N}),[r,j,N]),b=w.useMemo(()=>({v7_relativeSplatPath:r.future.v7_relativeSplatPath}),[r.future.v7_relativeSplatPath]);return w.useEffect(()=>lx(n,r.future),[n,r.future]),w.createElement(w.Fragment,null,w.createElement(aa.Provider,{value:P},w.createElement(ud.Provider,{value:s},w.createElement(wx.Provider,{value:_.current},w.createElement(mg.Provider,{value:u},w.createElement(ux,{basename:N,location:s.location,navigationType:s.historyAction,navigator:j,future:b},s.initialized||r.future.v7_partialHydration?w.createElement(kx,{routes:r.routes,future:r.future,state:s}):t))))),null)}const kx=w.memo(Ex);function Ex(e){let{routes:t,future:r,state:n}=e;return Qw(t,void 0,n,r)}const Nx=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Cx=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,zs=w.forwardRef(function(t,r){let{onClick:n,relative:s,reloadDocument:i,replace:a,state:l,target:u,to:c,preventScrollReset:d,viewTransition:h}=t,f=pg(t,fx),{basename:m}=w.useContext(Ar),x,g=!1;if(typeof c=="string"&&Cx.test(c)&&(x=c,Nx))try{let y=new URL(window.location.href),j=c.startsWith("//")?new URL(y.protocol+c):new URL(c),N=Rr(j.pathname,m);j.origin===y.origin&&N!=null?c=N+j.search+j.hash:g=!0}catch{}let _=qw(c,{relative:s}),v=Tx(c,{replace:a,state:l,target:u,preventScrollReset:d,relative:s,viewTransition:h});function p(y){n&&n(y),y.defaultPrevented||v(y)}return w.createElement("a",Rs({},f,{href:x||_,onClick:g||i?n:p,ref:r,target:u}))}),Xe=w.forwardRef(function(t,r){let{"aria-current":n="page",caseSensitive:s=!1,className:i="",end:a=!1,style:l,to:u,viewTransition:c,children:d}=t,h=pg(t,px),f=sl(u,{relative:h.relative}),m=Fs(),x=w.useContext(ud),{navigator:g,basename:_}=w.useContext(Ar),v=x!=null&&Ox(f)&&c===!0,p=g.encodeLocation?g.encodeLocation(f).pathname:f.pathname,y=m.pathname,j=x&&x.navigation&&x.navigation.location?x.navigation.location.pathname:null;s||(y=y.toLowerCase(),j=j?j.toLowerCase():null,p=p.toLowerCase()),j&&_&&(j=Rr(j,_)||j);const N=p!=="/"&&p.endsWith("/")?p.length-1:p.length;let P=y===p||!a&&y.startsWith(p)&&y.charAt(N)==="/",b=j!=null&&(j===p||!a&&j.startsWith(p)&&j.charAt(p.length)==="/"),I={isActive:P,isPending:b,isTransitioning:v},z=P?n:void 0,L;typeof i=="function"?L=i(I):L=[i,P?"active":null,b?"pending":null,v?"transitioning":null].filter(Boolean).join(" ");let ne=typeof l=="function"?l(I):l;return w.createElement(zs,Rs({},h,{"aria-current":z,className:L,ref:r,style:ne,to:u,viewTransition:c}),typeof d=="function"?d(I):d)});var Gu;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Gu||(Gu={}));var Qh;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(Qh||(Qh={}));function Px(e){let t=w.useContext(aa);return t||de(!1),t}function Tx(e,t){let{target:r,replace:n,state:s,preventScrollReset:i,relative:a,viewTransition:l}=t===void 0?{}:t,u=oa(),c=Fs(),d=sl(e,{relative:a});return w.useCallback(h=>{if(hx(h,r)){h.preventDefault();let f=n!==void 0?n:zn(c)===zn(d);u(e,{replace:f,state:s,preventScrollReset:i,relative:a,viewTransition:l})}},[c,u,d,n,s,r,e,i,a,l])}function Ox(e,t){t===void 0&&(t={});let r=w.useContext(mg);r==null&&de(!1);let{basename:n}=Px(Gu.useViewTransitionState),s=sl(e,{relative:t.relative});if(!r.isTransitioning)return!1;let i=Rr(r.currentLocation.pathname,n)||r.currentLocation.pathname,a=Rr(r.nextLocation.pathname,n)||r.nextLocation.pathname;return To(s.pathname,a)!=null||To(s.pathname,i)!=null}var Ju=function(e,t){return Ju=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(r[s]=n[s])},Ju(e,t)};function gg(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");Ju(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var Io=function(){return Io=Object.assign||function(t){for(var r,n=1,s=arguments.length;n<s;n++){r=arguments[n];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},Io.apply(this,arguments)};function Bs(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]]);return r}function vg(e,t,r,n){var s=arguments.length,i=s<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(e,t,r,n);else for(var l=e.length-1;l>=0;l--)(a=e[l])&&(i=(s<3?a(i):s>3?a(t,r,i):a(t,r))||i);return s>3&&i&&Object.defineProperty(t,r,i),i}function yg(e,t){return function(r,n){t(r,n,e)}}function wg(e,t,r,n,s,i){function a(v){if(v!==void 0&&typeof v!="function")throw new TypeError("Function expected");return v}for(var l=n.kind,u=l==="getter"?"get":l==="setter"?"set":"value",c=!t&&e?n.static?e:e.prototype:null,d=t||(c?Object.getOwnPropertyDescriptor(c,n.name):{}),h,f=!1,m=r.length-1;m>=0;m--){var x={};for(var g in n)x[g]=g==="access"?{}:n[g];for(var g in n.access)x.access[g]=n.access[g];x.addInitializer=function(v){if(f)throw new TypeError("Cannot add initializers after decoration has completed");i.push(a(v||null))};var _=(0,r[m])(l==="accessor"?{get:d.get,set:d.set}:d[u],x);if(l==="accessor"){if(_===void 0)continue;if(_===null||typeof _!="object")throw new TypeError("Object expected");(h=a(_.get))&&(d.get=h),(h=a(_.set))&&(d.set=h),(h=a(_.init))&&s.unshift(h)}else(h=a(_))&&(l==="field"?s.unshift(h):d[u]=h)}c&&Object.defineProperty(c,n.name,d),f=!0}function xg(e,t,r){for(var n=arguments.length>2,s=0;s<t.length;s++)r=n?t[s].call(e,r):t[s].call(e);return n?r:void 0}function _g(e){return typeof e=="symbol"?e:"".concat(e)}function bg(e,t,r){return typeof t=="symbol"&&(t=t.description?"[".concat(t.description,"]"):""),Object.defineProperty(e,"name",{configurable:!0,value:r?"".concat(r," ",t):t})}function jg(e,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(e,t)}function H(e,t,r,n){function s(i){return i instanceof r?i:new r(function(a){a(i)})}return new(r||(r=Promise))(function(i,a){function l(d){try{c(n.next(d))}catch(h){a(h)}}function u(d){try{c(n.throw(d))}catch(h){a(h)}}function c(d){d.done?i(d.value):s(d.value).then(l,u)}c((n=n.apply(e,t||[])).next())})}function Sg(e,t){var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,s,i,a=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return a.next=l(0),a.throw=l(1),a.return=l(2),typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function l(c){return function(d){return u([c,d])}}function u(c){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(r=0)),r;)try{if(n=1,s&&(i=c[0]&2?s.return:c[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,c[1])).done)return i;switch(s=0,i&&(c=[c[0]&2,i.value]),c[0]){case 0:case 1:i=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,s=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(i=r.trys,!(i=i.length>0&&i[i.length-1])&&(c[0]===6||c[0]===2)){r=0;continue}if(c[0]===3&&(!i||c[1]>i[0]&&c[1]<i[3])){r.label=c[1];break}if(c[0]===6&&r.label<i[1]){r.label=i[1],i=c;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(c);break}i[2]&&r.ops.pop(),r.trys.pop();continue}c=t.call(e,r)}catch(d){c=[6,d],s=0}finally{n=i=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}var il=Object.create?function(e,t,r,n){n===void 0&&(n=r);var s=Object.getOwnPropertyDescriptor(t,r);(!s||("get"in s?!t.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,s)}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]};function kg(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&il(t,e,r)}function Ao(e){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function dd(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),s,i=[],a;try{for(;(t===void 0||t-- >0)&&!(s=n.next()).done;)i.push(s.value)}catch(l){a={error:l}}finally{try{s&&!s.done&&(r=n.return)&&r.call(n)}finally{if(a)throw a.error}}return i}function Eg(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(dd(arguments[t]));return e}function Ng(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;for(var n=Array(e),s=0,t=0;t<r;t++)for(var i=arguments[t],a=0,l=i.length;a<l;a++,s++)n[s]=i[a];return n}function Cg(e,t,r){if(r||arguments.length===2)for(var n=0,s=t.length,i;n<s;n++)(i||!(n in t))&&(i||(i=Array.prototype.slice.call(t,0,n)),i[n]=t[n]);return e.concat(i||Array.prototype.slice.call(t))}function Is(e){return this instanceof Is?(this.v=e,this):new Is(e)}function Pg(e,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(e,t||[]),s,i=[];return s=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),l("next"),l("throw"),l("return",a),s[Symbol.asyncIterator]=function(){return this},s;function a(m){return function(x){return Promise.resolve(x).then(m,h)}}function l(m,x){n[m]&&(s[m]=function(g){return new Promise(function(_,v){i.push([m,g,_,v])>1||u(m,g)})},x&&(s[m]=x(s[m])))}function u(m,x){try{c(n[m](x))}catch(g){f(i[0][3],g)}}function c(m){m.value instanceof Is?Promise.resolve(m.value.v).then(d,h):f(i[0][2],m)}function d(m){u("next",m)}function h(m){u("throw",m)}function f(m,x){m(x),i.shift(),i.length&&u(i[0][0],i[0][1])}}function Tg(e){var t,r;return t={},n("next"),n("throw",function(s){throw s}),n("return"),t[Symbol.iterator]=function(){return this},t;function n(s,i){t[s]=e[s]?function(a){return(r=!r)?{value:Is(e[s](a)),done:!1}:i?i(a):a}:i}}function Og(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],r;return t?t.call(e):(e=typeof Ao=="function"?Ao(e):e[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(i){r[i]=e[i]&&function(a){return new Promise(function(l,u){a=e[i](a),s(l,u,a.done,a.value)})}}function s(i,a,l,u){Promise.resolve(u).then(function(c){i({value:c,done:l})},a)}}function Rg(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}var Rx=Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t},Qu=function(e){return Qu=Object.getOwnPropertyNames||function(t){var r=[];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[r.length]=n);return r},Qu(e)};function Ig(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r=Qu(e),n=0;n<r.length;n++)r[n]!=="default"&&il(t,e,r[n]);return Rx(t,e),t}function Ag(e){return e&&e.__esModule?e:{default:e}}function Lg(e,t,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(e):n?n.value:t.get(e)}function Dg(e,t,r,n,s){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!s)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?s.call(e,r):s?s.value=r:t.set(e,r),r}function $g(e,t){if(t===null||typeof t!="object"&&typeof t!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof e=="function"?t===e:e.has(t)}function Mg(e,t,r){if(t!=null){if(typeof t!="object"&&typeof t!="function")throw new TypeError("Object expected.");var n,s;if(r){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");n=t[Symbol.asyncDispose]}if(n===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");n=t[Symbol.dispose],r&&(s=n)}if(typeof n!="function")throw new TypeError("Object not disposable.");s&&(n=function(){try{s.call(this)}catch(i){return Promise.reject(i)}}),e.stack.push({value:t,dispose:n,async:r})}else r&&e.stack.push({async:!0});return t}var Ix=typeof SuppressedError=="function"?SuppressedError:function(e,t,r){var n=new Error(r);return n.name="SuppressedError",n.error=e,n.suppressed=t,n};function Ug(e){function t(i){e.error=e.hasError?new Ix(i,e.error,"An error was suppressed during disposal."):i,e.hasError=!0}var r,n=0;function s(){for(;r=e.stack.pop();)try{if(!r.async&&n===1)return n=0,e.stack.push(r),Promise.resolve().then(s);if(r.dispose){var i=r.dispose.call(r.value);if(r.async)return n|=2,Promise.resolve(i).then(s,function(a){return t(a),s()})}else n|=1}catch(a){t(a)}if(n===1)return e.hasError?Promise.reject(e.error):Promise.resolve();if(e.hasError)throw e.error}return s()}function Fg(e,t){return typeof e=="string"&&/^\.\.?\//.test(e)?e.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(r,n,s,i,a){return n?t?".jsx":".js":s&&(!i||!a)?r:s+i+"."+a.toLowerCase()+"js"}):e}const Ax={__extends:gg,__assign:Io,__rest:Bs,__decorate:vg,__param:yg,__esDecorate:wg,__runInitializers:xg,__propKey:_g,__setFunctionName:bg,__metadata:jg,__awaiter:H,__generator:Sg,__createBinding:il,__exportStar:kg,__values:Ao,__read:dd,__spread:Eg,__spreadArrays:Ng,__spreadArray:Cg,__await:Is,__asyncGenerator:Pg,__asyncDelegator:Tg,__asyncValues:Og,__makeTemplateObject:Rg,__importStar:Ig,__importDefault:Ag,__classPrivateFieldGet:Lg,__classPrivateFieldSet:Dg,__classPrivateFieldIn:$g,__addDisposableResource:Mg,__disposeResources:Ug,__rewriteRelativeImportExtension:Fg},Lx=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:Mg,get __assign(){return Io},__asyncDelegator:Tg,__asyncGenerator:Pg,__asyncValues:Og,__await:Is,__awaiter:H,__classPrivateFieldGet:Lg,__classPrivateFieldIn:$g,__classPrivateFieldSet:Dg,__createBinding:il,__decorate:vg,__disposeResources:Ug,__esDecorate:wg,__exportStar:kg,__extends:gg,__generator:Sg,__importDefault:Ag,__importStar:Ig,__makeTemplateObject:Rg,__metadata:jg,__param:yg,__propKey:_g,__read:dd,__rest:Bs,__rewriteRelativeImportExtension:Fg,__runInitializers:xg,__setFunctionName:bg,__spread:Eg,__spreadArray:Cg,__spreadArrays:Ng,__values:Ao,default:Ax},Symbol.toStringTag,{value:"Module"})),Dx="modulepreload",$x=function(e){return"/"+e},Yh={},Vs=function(t,r,n){let s=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),l=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));s=Promise.allSettled(r.map(u=>{if(u=$x(u),u in Yh)return;Yh[u]=!0;const c=u.endsWith(".css"),d=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${d}`))return;const h=document.createElement("link");if(h.rel=c?"stylesheet":Dx,c||(h.as="script"),h.crossOrigin="",h.href=u,l&&h.setAttribute("nonce",l),document.head.appendChild(h),c)return new Promise((f,m)=>{h.addEventListener("load",f),h.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${u}`)))})}))}function i(a){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=a,window.dispatchEvent(l),!l.defaultPrevented)throw a}return s.then(a=>{for(const l of a||[])l.status==="rejected"&&i(l.reason);return t().catch(i)})},Mx=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>Vs(async()=>{const{default:n}=await Promise.resolve().then(()=>Wn);return{default:n}},void 0).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)};class hd extends Error{constructor(t,r="FunctionsError",n){super(t),this.name=r,this.context=n}}class Xh extends hd{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class Zh extends hd{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class ef extends hd{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var Yu;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(Yu||(Yu={}));class Ux{constructor(t,{headers:r={},customFetch:n,region:s=Yu.Any}={}){this.url=t,this.headers=r,this.region=s,this.fetch=Mx(n)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t){return H(this,arguments,void 0,function*(r,n={}){var s;try{const{headers:i,method:a,body:l,signal:u}=n;let c={},{region:d}=n;d||(d=this.region);const h=new URL(`${this.url}/${r}`);d&&d!=="any"&&(c["x-region"]=d,h.searchParams.set("forceFunctionRegion",d));let f;l&&(i&&!Object.prototype.hasOwnProperty.call(i,"Content-Type")||!i)?typeof Blob<"u"&&l instanceof Blob||l instanceof ArrayBuffer?(c["Content-Type"]="application/octet-stream",f=l):typeof l=="string"?(c["Content-Type"]="text/plain",f=l):typeof FormData<"u"&&l instanceof FormData?f=l:(c["Content-Type"]="application/json",f=JSON.stringify(l)):f=l;const m=yield this.fetch(h.toString(),{method:a||"POST",headers:Object.assign(Object.assign(Object.assign({},c),this.headers),i),body:f,signal:u}).catch(v=>{throw v.name==="AbortError"?v:new Xh(v)}),x=m.headers.get("x-relay-error");if(x&&x==="true")throw new Zh(m);if(!m.ok)throw new ef(m);let g=((s=m.headers.get("Content-Type"))!==null&&s!==void 0?s:"text/plain").split(";")[0].trim(),_;return g==="application/json"?_=yield m.json():g==="application/octet-stream"||g==="application/pdf"?_=yield m.blob():g==="text/event-stream"?_=m:g==="multipart/form-data"?_=yield m.formData():_=yield m.text(),{data:_,error:null,response:m}}catch(i){return i instanceof Error&&i.name==="AbortError"?{data:null,error:new Xh(i)}:{data:null,error:i,response:i instanceof ef||i instanceof Zh?i.context:void 0}}})}}var _t={};const Ws=Ff(Lx);var Da={},$a={},Ma={},Ua={},Fa={},Fx=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},As=Fx();const zx=As.fetch,zg=As.fetch.bind(As),Bg=As.Headers,Bx=As.Request,Vx=As.Response,Wn=Object.freeze(Object.defineProperty({__proto__:null,Headers:Bg,Request:Bx,Response:Vx,default:zg,fetch:zx},Symbol.toStringTag,{value:"Module"})),Wx=Ff(Wn);var za={},tf;function Vg(){if(tf)return za;tf=1,Object.defineProperty(za,"__esModule",{value:!0});class e extends Error{constructor(r){super(r.message),this.name="PostgrestError",this.details=r.details,this.hint=r.hint,this.code=r.code}}return za.default=e,za}var rf;function Wg(){if(rf)return Fa;rf=1,Object.defineProperty(Fa,"__esModule",{value:!0});const e=Ws,t=e.__importDefault(Wx),r=e.__importDefault(Vg());class n{constructor(i){var a,l;this.shouldThrowOnError=!1,this.method=i.method,this.url=i.url,this.headers=new Headers(i.headers),this.schema=i.schema,this.body=i.body,this.shouldThrowOnError=(a=i.shouldThrowOnError)!==null&&a!==void 0?a:!1,this.signal=i.signal,this.isMaybeSingle=(l=i.isMaybeSingle)!==null&&l!==void 0?l:!1,i.fetch?this.fetch=i.fetch:typeof fetch>"u"?this.fetch=t.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(i,a){return this.headers=new Headers(this.headers),this.headers.set(i,a),this}then(i,a){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const l=this.fetch;let u=l(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async c=>{var d,h,f,m;let x=null,g=null,_=null,v=c.status,p=c.statusText;if(c.ok){if(this.method!=="HEAD"){const P=await c.text();P===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((d=this.headers.get("Accept"))===null||d===void 0)&&d.includes("application/vnd.pgrst.plan+text"))?g=P:g=JSON.parse(P))}const j=(h=this.headers.get("Prefer"))===null||h===void 0?void 0:h.match(/count=(exact|planned|estimated)/),N=(f=c.headers.get("content-range"))===null||f===void 0?void 0:f.split("/");j&&N&&N.length>1&&(_=parseInt(N[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(g)&&(g.length>1?(x={code:"PGRST116",details:`Results contain ${g.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},g=null,_=null,v=406,p="Not Acceptable"):g.length===1?g=g[0]:g=null)}else{const j=await c.text();try{x=JSON.parse(j),Array.isArray(x)&&c.status===404&&(g=[],x=null,v=200,p="OK")}catch{c.status===404&&j===""?(v=204,p="No Content"):x={message:j}}if(x&&this.isMaybeSingle&&(!((m=x==null?void 0:x.details)===null||m===void 0)&&m.includes("0 rows"))&&(x=null,v=200,p="OK"),x&&this.shouldThrowOnError)throw new r.default(x)}return{error:x,data:g,count:_,status:v,statusText:p}});return this.shouldThrowOnError||(u=u.catch(c=>{var d,h,f;return{error:{message:`${(d=c==null?void 0:c.name)!==null&&d!==void 0?d:"FetchError"}: ${c==null?void 0:c.message}`,details:`${(h=c==null?void 0:c.stack)!==null&&h!==void 0?h:""}`,hint:"",code:`${(f=c==null?void 0:c.code)!==null&&f!==void 0?f:""}`},data:null,count:null,status:0,statusText:""}})),u.then(i,a)}returns(){return this}overrideTypes(){return this}}return Fa.default=n,Fa}var nf;function qg(){if(nf)return Ua;nf=1,Object.defineProperty(Ua,"__esModule",{value:!0});const t=Ws.__importDefault(Wg());class r extends t.default{select(s){let i=!1;const a=(s??"*").split("").map(l=>/\s/.test(l)&&!i?"":(l==='"'&&(i=!i),l)).join("");return this.url.searchParams.set("select",a),this.headers.append("Prefer","return=representation"),this}order(s,{ascending:i=!0,nullsFirst:a,foreignTable:l,referencedTable:u=l}={}){const c=u?`${u}.order`:"order",d=this.url.searchParams.get(c);return this.url.searchParams.set(c,`${d?`${d},`:""}${s}.${i?"asc":"desc"}${a===void 0?"":a?".nullsfirst":".nullslast"}`),this}limit(s,{foreignTable:i,referencedTable:a=i}={}){const l=typeof a>"u"?"limit":`${a}.limit`;return this.url.searchParams.set(l,`${s}`),this}range(s,i,{foreignTable:a,referencedTable:l=a}={}){const u=typeof l>"u"?"offset":`${l}.offset`,c=typeof l>"u"?"limit":`${l}.limit`;return this.url.searchParams.set(u,`${s}`),this.url.searchParams.set(c,`${i-s+1}`),this}abortSignal(s){return this.signal=s,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:s=!1,verbose:i=!1,settings:a=!1,buffers:l=!1,wal:u=!1,format:c="text"}={}){var d;const h=[s?"analyze":null,i?"verbose":null,a?"settings":null,l?"buffers":null,u?"wal":null].filter(Boolean).join("|"),f=(d=this.headers.get("Accept"))!==null&&d!==void 0?d:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${c}; for="${f}"; options=${h};`),c==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(s){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${s}`),this}}return Ua.default=r,Ua}var sf;function fd(){if(sf)return Ma;sf=1,Object.defineProperty(Ma,"__esModule",{value:!0});const t=Ws.__importDefault(qg());class r extends t.default{eq(s,i){return this.url.searchParams.append(s,`eq.${i}`),this}neq(s,i){return this.url.searchParams.append(s,`neq.${i}`),this}gt(s,i){return this.url.searchParams.append(s,`gt.${i}`),this}gte(s,i){return this.url.searchParams.append(s,`gte.${i}`),this}lt(s,i){return this.url.searchParams.append(s,`lt.${i}`),this}lte(s,i){return this.url.searchParams.append(s,`lte.${i}`),this}like(s,i){return this.url.searchParams.append(s,`like.${i}`),this}likeAllOf(s,i){return this.url.searchParams.append(s,`like(all).{${i.join(",")}}`),this}likeAnyOf(s,i){return this.url.searchParams.append(s,`like(any).{${i.join(",")}}`),this}ilike(s,i){return this.url.searchParams.append(s,`ilike.${i}`),this}ilikeAllOf(s,i){return this.url.searchParams.append(s,`ilike(all).{${i.join(",")}}`),this}ilikeAnyOf(s,i){return this.url.searchParams.append(s,`ilike(any).{${i.join(",")}}`),this}is(s,i){return this.url.searchParams.append(s,`is.${i}`),this}in(s,i){const a=Array.from(new Set(i)).map(l=>typeof l=="string"&&new RegExp("[,()]").test(l)?`"${l}"`:`${l}`).join(",");return this.url.searchParams.append(s,`in.(${a})`),this}contains(s,i){return typeof i=="string"?this.url.searchParams.append(s,`cs.${i}`):Array.isArray(i)?this.url.searchParams.append(s,`cs.{${i.join(",")}}`):this.url.searchParams.append(s,`cs.${JSON.stringify(i)}`),this}containedBy(s,i){return typeof i=="string"?this.url.searchParams.append(s,`cd.${i}`):Array.isArray(i)?this.url.searchParams.append(s,`cd.{${i.join(",")}}`):this.url.searchParams.append(s,`cd.${JSON.stringify(i)}`),this}rangeGt(s,i){return this.url.searchParams.append(s,`sr.${i}`),this}rangeGte(s,i){return this.url.searchParams.append(s,`nxl.${i}`),this}rangeLt(s,i){return this.url.searchParams.append(s,`sl.${i}`),this}rangeLte(s,i){return this.url.searchParams.append(s,`nxr.${i}`),this}rangeAdjacent(s,i){return this.url.searchParams.append(s,`adj.${i}`),this}overlaps(s,i){return typeof i=="string"?this.url.searchParams.append(s,`ov.${i}`):this.url.searchParams.append(s,`ov.{${i.join(",")}}`),this}textSearch(s,i,{config:a,type:l}={}){let u="";l==="plain"?u="pl":l==="phrase"?u="ph":l==="websearch"&&(u="w");const c=a===void 0?"":`(${a})`;return this.url.searchParams.append(s,`${u}fts${c}.${i}`),this}match(s){return Object.entries(s).forEach(([i,a])=>{this.url.searchParams.append(i,`eq.${a}`)}),this}not(s,i,a){return this.url.searchParams.append(s,`not.${i}.${a}`),this}or(s,{foreignTable:i,referencedTable:a=i}={}){const l=a?`${a}.or`:"or";return this.url.searchParams.append(l,`(${s})`),this}filter(s,i,a){return this.url.searchParams.append(s,`${i}.${a}`),this}}return Ma.default=r,Ma}var af;function Hg(){if(af)return $a;af=1,Object.defineProperty($a,"__esModule",{value:!0});const t=Ws.__importDefault(fd());class r{constructor(s,{headers:i={},schema:a,fetch:l}){this.url=s,this.headers=new Headers(i),this.schema=a,this.fetch=l}select(s,i){const{head:a=!1,count:l}=i??{},u=a?"HEAD":"GET";let c=!1;const d=(s??"*").split("").map(h=>/\s/.test(h)&&!c?"":(h==='"'&&(c=!c),h)).join("");return this.url.searchParams.set("select",d),l&&this.headers.append("Prefer",`count=${l}`),new t.default({method:u,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(s,{count:i,defaultToNull:a=!0}={}){var l;const u="POST";if(i&&this.headers.append("Prefer",`count=${i}`),a||this.headers.append("Prefer","missing=default"),Array.isArray(s)){const c=s.reduce((d,h)=>d.concat(Object.keys(h)),[]);if(c.length>0){const d=[...new Set(c)].map(h=>`"${h}"`);this.url.searchParams.set("columns",d.join(","))}}return new t.default({method:u,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:(l=this.fetch)!==null&&l!==void 0?l:fetch})}upsert(s,{onConflict:i,ignoreDuplicates:a=!1,count:l,defaultToNull:u=!0}={}){var c;const d="POST";if(this.headers.append("Prefer",`resolution=${a?"ignore":"merge"}-duplicates`),i!==void 0&&this.url.searchParams.set("on_conflict",i),l&&this.headers.append("Prefer",`count=${l}`),u||this.headers.append("Prefer","missing=default"),Array.isArray(s)){const h=s.reduce((f,m)=>f.concat(Object.keys(m)),[]);if(h.length>0){const f=[...new Set(h)].map(m=>`"${m}"`);this.url.searchParams.set("columns",f.join(","))}}return new t.default({method:d,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:(c=this.fetch)!==null&&c!==void 0?c:fetch})}update(s,{count:i}={}){var a;const l="PATCH";return i&&this.headers.append("Prefer",`count=${i}`),new t.default({method:l,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}delete({count:s}={}){var i;const a="DELETE";return s&&this.headers.append("Prefer",`count=${s}`),new t.default({method:a,url:this.url,headers:this.headers,schema:this.schema,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch})}}return $a.default=r,$a}var of;function qx(){if(of)return Da;of=1,Object.defineProperty(Da,"__esModule",{value:!0});const e=Ws,t=e.__importDefault(Hg()),r=e.__importDefault(fd());class n{constructor(i,{headers:a={},schema:l,fetch:u}={}){this.url=i,this.headers=new Headers(a),this.schemaName=l,this.fetch=u}from(i){const a=new URL(`${this.url}/${i}`);return new t.default(a,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(i){return new n(this.url,{headers:this.headers,schema:i,fetch:this.fetch})}rpc(i,a={},{head:l=!1,get:u=!1,count:c}={}){var d;let h;const f=new URL(`${this.url}/rpc/${i}`);let m;l||u?(h=l?"HEAD":"GET",Object.entries(a).filter(([g,_])=>_!==void 0).map(([g,_])=>[g,Array.isArray(_)?`{${_.join(",")}}`:`${_}`]).forEach(([g,_])=>{f.searchParams.append(g,_)})):(h="POST",m=a);const x=new Headers(this.headers);return c&&x.set("Prefer",`count=${c}`),new r.default({method:h,url:f,headers:x,schema:this.schemaName,body:m,fetch:(d=this.fetch)!==null&&d!==void 0?d:fetch})}}return Da.default=n,Da}Object.defineProperty(_t,"__esModule",{value:!0});_t.PostgrestError=_t.PostgrestBuilder=_t.PostgrestTransformBuilder=_t.PostgrestFilterBuilder=_t.PostgrestQueryBuilder=_t.PostgrestClient=void 0;const qs=Ws,Kg=qs.__importDefault(qx());_t.PostgrestClient=Kg.default;const Gg=qs.__importDefault(Hg());_t.PostgrestQueryBuilder=Gg.default;const Jg=qs.__importDefault(fd());_t.PostgrestFilterBuilder=Jg.default;const Qg=qs.__importDefault(qg());_t.PostgrestTransformBuilder=Qg.default;const Yg=qs.__importDefault(Wg());_t.PostgrestBuilder=Yg.default;const Xg=qs.__importDefault(Vg());_t.PostgrestError=Xg.default;var Hx=_t.default={PostgrestClient:Kg.default,PostgrestQueryBuilder:Gg.default,PostgrestFilterBuilder:Jg.default,PostgrestTransformBuilder:Qg.default,PostgrestBuilder:Yg.default,PostgrestError:Xg.default};const{PostgrestClient:Kx,PostgrestQueryBuilder:SS,PostgrestFilterBuilder:kS,PostgrestTransformBuilder:ES,PostgrestBuilder:NS,PostgrestError:CS}=Hx;class Gx{static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const r=process.versions;if(r&&r.node){const n=r.node,s=parseInt(n.replace(/^v/,"").split(".")[0]);return s>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${s} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${s} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let r=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(r+=`

Suggested solution: ${t.workaround}`),new Error(r)}static createWebSocket(t,r){const n=this.getWebSocketConstructor();return new n(t,r)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const Jx="2.76.1",Qx=`realtime-js/${Jx}`,Yx="1.0.0",Xu=1e4,Xx=1e3,Zx=100;var Pi;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(Pi||(Pi={}));var Ye;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(Ye||(Ye={}));var rr;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(rr||(rr={}));var Zu;(function(e){e.websocket="websocket"})(Zu||(Zu={}));var En;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(En||(En={}));class e_{constructor(){this.HEADER_LENGTH=1}decode(t,r){return t.constructor===ArrayBuffer?r(this._binaryDecode(t)):r(typeof t=="string"?JSON.parse(t):{})}_binaryDecode(t){const r=new DataView(t),n=new TextDecoder;return this._decodeBroadcast(t,r,n)}_decodeBroadcast(t,r,n){const s=r.getUint8(1),i=r.getUint8(2);let a=this.HEADER_LENGTH+2;const l=n.decode(t.slice(a,a+s));a=a+s;const u=n.decode(t.slice(a,a+i));a=a+i;const c=JSON.parse(n.decode(t.slice(a,t.byteLength)));return{ref:null,topic:l,event:u,payload:c}}}class Zg{constructor(t,r){this.callback=t,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Ee;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(Ee||(Ee={}));const lf=(e,t,r={})=>{var n;const s=(n=r.skipTypes)!==null&&n!==void 0?n:[];return t?Object.keys(t).reduce((i,a)=>(i[a]=t_(a,e,t,s),i),{}):{}},t_=(e,t,r,n)=>{const s=t.find(l=>l.name===e),i=s==null?void 0:s.type,a=r[e];return i&&!n.includes(i)?ev(i,a):ec(a)},ev=(e,t)=>{if(e.charAt(0)==="_"){const r=e.slice(1,e.length);return i_(t,r)}switch(e){case Ee.bool:return r_(t);case Ee.float4:case Ee.float8:case Ee.int2:case Ee.int4:case Ee.int8:case Ee.numeric:case Ee.oid:return n_(t);case Ee.json:case Ee.jsonb:return s_(t);case Ee.timestamp:return a_(t);case Ee.abstime:case Ee.date:case Ee.daterange:case Ee.int4range:case Ee.int8range:case Ee.money:case Ee.reltime:case Ee.text:case Ee.time:case Ee.timestamptz:case Ee.timetz:case Ee.tsrange:case Ee.tstzrange:return ec(t);default:return ec(t)}},ec=e=>e,r_=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},n_=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},s_=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},i_=(e,t)=>{if(typeof e!="string")return e;const r=e.length-1,n=e[r];if(e[0]==="{"&&n==="}"){let i;const a=e.slice(1,r);try{i=JSON.parse("["+a+"]")}catch{i=a?a.split(","):[]}return i.map(l=>ev(t,l))}return e},a_=e=>typeof e=="string"?e.replace(" ","T"):e,tv=e=>{const t=new URL(e);return t.protocol=t.protocol.replace(/^ws/i,"http"),t.pathname=t.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),t.pathname===""||t.pathname==="/"?t.pathname="/api/broadcast":t.pathname=t.pathname+"/api/broadcast",t.href};class Fl{constructor(t,r,n={},s=Xu){this.channel=t,this.event=r,this.payload=n,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,r){var n;return this._hasReceived(t)&&r((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:t,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:r}){this.recHooks.filter(n=>n.status===t).forEach(n=>n.callback(r))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var uf;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(uf||(uf={}));class Ti{constructor(t,r){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},s=>{const{onJoin:i,onLeave:a,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Ti.syncState(this.state,s,i,a),this.pendingDiffs.forEach(u=>{this.state=Ti.syncDiff(this.state,u,i,a)}),this.pendingDiffs=[],l()}),this.channel._on(n.diff,{},s=>{const{onJoin:i,onLeave:a,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=Ti.syncDiff(this.state,s,i,a),l())}),this.onJoin((s,i,a)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:i,newPresences:a})}),this.onLeave((s,i,a)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:i,leftPresences:a})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,r,n,s){const i=this.cloneDeep(t),a=this.transformState(r),l={},u={};return this.map(i,(c,d)=>{a[c]||(u[c]=d)}),this.map(a,(c,d)=>{const h=i[c];if(h){const f=d.map(_=>_.presence_ref),m=h.map(_=>_.presence_ref),x=d.filter(_=>m.indexOf(_.presence_ref)<0),g=h.filter(_=>f.indexOf(_.presence_ref)<0);x.length>0&&(l[c]=x),g.length>0&&(u[c]=g)}else l[c]=d}),this.syncDiff(i,{joins:l,leaves:u},n,s)}static syncDiff(t,r,n,s){const{joins:i,leaves:a}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return n||(n=()=>{}),s||(s=()=>{}),this.map(i,(l,u)=>{var c;const d=(c=t[l])!==null&&c!==void 0?c:[];if(t[l]=this.cloneDeep(u),d.length>0){const h=t[l].map(m=>m.presence_ref),f=d.filter(m=>h.indexOf(m.presence_ref)<0);t[l].unshift(...f)}n(l,d,u)}),this.map(a,(l,u)=>{let c=t[l];if(!c)return;const d=u.map(h=>h.presence_ref);c=c.filter(h=>d.indexOf(h.presence_ref)<0),t[l]=c,s(l,c,u),c.length===0&&delete t[l]}),t}static map(t,r){return Object.getOwnPropertyNames(t).map(n=>r(n,t[n]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((r,n)=>{const s=t[n];return"metas"in s?r[n]=s.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):r[n]=s,r},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var cf;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(cf||(cf={}));var Oi;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(Oi||(Oi={}));var br;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(br||(br={}));class pd{constructor(t,r={config:{}},n){var s,i;if(this.topic=t,this.params=r,this.socket=n,this.bindings={},this.state=Ye.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new Fl(this,rr.join,this.params,this.timeout),this.rejoinTimer=new Zg(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Ye.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(a=>a.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Ye.closed,this.socket._remove(this)}),this._onError(a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=Ye.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Ye.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=Ye.errored,this.rejoinTimer.scheduleTimeout())}),this._on(rr.reply,{},(a,l)=>{this._trigger(this._replyEventName(l),a)}),this.presence=new Ti(this),this.broadcastEndpointURL=tv(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((i=(s=this.params.config)===null||s===void 0?void 0:s.broadcast)===null||i===void 0)&&i.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(t,r=this.timeout){var n,s,i;if(this.socket.isConnected()||this.socket.connect(),this.state==Ye.closed){const{config:{broadcast:a,presence:l,private:u}}=this.params,c=(s=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(m=>m.filter))!==null&&s!==void 0?s:[],d=!!this.bindings[Oi.PRESENCE]&&this.bindings[Oi.PRESENCE].length>0||((i=this.params.config.presence)===null||i===void 0?void 0:i.enabled)===!0,h={},f={broadcast:a,presence:Object.assign(Object.assign({},l),{enabled:d}),postgres_changes:c,private:u};this.socket.accessTokenValue&&(h.access_token=this.socket.accessTokenValue),this._onError(m=>t==null?void 0:t(br.CHANNEL_ERROR,m)),this._onClose(()=>t==null?void 0:t(br.CLOSED)),this.updateJoinPayload(Object.assign({config:f},h)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:m})=>{var x;if(this.socket.setAuth(),m===void 0){t==null||t(br.SUBSCRIBED);return}else{const g=this.bindings.postgres_changes,_=(x=g==null?void 0:g.length)!==null&&x!==void 0?x:0,v=[];for(let p=0;p<_;p++){const y=g[p],{filter:{event:j,schema:N,table:P,filter:b}}=y,I=m&&m[p];if(I&&I.event===j&&I.schema===N&&I.table===P&&I.filter===b)v.push(Object.assign(Object.assign({},y),{id:I.id}));else{this.unsubscribe(),this.state=Ye.errored,t==null||t(br.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=v,t&&t(br.SUBSCRIBED);return}}).receive("error",m=>{this.state=Ye.errored,t==null||t(br.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(m).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(br.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,r={}){return await this.send({type:"presence",event:"track",payload:t},r.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,r,n){return this.state===Ye.joined&&t===Oi.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(t,r,n)}async httpSend(t,r,n={}){var s;const i=this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"";if(r==null)return Promise.reject("Payload is required for httpSend()");const a={method:"POST",headers:{Authorization:i,apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:t,payload:r,private:this.private}]})},l=await this._fetchWithTimeout(this.broadcastEndpointURL,a,(s=n.timeout)!==null&&s!==void 0?s:this.timeout);if(l.status===202)return{success:!0};let u=l.statusText;try{const c=await l.json();u=c.error||c.message||u}catch{}return Promise.reject(new Error(u))}async send(t,r={}){var n,s;if(!this._canPush()&&t.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:i,payload:a}=t,u={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:a,private:this.private}]})};try{const c=await this._fetchWithTimeout(this.broadcastEndpointURL,u,(n=r.timeout)!==null&&n!==void 0?n:this.timeout);return await((s=c.body)===null||s===void 0?void 0:s.cancel()),c.ok?"ok":"error"}catch(c){return c.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var a,l,u;const c=this._push(t.type,t,r.timeout||this.timeout);t.type==="broadcast"&&!(!((u=(l=(a=this.params)===null||a===void 0?void 0:a.config)===null||l===void 0?void 0:l.broadcast)===null||u===void 0)&&u.ack)&&i("ok"),c.receive("ok",()=>i("ok")),c.receive("error",()=>i("error")),c.receive("timeout",()=>i("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=Ye.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(rr.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(s=>{n=new Fl(this,rr.leave,{},t),n.receive("ok",()=>{r(),s("ok")}).receive("timeout",()=>{r(),s("timed out")}).receive("error",()=>{s("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{n==null||n.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Ye.closed,this.bindings={}}async _fetchWithTimeout(t,r,n){const s=new AbortController,i=setTimeout(()=>s.abort(),n),a=await this.socket.fetch(t,Object.assign(Object.assign({},r),{signal:s.signal}));return clearTimeout(i),a}_push(t,r,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new Fl(this,t,r,n);return this._canPush()?s.send():this._addToPushBuffer(s),s}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>Zx){const r=this.pushBuffer.shift();r&&(r.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${r.event}`,r.payload))}}_onMessage(t,r,n){return r}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,r,n){var s,i;const a=t.toLocaleLowerCase(),{close:l,error:u,leave:c,join:d}=rr;if(n&&[l,u,c,d].indexOf(a)>=0&&n!==this._joinRef())return;let f=this._onMessage(a,r,n);if(r&&!f)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(a)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(m=>{var x,g,_;return((x=m.filter)===null||x===void 0?void 0:x.event)==="*"||((_=(g=m.filter)===null||g===void 0?void 0:g.event)===null||_===void 0?void 0:_.toLocaleLowerCase())===a}).map(m=>m.callback(f,n)):(i=this.bindings[a])===null||i===void 0||i.filter(m=>{var x,g,_,v,p,y;if(["broadcast","presence","postgres_changes"].includes(a))if("id"in m){const j=m.id,N=(x=m.filter)===null||x===void 0?void 0:x.event;return j&&((g=r.ids)===null||g===void 0?void 0:g.includes(j))&&(N==="*"||(N==null?void 0:N.toLocaleLowerCase())===((_=r.data)===null||_===void 0?void 0:_.type.toLocaleLowerCase()))}else{const j=(p=(v=m==null?void 0:m.filter)===null||v===void 0?void 0:v.event)===null||p===void 0?void 0:p.toLocaleLowerCase();return j==="*"||j===((y=r==null?void 0:r.event)===null||y===void 0?void 0:y.toLocaleLowerCase())}else return m.type.toLocaleLowerCase()===a}).map(m=>{if(typeof f=="object"&&"ids"in f){const x=f.data,{schema:g,table:_,commit_timestamp:v,type:p,errors:y}=x;f=Object.assign(Object.assign({},{schema:g,table:_,commit_timestamp:v,eventType:p,new:{},old:{},errors:y}),this._getPayloadRecords(x))}m.callback(f,n)})}_isClosed(){return this.state===Ye.closed}_isJoined(){return this.state===Ye.joined}_isJoining(){return this.state===Ye.joining}_isLeaving(){return this.state===Ye.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,r,n){const s=t.toLocaleLowerCase(),i={type:s,filter:r,callback:n};return this.bindings[s]?this.bindings[s].push(i):this.bindings[s]=[i],this}_off(t,r){const n=t.toLocaleLowerCase();return this.bindings[n]&&(this.bindings[n]=this.bindings[n].filter(s=>{var i;return!(((i=s.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===n&&pd.isEqual(s.filter,r))})),this}static isEqual(t,r){if(Object.keys(t).length!==Object.keys(r).length)return!1;for(const n in t)if(t[n]!==r[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(rr.close,{},t)}_onError(t){this._on(rr.error,{},r=>t(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Ye.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const r={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(r.new=lf(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(r.old=lf(t.columns,t.old_record)),r}}const zl=()=>{},Ba={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},o_=[1e3,2e3,5e3,1e4],l_=1e4,u_=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class c_{constructor(t,r){var n;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Xu,this.transport=null,this.heartbeatIntervalMs=Ba.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=zl,this.ref=0,this.reconnectTimer=null,this.logger=zl,this.conn=null,this.sendBuffer=[],this.serializer=new e_,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=s=>{let i;return s?i=s:typeof fetch>"u"?i=(...a)=>Vs(async()=>{const{default:l}=await Promise.resolve().then(()=>Wn);return{default:l}},void 0).then(({default:l})=>l(...a)).catch(l=>{throw new Error(`Failed to load @supabase/node-fetch: ${l.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):i=fetch,(...a)=>i(...a)},!(!((n=r==null?void 0:r.params)===null||n===void 0)&&n.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=r.params.apikey,this.endPoint=`${t}/${Zu.websocket}`,this.httpEndpoint=tv(t),this._initializeOptions(r),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(r==null?void 0:r.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=Gx.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const r=t.message;throw r.includes("Node.js")?new Error(`${r}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${r}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:Yx}))}disconnect(t,r){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const n=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(n),this._setConnectionState("disconnected")},t?this.conn.close(t,r??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const r=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const t=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,r,n){this.logger(t,r,n)}connectionState(){switch(this.conn&&this.conn.readyState){case Pi.connecting:return En.Connecting;case Pi.open:return En.Open;case Pi.closing:return En.Closing;default:return En.Closed}}isConnected(){return this.connectionState()===En.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,r={config:{}}){const n=`realtime:${t}`,s=this.getChannels().find(i=>i.topic===n);if(s)return s;{const i=new pd(`realtime:${t}`,r,this);return this.channels.push(i),i}}push(t){const{topic:r,event:n,payload:s,ref:i}=t,a=()=>{this.encode(t,l=>{var u;(u=this.conn)===null||u===void 0||u.send(l)})};this.log("push",`${r} ${n} (${i})`,s),this.isConnected()?a():this.sendBuffer.push(a)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var t;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(r){this.log("error","error in heartbeat callback",r)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(r){this.log("error","error in heartbeat callback",r)}this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(Xx,"heartbeat timeout"),setTimeout(()=>{var r;this.isConnected()||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout()},Ba.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(r){this.log("error","error in heartbeat callback",r)}this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let r=this.channels.find(n=>n.topic===t&&(n._isJoined()||n._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${t}"`),r.unsubscribe())}_remove(t){this.channels=this.channels.filter(r=>r.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,r=>{if(r.topic==="phoenix"&&r.event==="phx_reply")try{this.heartbeatCallback(r.payload.status==="ok"?"ok":"error")}catch(c){this.log("error","error in heartbeat callback",c)}r.ref&&r.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:n,event:s,payload:i,ref:a}=r,l=a?`(${a})`:"",u=i.status||"";this.log("receive",`${u} ${n} ${s} ${l}`.trim(),i),this.channels.filter(c=>c._isMember(n)).forEach(c=>c._trigger(s,i,a)),this._triggerStateCallbacks("message",r)})}_clearTimer(t){var r;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((r=this.reconnectTimer)===null||r===void 0||r.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this.workerRef.terminate()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(t){var r;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t)}_triggerChanError(){this.channels.forEach(t=>t._trigger(rr.error))}_appendParams(t,r){if(Object.keys(r).length===0)return t;const n=t.match(/\?/)?"&":"?",s=new URLSearchParams(r);return`${t}${n}${s}`}_workerObjectUrl(t){let r;if(t)r=t;else{const n=new Blob([u_],{type:"application/javascript"});r=URL.createObjectURL(n)}return r}_setConnectionState(t,r=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=r)}async _performAuth(t=null){let r;t?r=t:this.accessToken?r=await this.accessToken():r=this.accessTokenValue,this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(n=>{const s={access_token:r,version:Qx};r&&n.updateJoinPayload(s),n.joinedOnce&&n._isJoined()&&n._push(rr.access_token,{access_token:r})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this.setAuth().catch(r=>{this.log("error",`error setting auth in ${t}`,r)})}_triggerStateCallbacks(t,r){try{this.stateChangeCallbacks[t].forEach(n=>{try{n(r)}catch(s){this.log("error",`error in ${t} callback`,s)}})}catch(n){this.log("error",`error triggering ${t} callbacks`,n)}}_setupReconnectionTimer(){this.reconnectTimer=new Zg(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Ba.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var r,n,s,i,a,l,u,c,d;if(this.transport=(r=t==null?void 0:t.transport)!==null&&r!==void 0?r:null,this.timeout=(n=t==null?void 0:t.timeout)!==null&&n!==void 0?n:Xu,this.heartbeatIntervalMs=(s=t==null?void 0:t.heartbeatIntervalMs)!==null&&s!==void 0?s:Ba.HEARTBEAT_INTERVAL,this.worker=(i=t==null?void 0:t.worker)!==null&&i!==void 0?i:!1,this.accessToken=(a=t==null?void 0:t.accessToken)!==null&&a!==void 0?a:null,this.heartbeatCallback=(l=t==null?void 0:t.heartbeatCallback)!==null&&l!==void 0?l:zl,t!=null&&t.params&&(this.params=t.params),t!=null&&t.logger&&(this.logger=t.logger),(t!=null&&t.logLevel||t!=null&&t.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(u=t==null?void 0:t.reconnectAfterMs)!==null&&u!==void 0?u:h=>o_[h-1]||l_,this.encode=(c=t==null?void 0:t.encode)!==null&&c!==void 0?c:(h,f)=>f(JSON.stringify(h)),this.decode=(d=t==null?void 0:t.decode)!==null&&d!==void 0?d:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t==null?void 0:t.workerUrl}}}class md extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function Le(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class d_ extends md{constructor(t,r,n){super(t),this.name="StorageApiError",this.status=r,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class tc extends md{constructor(t,r){super(t),this.name="StorageUnknownError",this.originalError=r}}const gd=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>Vs(async()=>{const{default:n}=await Promise.resolve().then(()=>Wn);return{default:n}},void 0).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)},h_=()=>H(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Vs(()=>Promise.resolve().then(()=>Wn),void 0)).Response:Response}),rc=e=>{if(Array.isArray(e))return e.map(r=>rc(r));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([r,n])=>{const s=r.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));t[s]=rc(n)}),t},f_=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},Bl=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),p_=(e,t,r)=>H(void 0,void 0,void 0,function*(){const n=yield h_();e instanceof n&&!(r!=null&&r.noResolveJson)?e.json().then(s=>{const i=e.status||500,a=(s==null?void 0:s.statusCode)||i+"";t(new d_(Bl(s),i,a))}).catch(s=>{t(new tc(Bl(s),s))}):t(new tc(Bl(e),e))}),m_=(e,t,r,n)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"||!n?s:(f_(n)?(s.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),s.body=JSON.stringify(n)):s.body=n,t!=null&&t.duplex&&(s.duplex=t.duplex),Object.assign(Object.assign({},s),r))};function ua(e,t,r,n,s,i){return H(this,void 0,void 0,function*(){return new Promise((a,l)=>{e(r,m_(t,n,s,i)).then(u=>{if(!u.ok)throw u;return n!=null&&n.noResolveJson?u:u.json()}).then(u=>a(u)).catch(u=>p_(u,l,n))})})}function Yi(e,t,r,n){return H(this,void 0,void 0,function*(){return ua(e,"GET",t,r,n)})}function Zt(e,t,r,n,s){return H(this,void 0,void 0,function*(){return ua(e,"POST",t,n,s,r)})}function nc(e,t,r,n,s){return H(this,void 0,void 0,function*(){return ua(e,"PUT",t,n,s,r)})}function g_(e,t,r,n){return H(this,void 0,void 0,function*(){return ua(e,"HEAD",t,Object.assign(Object.assign({},r),{noResolveJson:!0}),n)})}function vd(e,t,r,n,s){return H(this,void 0,void 0,function*(){return ua(e,"DELETE",t,n,s,r)})}class v_{constructor(t,r){this.downloadFn=t,this.shouldThrowOnError=r}then(t,r){return this.execute().then(t,r)}execute(){return H(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Le(t))return{data:null,error:t};throw t}})}}var rv;class y_{constructor(t,r){this.downloadFn=t,this.shouldThrowOnError=r,this[rv]="BlobDownloadBuilder",this.promise=null}asStream(){return new v_(this.downloadFn,this.shouldThrowOnError)}then(t,r){return this.getPromise().then(t,r)}catch(t){return this.getPromise().catch(t)}finally(t){return this.getPromise().finally(t)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return H(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Le(t))return{data:null,error:t};throw t}})}}rv=Symbol.toStringTag;const w_={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},df={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class x_{constructor(t,r={},n,s){this.shouldThrowOnError=!1,this.url=t,this.headers=r,this.bucketId=n,this.fetch=gd(s)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(t,r,n,s){return H(this,void 0,void 0,function*(){try{let i;const a=Object.assign(Object.assign({},df),s);let l=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(a.upsert)});const u=a.metadata;typeof Blob<"u"&&n instanceof Blob?(i=new FormData,i.append("cacheControl",a.cacheControl),u&&i.append("metadata",this.encodeMetadata(u)),i.append("",n)):typeof FormData<"u"&&n instanceof FormData?(i=n,i.append("cacheControl",a.cacheControl),u&&i.append("metadata",this.encodeMetadata(u))):(i=n,l["cache-control"]=`max-age=${a.cacheControl}`,l["content-type"]=a.contentType,u&&(l["x-metadata"]=this.toBase64(this.encodeMetadata(u)))),s!=null&&s.headers&&(l=Object.assign(Object.assign({},l),s.headers));const c=this._removeEmptyFolders(r),d=this._getFinalPath(c),h=yield(t=="PUT"?nc:Zt)(this.fetch,`${this.url}/object/${d}`,i,Object.assign({headers:l},a!=null&&a.duplex?{duplex:a.duplex}:{}));return{data:{path:c,id:h.Id,fullPath:h.Key},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Le(i))return{data:null,error:i};throw i}})}upload(t,r,n){return H(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,r,n)})}uploadToSignedUrl(t,r,n,s){return H(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(t),a=this._getFinalPath(i),l=new URL(this.url+`/object/upload/sign/${a}`);l.searchParams.set("token",r);try{let u;const c=Object.assign({upsert:df.upsert},s),d=Object.assign(Object.assign({},this.headers),{"x-upsert":String(c.upsert)});typeof Blob<"u"&&n instanceof Blob?(u=new FormData,u.append("cacheControl",c.cacheControl),u.append("",n)):typeof FormData<"u"&&n instanceof FormData?(u=n,u.append("cacheControl",c.cacheControl)):(u=n,d["cache-control"]=`max-age=${c.cacheControl}`,d["content-type"]=c.contentType);const h=yield nc(this.fetch,l.toString(),u,{headers:d});return{data:{path:i,fullPath:h.Key},error:null}}catch(u){if(this.shouldThrowOnError)throw u;if(Le(u))return{data:null,error:u};throw u}})}createSignedUploadUrl(t,r){return H(this,void 0,void 0,function*(){try{let n=this._getFinalPath(t);const s=Object.assign({},this.headers);r!=null&&r.upsert&&(s["x-upsert"]="true");const i=yield Zt(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:s}),a=new URL(this.url+i.url),l=a.searchParams.get("token");if(!l)throw new md("No token returned by API");return{data:{signedUrl:a.toString(),path:t,token:l},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Le(n))return{data:null,error:n};throw n}})}update(t,r,n){return H(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,r,n)})}move(t,r,n){return H(this,void 0,void 0,function*(){try{return{data:yield Zt(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Le(s))return{data:null,error:s};throw s}})}copy(t,r,n){return H(this,void 0,void 0,function*(){try{return{data:{path:(yield Zt(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers})).Key},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Le(s))return{data:null,error:s};throw s}})}createSignedUrl(t,r,n){return H(this,void 0,void 0,function*(){try{let s=this._getFinalPath(t),i=yield Zt(this.fetch,`${this.url}/object/sign/${s}`,Object.assign({expiresIn:r},n!=null&&n.transform?{transform:n.transform}:{}),{headers:this.headers});const a=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${a}`)},{data:i,error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Le(s))return{data:null,error:s};throw s}})}createSignedUrls(t,r,n){return H(this,void 0,void 0,function*(){try{const s=yield Zt(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:r,paths:t},{headers:this.headers}),i=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{data:s.map(a=>Object.assign(Object.assign({},a),{signedUrl:a.signedURL?encodeURI(`${this.url}${a.signedURL}${i}`):null})),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Le(s))return{data:null,error:s};throw s}})}download(t,r){const s=typeof(r==null?void 0:r.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((r==null?void 0:r.transform)||{}),a=i?`?${i}`:"",l=this._getFinalPath(t),u=()=>Yi(this.fetch,`${this.url}/${s}/${l}${a}`,{headers:this.headers,noResolveJson:!0});return new y_(u,this.shouldThrowOnError)}info(t){return H(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{const n=yield Yi(this.fetch,`${this.url}/object/info/${r}`,{headers:this.headers});return{data:rc(n),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Le(n))return{data:null,error:n};throw n}})}exists(t){return H(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{return yield g_(this.fetch,`${this.url}/object/${r}`,{headers:this.headers}),{data:!0,error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Le(n)&&n instanceof tc){const s=n.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:n}}throw n}})}getPublicUrl(t,r){const n=this._getFinalPath(t),s=[],i=r!=null&&r.download?`download=${r.download===!0?"":r.download}`:"";i!==""&&s.push(i);const l=typeof(r==null?void 0:r.transform)<"u"?"render/image":"object",u=this.transformOptsToQueryString((r==null?void 0:r.transform)||{});u!==""&&s.push(u);let c=s.join("&");return c!==""&&(c=`?${c}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${n}${c}`)}}}remove(t){return H(this,void 0,void 0,function*(){try{return{data:yield vd(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Le(r))return{data:null,error:r};throw r}})}list(t,r,n){return H(this,void 0,void 0,function*(){try{const s=Object.assign(Object.assign(Object.assign({},w_),r),{prefix:t||""});return{data:yield Zt(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},n),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Le(s))return{data:null,error:s};throw s}})}listV2(t,r){return H(this,void 0,void 0,function*(){try{const n=Object.assign({},t);return{data:yield Zt(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,n,{headers:this.headers},r),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Le(n))return{data:null,error:n};throw n}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const r=[];return t.width&&r.push(`width=${t.width}`),t.height&&r.push(`height=${t.height}`),t.resize&&r.push(`resize=${t.resize}`),t.format&&r.push(`format=${t.format}`),t.quality&&r.push(`quality=${t.quality}`),r.join("&")}}const nv="2.76.1",sv={"X-Client-Info":`storage-js/${nv}`};class __{constructor(t,r={},n,s){this.shouldThrowOnError=!1;const i=new URL(t);s!=null&&s.useNewHostname&&/supabase\.(co|in|red)$/.test(i.hostname)&&!i.hostname.includes("storage.supabase.")&&(i.hostname=i.hostname.replace("supabase.","storage.supabase.")),this.url=i.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},sv),r),this.fetch=gd(n)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(){return H(this,void 0,void 0,function*(){try{return{data:yield Yi(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Le(t))return{data:null,error:t};throw t}})}getBucket(t){return H(this,void 0,void 0,function*(){try{return{data:yield Yi(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Le(r))return{data:null,error:r};throw r}})}createBucket(t){return H(this,arguments,void 0,function*(r,n={public:!1}){try{return{data:yield Zt(this.fetch,`${this.url}/bucket`,{id:r,name:r,type:n.type,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Le(s))return{data:null,error:s};throw s}})}updateBucket(t,r){return H(this,void 0,void 0,function*(){try{return{data:yield nc(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Le(n))return{data:null,error:n};throw n}})}emptyBucket(t){return H(this,void 0,void 0,function*(){try{return{data:yield Zt(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Le(r))return{data:null,error:r};throw r}})}deleteBucket(t){return H(this,void 0,void 0,function*(){try{return{data:yield vd(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Le(r))return{data:null,error:r};throw r}})}}class b_{constructor(t,r={},n){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},sv),r),this.fetch=gd(n)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(t){return H(this,void 0,void 0,function*(){try{return{data:yield Zt(this.fetch,`${this.url}/bucket`,{name:t},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Le(r))return{data:null,error:r};throw r}})}listBuckets(t){return H(this,void 0,void 0,function*(){try{const r=new URLSearchParams;(t==null?void 0:t.limit)!==void 0&&r.set("limit",t.limit.toString()),(t==null?void 0:t.offset)!==void 0&&r.set("offset",t.offset.toString()),t!=null&&t.sortColumn&&r.set("sortColumn",t.sortColumn),t!=null&&t.sortOrder&&r.set("sortOrder",t.sortOrder),t!=null&&t.search&&r.set("search",t.search);const n=r.toString(),s=n?`${this.url}/bucket?${n}`:`${this.url}/bucket`,i=yield Yi(this.fetch,s,{headers:this.headers});return{data:Array.isArray(i)?i.filter(l=>l.type==="ANALYTICS"):[],error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Le(r))return{data:null,error:r};throw r}})}deleteBucket(t){return H(this,void 0,void 0,function*(){try{return{data:yield vd(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Le(r))return{data:null,error:r};throw r}})}}const yd={"X-Client-Info":`storage-js/${nv}`,"Content-Type":"application/json"};class iv extends Error{constructor(t){super(t),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}}function Pt(e){return typeof e=="object"&&e!==null&&"__isStorageVectorsError"in e}class Vl extends iv{constructor(t,r,n){super(t),this.name="StorageVectorsApiError",this.status=r,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class j_ extends iv{constructor(t,r){super(t),this.name="StorageVectorsUnknownError",this.originalError=r}}var hf;(function(e){e.InternalError="InternalError",e.S3VectorConflictException="S3VectorConflictException",e.S3VectorNotFoundException="S3VectorNotFoundException",e.S3VectorBucketNotEmpty="S3VectorBucketNotEmpty",e.S3VectorMaxBucketsExceeded="S3VectorMaxBucketsExceeded",e.S3VectorMaxIndexesExceeded="S3VectorMaxIndexesExceeded"})(hf||(hf={}));const wd=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>Vs(async()=>{const{default:n}=await Promise.resolve().then(()=>Wn);return{default:n}},void 0).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)},S_=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},ff=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),k_=(e,t,r)=>H(void 0,void 0,void 0,function*(){if(e&&typeof e=="object"&&"status"in e&&"ok"in e&&typeof e.status=="number"&&!(r!=null&&r.noResolveJson)){const s=e.status||500,i=e;if(typeof i.json=="function")i.json().then(a=>{const l=(a==null?void 0:a.statusCode)||(a==null?void 0:a.code)||s+"";t(new Vl(ff(a),s,l))}).catch(()=>{const a=s+"",l=i.statusText||`HTTP ${s} error`;t(new Vl(l,s,a))});else{const a=s+"",l=i.statusText||`HTTP ${s} error`;t(new Vl(l,s,a))}}else t(new j_(ff(e),e))}),E_=(e,t,r,n)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return n?(S_(n)?(s.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),s.body=JSON.stringify(n)):s.body=n,Object.assign(Object.assign({},s),r)):s};function N_(e,t,r,n,s,i){return H(this,void 0,void 0,function*(){return new Promise((a,l)=>{e(r,E_(t,n,s,i)).then(u=>{if(!u.ok)throw u;if(n!=null&&n.noResolveJson)return u;const c=u.headers.get("content-type");return!c||!c.includes("application/json")?{}:u.json()}).then(u=>a(u)).catch(u=>k_(u,l,n))})})}function Tt(e,t,r,n,s){return H(this,void 0,void 0,function*(){return N_(e,"POST",t,n,s,r)})}class C_{constructor(t,r={},n){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},yd),r),this.fetch=wd(n)}throwOnError(){return this.shouldThrowOnError=!0,this}createIndex(t){return H(this,void 0,void 0,function*(){try{return{data:(yield Tt(this.fetch,`${this.url}/CreateIndex`,t,{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Pt(r))return{data:null,error:r};throw r}})}getIndex(t,r){return H(this,void 0,void 0,function*(){try{return{data:yield Tt(this.fetch,`${this.url}/GetIndex`,{vectorBucketName:t,indexName:r},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Pt(n))return{data:null,error:n};throw n}})}listIndexes(t){return H(this,void 0,void 0,function*(){try{return{data:yield Tt(this.fetch,`${this.url}/ListIndexes`,t,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Pt(r))return{data:null,error:r};throw r}})}deleteIndex(t,r){return H(this,void 0,void 0,function*(){try{return{data:(yield Tt(this.fetch,`${this.url}/DeleteIndex`,{vectorBucketName:t,indexName:r},{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Pt(n))return{data:null,error:n};throw n}})}}class P_{constructor(t,r={},n){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},yd),r),this.fetch=wd(n)}throwOnError(){return this.shouldThrowOnError=!0,this}putVectors(t){return H(this,void 0,void 0,function*(){try{if(t.vectors.length<1||t.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:(yield Tt(this.fetch,`${this.url}/PutVectors`,t,{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Pt(r))return{data:null,error:r};throw r}})}getVectors(t){return H(this,void 0,void 0,function*(){try{return{data:yield Tt(this.fetch,`${this.url}/GetVectors`,t,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Pt(r))return{data:null,error:r};throw r}})}listVectors(t){return H(this,void 0,void 0,function*(){try{if(t.segmentCount!==void 0){if(t.segmentCount<1||t.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(t.segmentIndex!==void 0&&(t.segmentIndex<0||t.segmentIndex>=t.segmentCount))throw new Error(`segmentIndex must be between 0 and ${t.segmentCount-1}`)}return{data:yield Tt(this.fetch,`${this.url}/ListVectors`,t,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Pt(r))return{data:null,error:r};throw r}})}queryVectors(t){return H(this,void 0,void 0,function*(){try{return{data:yield Tt(this.fetch,`${this.url}/QueryVectors`,t,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Pt(r))return{data:null,error:r};throw r}})}deleteVectors(t){return H(this,void 0,void 0,function*(){try{if(t.keys.length<1||t.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:(yield Tt(this.fetch,`${this.url}/DeleteVectors`,t,{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Pt(r))return{data:null,error:r};throw r}})}}class T_{constructor(t,r={},n){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},yd),r),this.fetch=wd(n)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(t){return H(this,void 0,void 0,function*(){try{return{data:(yield Tt(this.fetch,`${this.url}/CreateVectorBucket`,{vectorBucketName:t},{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Pt(r))return{data:null,error:r};throw r}})}getBucket(t){return H(this,void 0,void 0,function*(){try{return{data:yield Tt(this.fetch,`${this.url}/GetVectorBucket`,{vectorBucketName:t},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Pt(r))return{data:null,error:r};throw r}})}listBuckets(){return H(this,arguments,void 0,function*(t={}){try{return{data:yield Tt(this.fetch,`${this.url}/ListVectorBuckets`,t,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Pt(r))return{data:null,error:r};throw r}})}deleteBucket(t){return H(this,void 0,void 0,function*(){try{return{data:(yield Tt(this.fetch,`${this.url}/DeleteVectorBucket`,{vectorBucketName:t},{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Pt(r))return{data:null,error:r};throw r}})}}class O_ extends T_{constructor(t,r={}){super(t,r.headers||{},r.fetch)}from(t){return new R_(this.url,this.headers,t,this.fetch)}}class R_ extends C_{constructor(t,r,n,s){super(t,r,s),this.vectorBucketName=n}createIndex(t){const r=Object.create(null,{createIndex:{get:()=>super.createIndex}});return H(this,void 0,void 0,function*(){return r.createIndex.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName}))})}listIndexes(){const t=Object.create(null,{listIndexes:{get:()=>super.listIndexes}});return H(this,arguments,void 0,function*(r={}){return t.listIndexes.call(this,Object.assign(Object.assign({},r),{vectorBucketName:this.vectorBucketName}))})}getIndex(t){const r=Object.create(null,{getIndex:{get:()=>super.getIndex}});return H(this,void 0,void 0,function*(){return r.getIndex.call(this,this.vectorBucketName,t)})}deleteIndex(t){const r=Object.create(null,{deleteIndex:{get:()=>super.deleteIndex}});return H(this,void 0,void 0,function*(){return r.deleteIndex.call(this,this.vectorBucketName,t)})}index(t){return new I_(this.url,this.headers,this.vectorBucketName,t,this.fetch)}}class I_ extends P_{constructor(t,r,n,s,i){super(t,r,i),this.vectorBucketName=n,this.indexName=s}putVectors(t){const r=Object.create(null,{putVectors:{get:()=>super.putVectors}});return H(this,void 0,void 0,function*(){return r.putVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}getVectors(t){const r=Object.create(null,{getVectors:{get:()=>super.getVectors}});return H(this,void 0,void 0,function*(){return r.getVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}listVectors(){const t=Object.create(null,{listVectors:{get:()=>super.listVectors}});return H(this,arguments,void 0,function*(r={}){return t.listVectors.call(this,Object.assign(Object.assign({},r),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}queryVectors(t){const r=Object.create(null,{queryVectors:{get:()=>super.queryVectors}});return H(this,void 0,void 0,function*(){return r.queryVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}deleteVectors(t){const r=Object.create(null,{deleteVectors:{get:()=>super.deleteVectors}});return H(this,void 0,void 0,function*(){return r.deleteVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}}class A_ extends __{constructor(t,r={},n,s){super(t,r,n,s)}from(t){return new x_(this.url,this.headers,t,this.fetch)}get vectors(){return new O_(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new b_(this.url+"/iceberg",this.headers,this.fetch)}}const L_="2.76.1";let wi="";typeof Deno<"u"?wi="deno":typeof document<"u"?wi="web":typeof navigator<"u"&&navigator.product==="ReactNative"?wi="react-native":wi="node";const D_={"X-Client-Info":`supabase-js-${wi}/${L_}`},$_={headers:D_},M_={schema:"public"},U_={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},F_={},z_=e=>{let t;return e?t=e:typeof fetch>"u"?t=zg:t=fetch,(...r)=>t(...r)},B_=()=>typeof Headers>"u"?Bg:Headers,V_=(e,t,r)=>{const n=z_(r),s=B_();return async(i,a)=>{var l;const u=(l=await t())!==null&&l!==void 0?l:e;let c=new s(a==null?void 0:a.headers);return c.has("apikey")||c.set("apikey",e),c.has("Authorization")||c.set("Authorization",`Bearer ${u}`),n(i,Object.assign(Object.assign({},a),{headers:c}))}};function W_(e){return e.endsWith("/")?e:e+"/"}function q_(e,t){var r,n;const{db:s,auth:i,realtime:a,global:l}=e,{db:u,auth:c,realtime:d,global:h}=t,f={db:Object.assign(Object.assign({},u),s),auth:Object.assign(Object.assign({},c),i),realtime:Object.assign(Object.assign({},d),a),storage:{},global:Object.assign(Object.assign(Object.assign({},h),l),{headers:Object.assign(Object.assign({},(r=h==null?void 0:h.headers)!==null&&r!==void 0?r:{}),(n=l==null?void 0:l.headers)!==null&&n!==void 0?n:{})}),accessToken:async()=>""};return e.accessToken?f.accessToken=e.accessToken:delete f.accessToken,f}function H_(e){const t=e==null?void 0:e.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(W_(t))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const av="2.76.1",ns=30*1e3,sc=3,Wl=sc*ns,K_="http://localhost:9999",G_="supabase.auth.token",J_={"X-Client-Info":`gotrue-js/${av}`},ic="X-Supabase-Api-Version",ov={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},Q_=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,Y_=10*60*1e3;class Xi extends Error{constructor(t,r,n){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=n}}function te(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class X_ extends Xi{constructor(t,r,n){super(t,r,n),this.name="AuthApiError",this.status=r,this.code=n}}function Z_(e){return te(e)&&e.name==="AuthApiError"}class Nn extends Xi{constructor(t,r){super(t),this.name="AuthUnknownError",this.originalError=r}}class hn extends Xi{constructor(t,r,n,s){super(t,n,s),this.name=r,this.status=n}}class Fr extends hn{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function eb(e){return te(e)&&e.name==="AuthSessionMissingError"}class Xn extends hn{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Va extends hn{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class Wa extends hn{constructor(t,r=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function tb(e){return te(e)&&e.name==="AuthImplicitGrantRedirectError"}class pf extends hn{constructor(t,r=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class ac extends hn{constructor(t,r){super(t,"AuthRetryableFetchError",r,void 0)}}function ql(e){return te(e)&&e.name==="AuthRetryableFetchError"}class mf extends hn{constructor(t,r,n){super(t,"AuthWeakPasswordError",r,"weak_password"),this.reasons=n}}class oc extends hn{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const Lo="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),gf=` 	
\r=`.split(""),rb=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<gf.length;t+=1)e[gf[t].charCodeAt(0)]=-2;for(let t=0;t<Lo.length;t+=1)e[Lo[t].charCodeAt(0)]=t;return e})();function vf(e,t,r){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(Lo[n]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(Lo[n]),t.queuedBits-=6}}function lv(e,t,r){const n=rb[e];if(n>-1)for(t.queue=t.queue<<6|n,t.queuedBits+=6;t.queuedBits>=8;)r(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function yf(e){const t=[],r=a=>{t.push(String.fromCodePoint(a))},n={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},i=a=>{ib(a,n,r)};for(let a=0;a<e.length;a+=1)lv(e.charCodeAt(a),s,i);return t.join("")}function nb(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function sb(e,t){for(let r=0;r<e.length;r+=1){let n=e.charCodeAt(r);if(n>55295&&n<=56319){const s=(n-55296)*1024&65535;n=(e.charCodeAt(r+1)-56320&65535|s)+65536,r+=1}nb(n,t)}}function ib(e,t,r){if(t.utf8seq===0){if(e<=127){r(e);return}for(let n=1;n<6;n+=1)if(!(e>>7-n&1)){t.utf8seq=n;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&r(t.codepoint)}}function js(e){const t=[],r={queue:0,queuedBits:0},n=s=>{t.push(s)};for(let s=0;s<e.length;s+=1)lv(e.charCodeAt(s),r,n);return new Uint8Array(t)}function ab(e){const t=[];return sb(e,r=>t.push(r)),new Uint8Array(t)}function In(e){const t=[],r={queue:0,queuedBits:0},n=s=>{t.push(s)};return e.forEach(s=>vf(s,r,n)),vf(null,r,n),t.join("")}function ob(e){return Math.round(Date.now()/1e3)+e}function lb(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=Math.random()*16|0;return(e=="x"?t:t&3|8).toString(16)})}const Et=()=>typeof window<"u"&&typeof document<"u",gn={tested:!1,writable:!1},uv=()=>{if(!Et())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(gn.tested)return gn.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),gn.tested=!0,gn.writable=!0}catch{gn.tested=!0,gn.writable=!1}return gn.writable};function ub(e){const t={},r=new URL(e);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((s,i)=>{t[i]=s})}catch{}return r.searchParams.forEach((n,s)=>{t[s]=n}),t}const cv=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>Vs(async()=>{const{default:n}=await Promise.resolve().then(()=>Wn);return{default:n}},void 0).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)},cb=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",ss=async(e,t,r)=>{await e.setItem(t,JSON.stringify(r))},vn=async(e,t)=>{const r=await e.getItem(t);if(!r)return null;try{return JSON.parse(r)}catch{return r}},Mr=async(e,t)=>{await e.removeItem(t)};class al{constructor(){this.promise=new al.promiseConstructor((t,r)=>{this.resolve=t,this.reject=r})}}al.promiseConstructor=Promise;function Hl(e){const t=e.split(".");if(t.length!==3)throw new oc("Invalid JWT structure");for(let n=0;n<t.length;n++)if(!Q_.test(t[n]))throw new oc("JWT not in base64url format");return{header:JSON.parse(yf(t[0])),payload:JSON.parse(yf(t[1])),signature:js(t[2]),raw:{header:t[0],payload:t[1]}}}async function db(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function hb(e,t){return new Promise((n,s)=>{(async()=>{for(let i=0;i<1/0;i++)try{const a=await e(i);if(!t(i,null,a)){n(a);return}}catch(a){if(!t(i,a)){s(a);return}}})()})}function fb(e){return("0"+e.toString(16)).substr(-2)}function pb(){const t=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=r.length;let s="";for(let i=0;i<56;i++)s+=r.charAt(Math.floor(Math.random()*n));return s}return crypto.getRandomValues(t),Array.from(t,fb).join("")}async function mb(e){const r=new TextEncoder().encode(e),n=await crypto.subtle.digest("SHA-256",r),s=new Uint8Array(n);return Array.from(s).map(i=>String.fromCharCode(i)).join("")}async function gb(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const r=await mb(e);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Zn(e,t,r=!1){const n=pb();let s=n;r&&(s+="/PASSWORD_RECOVERY"),await ss(e,`${t}-code-verifier`,s);const i=await gb(n);return[i,n===i?"plain":"s256"]}const vb=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function yb(e){const t=e.headers.get(ic);if(!t||!t.match(vb))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function wb(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function xb(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const _b=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function es(e){if(!_b.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Kl(){const e={};return new Proxy(e,{get:(t,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const n=r.toString();if(n==="Symbol(Symbol.toPrimitive)"||n==="Symbol(Symbol.toStringTag)"||n==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function wf(e){return JSON.parse(JSON.stringify(e))}const bn=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),bb=[502,503,504];async function xf(e){var t;if(!cb(e))throw new ac(bn(e),0);if(bb.includes(e.status))throw new ac(bn(e),e.status);let r;try{r=await e.json()}catch(i){throw new Nn(bn(i),i)}let n;const s=yb(e);if(s&&s.getTime()>=ov["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?n=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(n=r.error_code),n){if(n==="weak_password")throw new mf(bn(r),e.status,((t=r.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(n==="session_not_found")throw new Fr}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((i,a)=>i&&typeof a=="string",!0))throw new mf(bn(r),e.status,r.weak_password.reasons);throw new X_(bn(r),e.status||500,n)}const jb=(e,t,r,n)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),s.body=JSON.stringify(n),Object.assign(Object.assign({},s),r))};async function ie(e,t,r,n){var s;const i=Object.assign({},n==null?void 0:n.headers);i[ic]||(i[ic]=ov["2024-01-01"].name),n!=null&&n.jwt&&(i.Authorization=`Bearer ${n.jwt}`);const a=(s=n==null?void 0:n.query)!==null&&s!==void 0?s:{};n!=null&&n.redirectTo&&(a.redirect_to=n.redirectTo);const l=Object.keys(a).length?"?"+new URLSearchParams(a).toString():"",u=await Sb(e,t,r+l,{headers:i,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(u):{data:Object.assign({},u),error:null}}async function Sb(e,t,r,n,s,i){const a=jb(t,n,s,i);let l;try{l=await e(r,Object.assign({},a))}catch(u){throw console.error(u),new ac(bn(u),0)}if(l.ok||await xf(l),n!=null&&n.noResolveJson)return l;try{return await l.json()}catch(u){await xf(u)}}function Yt(e){var t;let r=null;Nb(e)&&(r=Object.assign({},e),e.expires_at||(r.expires_at=ob(e.expires_in)));const n=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:r,user:n},error:null}}function _f(e){const t=Yt(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((r,n)=>r&&typeof n=="string",!0)&&(t.data.weak_password=e.weak_password),t}function Hr(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function kb(e){return{data:e,error:null}}function Eb(e){const{action_link:t,email_otp:r,hashed_token:n,redirect_to:s,verification_type:i}=e,a=Bs(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:t,email_otp:r,hashed_token:n,redirect_to:s,verification_type:i},u=Object.assign({},a);return{data:{properties:l,user:u},error:null}}function bf(e){return e}function Nb(e){return e.access_token&&e.refresh_token&&e.expires_in}const Gl=["global","local","others"];class Cb{constructor({url:t="",headers:r={},fetch:n}){this.url=t,this.headers=r,this.fetch=cv(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(t,r=Gl[0]){if(Gl.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Gl.join(", ")}`);try{return await ie(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(n){if(te(n))return{data:null,error:n};throw n}}async inviteUserByEmail(t,r={}){try{return await ie(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:Hr})}catch(n){if(te(n))return{data:{user:null},error:n};throw n}}async generateLink(t){try{const{options:r}=t,n=Bs(t,["options"]),s=Object.assign(Object.assign({},n),r);return"newEmail"in n&&(s.new_email=n==null?void 0:n.newEmail,delete s.newEmail),await ie(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:Eb,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(te(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(t){try{return await ie(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:Hr})}catch(r){if(te(r))return{data:{user:null},error:r};throw r}}async listUsers(t){var r,n,s,i,a,l,u;try{const c={nextPage:null,lastPage:0,total:0},d=await ie(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=t==null?void 0:t.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(i=(s=t==null?void 0:t.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:bf});if(d.error)throw d.error;const h=await d.json(),f=(a=d.headers.get("x-total-count"))!==null&&a!==void 0?a:0,m=(u=(l=d.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&u!==void 0?u:[];return m.length>0&&(m.forEach(x=>{const g=parseInt(x.split(";")[0].split("=")[1].substring(0,1)),_=JSON.parse(x.split(";")[1].split("=")[1]);c[`${_}Page`]=g}),c.total=parseInt(f)),{data:Object.assign(Object.assign({},h),c),error:null}}catch(c){if(te(c))return{data:{users:[]},error:c};throw c}}async getUserById(t){es(t);try{return await ie(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:Hr})}catch(r){if(te(r))return{data:{user:null},error:r};throw r}}async updateUserById(t,r){es(t);try{return await ie(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:r,headers:this.headers,xform:Hr})}catch(n){if(te(n))return{data:{user:null},error:n};throw n}}async deleteUser(t,r=!1){es(t);try{return await ie(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:r},xform:Hr})}catch(n){if(te(n))return{data:{user:null},error:n};throw n}}async _listFactors(t){es(t.userId);try{const{data:r,error:n}=await ie(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:r,error:n}}catch(r){if(te(r))return{data:null,error:r};throw r}}async _deleteFactor(t){es(t.userId),es(t.id);try{return{data:await ie(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(r){if(te(r))return{data:null,error:r};throw r}}async _listOAuthClients(t){var r,n,s,i,a,l,u;try{const c={nextPage:null,lastPage:0,total:0},d=await ie(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=t==null?void 0:t.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(i=(s=t==null?void 0:t.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:bf});if(d.error)throw d.error;const h=await d.json(),f=(a=d.headers.get("x-total-count"))!==null&&a!==void 0?a:0,m=(u=(l=d.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&u!==void 0?u:[];return m.length>0&&(m.forEach(x=>{const g=parseInt(x.split(";")[0].split("=")[1].substring(0,1)),_=JSON.parse(x.split(";")[1].split("=")[1]);c[`${_}Page`]=g}),c.total=parseInt(f)),{data:Object.assign(Object.assign({},h),c),error:null}}catch(c){if(te(c))return{data:{clients:[]},error:c};throw c}}async _createOAuthClient(t){try{return await ie(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:t,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(te(r))return{data:null,error:r};throw r}}async _getOAuthClient(t){try{return await ie(this.fetch,"GET",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(te(r))return{data:null,error:r};throw r}}async _deleteOAuthClient(t){try{return await ie(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(te(r))return{data:null,error:r};throw r}}async _regenerateOAuthClientSecret(t){try{return await ie(this.fetch,"POST",`${this.url}/admin/oauth/clients/${t}/regenerate_secret`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(te(r))return{data:null,error:r};throw r}}}function jf(e={}){return{getItem:t=>e[t]||null,setItem:(t,r)=>{e[t]=r},removeItem:t=>{delete e[t]}}}const ts={debug:!!(globalThis&&uv()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class dv extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class Pb extends dv{}async function Tb(e,t,r){ts.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const n=new globalThis.AbortController;return t>0&&setTimeout(()=>{n.abort(),ts.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async s=>{if(s){ts.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,s.name);try{return await r()}finally{ts.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,s.name)}}else{if(t===0)throw ts.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new Pb(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(ts.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}function Ob(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function hv(e){if(!/^0x[a-fA-F0-9]{40}$/.test(e))throw new Error(`@supabase/auth-js: Address "${e}" is invalid.`);return e.toLowerCase()}function Rb(e){return parseInt(e,16)}function Ib(e){const t=new TextEncoder().encode(e);return"0x"+Array.from(t,n=>n.toString(16).padStart(2,"0")).join("")}function Ab(e){var t;const{chainId:r,domain:n,expirationTime:s,issuedAt:i=new Date,nonce:a,notBefore:l,requestId:u,resources:c,scheme:d,uri:h,version:f}=e;{if(!Number.isInteger(r))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${r}`);if(!n)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(a&&a.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${a}`);if(!h)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(f!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${f}`);if(!((t=e.statement)===null||t===void 0)&&t.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${e.statement}`)}const m=hv(e.address),x=d?`${d}://${n}`:n,g=e.statement?`${e.statement}
`:"",_=`${x} wants you to sign in with your Ethereum account:
${m}

${g}`;let v=`URI: ${h}
Version: ${f}
Chain ID: ${r}${a?`
Nonce: ${a}`:""}
Issued At: ${i.toISOString()}`;if(s&&(v+=`
Expiration Time: ${s.toISOString()}`),l&&(v+=`
Not Before: ${l.toISOString()}`),u&&(v+=`
Request ID: ${u}`),c){let p=`
Resources:`;for(const y of c){if(!y||typeof y!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${y}`);p+=`
- ${y}`}v+=p}return`${_}
${v}`}class Je extends Error{constructor({message:t,code:r,cause:n,name:s}){var i;super(t,{cause:n}),this.__isWebAuthnError=!0,this.name=(i=s??(n instanceof Error?n.name:void 0))!==null&&i!==void 0?i:"Unknown Error",this.code=r}}class Do extends Je{constructor(t,r){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r,message:t}),this.name="WebAuthnUnknownError",this.originalError=r}}function Lb({error:e,options:t}){var r,n,s;const{publicKey:i}=t;if(!i)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new Je({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else if(e.name==="ConstraintError"){if(((r=i.authenticatorSelection)===null||r===void 0?void 0:r.requireResidentKey)===!0)return new Je({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:e});if(t.mediation==="conditional"&&((n=i.authenticatorSelection)===null||n===void 0?void 0:n.userVerification)==="required")return new Je({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:e});if(((s=i.authenticatorSelection)===null||s===void 0?void 0:s.userVerification)==="required")return new Je({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:e})}else{if(e.name==="InvalidStateError")return new Je({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:e});if(e.name==="NotAllowedError")return new Je({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="NotSupportedError")return i.pubKeyCredParams.filter(l=>l.type==="public-key").length===0?new Je({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:e}):new Je({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:e});if(e.name==="SecurityError"){const a=window.location.hostname;if(fv(a)){if(i.rp.id!==a)return new Je({message:`The RP ID "${i.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new Je({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="TypeError"){if(i.user.id.byteLength<1||i.user.id.byteLength>64)return new Je({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:e})}else if(e.name==="UnknownError")return new Je({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new Je({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}function Db({error:e,options:t}){const{publicKey:r}=t;if(!r)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new Je({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else{if(e.name==="NotAllowedError")return new Je({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="SecurityError"){const n=window.location.hostname;if(fv(n)){if(r.rpId!==n)return new Je({message:`The RP ID "${r.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new Je({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="UnknownError")return new Je({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new Je({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}class $b{createNewAbortSignal(){if(this.controller){const r=new Error("Cancelling existing WebAuthn API call for new one");r.name="AbortError",this.controller.abort(r)}const t=new AbortController;return this.controller=t,t.signal}cancelCeremony(){if(this.controller){const t=new Error("Manually cancelling existing WebAuthn API call");t.name="AbortError",this.controller.abort(t),this.controller=void 0}}}const Mb=new $b;function Ub(e){if(!e)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(e);const{challenge:t,user:r,excludeCredentials:n}=e,s=Bs(e,["challenge","user","excludeCredentials"]),i=js(t).buffer,a=Object.assign(Object.assign({},r),{id:js(r.id).buffer}),l=Object.assign(Object.assign({},s),{challenge:i,user:a});if(n&&n.length>0){l.excludeCredentials=new Array(n.length);for(let u=0;u<n.length;u++){const c=n[u];l.excludeCredentials[u]=Object.assign(Object.assign({},c),{id:js(c.id).buffer,type:c.type||"public-key",transports:c.transports})}}return l}function Fb(e){if(!e)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(e);const{challenge:t,allowCredentials:r}=e,n=Bs(e,["challenge","allowCredentials"]),s=js(t).buffer,i=Object.assign(Object.assign({},n),{challenge:s});if(r&&r.length>0){i.allowCredentials=new Array(r.length);for(let a=0;a<r.length;a++){const l=r[a];i.allowCredentials[a]=Object.assign(Object.assign({},l),{id:js(l.id).buffer,type:l.type||"public-key",transports:l.transports})}}return i}function zb(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const r=e;return{id:e.id,rawId:e.id,response:{attestationObject:In(new Uint8Array(e.response.attestationObject)),clientDataJSON:In(new Uint8Array(e.response.clientDataJSON))},type:"public-key",clientExtensionResults:e.getClientExtensionResults(),authenticatorAttachment:(t=r.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function Bb(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const r=e,n=e.getClientExtensionResults(),s=e.response;return{id:e.id,rawId:e.id,response:{authenticatorData:In(new Uint8Array(s.authenticatorData)),clientDataJSON:In(new Uint8Array(s.clientDataJSON)),signature:In(new Uint8Array(s.signature)),userHandle:s.userHandle?In(new Uint8Array(s.userHandle)):void 0},type:"public-key",clientExtensionResults:n,authenticatorAttachment:(t=r.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function fv(e){return e==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(e)}function Sf(){var e,t;return!!(Et()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.create)=="function"&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.get)=="function")}async function Vb(e){try{const t=await navigator.credentials.create(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new Do("Browser returned unexpected credential type",t)}:{data:null,error:new Do("Empty credential response",t)}}catch(t){return{data:null,error:Lb({error:t,options:e})}}}async function Wb(e){try{const t=await navigator.credentials.get(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new Do("Browser returned unexpected credential type",t)}:{data:null,error:new Do("Empty credential response",t)}}catch(t){return{data:null,error:Db({error:t,options:e})}}}const qb={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"none"},Hb={userVerification:"preferred",hints:["security-key"]};function $o(...e){const t=s=>s!==null&&typeof s=="object"&&!Array.isArray(s),r=s=>s instanceof ArrayBuffer||ArrayBuffer.isView(s),n={};for(const s of e)if(s)for(const i in s){const a=s[i];if(a!==void 0)if(Array.isArray(a))n[i]=a;else if(r(a))n[i]=a;else if(t(a)){const l=n[i];t(l)?n[i]=$o(l,a):n[i]=$o(a)}else n[i]=a}return n}function Kb(e,t){return $o(qb,e,t||{})}function Gb(e,t){return $o(Hb,e,t||{})}class Jb{constructor(t){this.client=t,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(t){return this.client.mfa.enroll(Object.assign(Object.assign({},t),{factorType:"webauthn"}))}async _challenge({factorId:t,webauthn:r,friendlyName:n,signal:s},i){try{const{data:a,error:l}=await this.client.mfa.challenge({factorId:t,webauthn:r});if(!a)return{data:null,error:l};const u=s??Mb.createNewAbortSignal();if(a.webauthn.type==="create"){const{user:c}=a.webauthn.credential_options.publicKey;c.name||(c.name=`${c.id}:${n}`),c.displayName||(c.displayName=c.name)}switch(a.webauthn.type){case"create":{const c=Kb(a.webauthn.credential_options.publicKey,i==null?void 0:i.create),{data:d,error:h}=await Vb({publicKey:c,signal:u});return d?{data:{factorId:t,challengeId:a.id,webauthn:{type:a.webauthn.type,credential_response:d}},error:null}:{data:null,error:h}}case"request":{const c=Gb(a.webauthn.credential_options.publicKey,i==null?void 0:i.request),{data:d,error:h}=await Wb(Object.assign(Object.assign({},a.webauthn.credential_options),{publicKey:c,signal:u}));return d?{data:{factorId:t,challengeId:a.id,webauthn:{type:a.webauthn.type,credential_response:d}},error:null}:{data:null,error:h}}}}catch(a){return te(a)?{data:null,error:a}:{data:null,error:new Nn("Unexpected error in challenge",a)}}}async _verify({challengeId:t,factorId:r,webauthn:n}){return this.client.mfa.verify({factorId:r,challengeId:t,webauthn:n})}async _authenticate({factorId:t,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:s}},i){if(!r)return{data:null,error:new Xi("rpId is required for WebAuthn authentication")};try{if(!Sf())return{data:null,error:new Nn("Browser does not support WebAuthn",null)};const{data:a,error:l}=await this.challenge({factorId:t,webauthn:{rpId:r,rpOrigins:n},signal:s},{request:i});if(!a)return{data:null,error:l};const{webauthn:u}=a;return this._verify({factorId:t,challengeId:a.challengeId,webauthn:{type:u.type,rpId:r,rpOrigins:n,credential_response:u.credential_response}})}catch(a){return te(a)?{data:null,error:a}:{data:null,error:new Nn("Unexpected error in authenticate",a)}}}async _register({friendlyName:t,rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:s},i){if(!r)return{data:null,error:new Xi("rpId is required for WebAuthn registration")};try{if(!Sf())return{data:null,error:new Nn("Browser does not support WebAuthn",null)};const{data:a,error:l}=await this._enroll({friendlyName:t});if(!a)return await this.client.mfa.listFactors().then(d=>{var h;return(h=d.data)===null||h===void 0?void 0:h.all.find(f=>f.factor_type==="webauthn"&&f.friendly_name===t&&f.status!=="unverified")}).then(d=>d?this.client.mfa.unenroll({factorId:d==null?void 0:d.id}):void 0),{data:null,error:l};const{data:u,error:c}=await this._challenge({factorId:a.id,friendlyName:a.friendly_name,webauthn:{rpId:r,rpOrigins:n},signal:s},{create:i});return u?this._verify({factorId:a.id,challengeId:u.challengeId,webauthn:{rpId:r,rpOrigins:n,type:u.webauthn.type,credential_response:u.webauthn.credential_response}}):{data:null,error:c}}catch(a){return te(a)?{data:null,error:a}:{data:null,error:new Nn("Unexpected error in register",a)}}}}Ob();const Qb={url:K_,storageKey:G_,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:J_,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function kf(e,t,r){return await r()}const rs={};class Zi{get jwks(){var t,r;return(r=(t=rs[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(t){rs[this.storageKey]=Object.assign(Object.assign({},rs[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,r;return(r=(t=rs[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){rs[this.storageKey]=Object.assign(Object.assign({},rs[this.storageKey]),{cachedAt:t})}constructor(t){var r,n;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Zi.nextInstanceID,Zi.nextInstanceID+=1,this.instanceID>0&&Et()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const s=Object.assign(Object.assign({},Qb),t);if(this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.persistSession=s.persistSession,this.storageKey=s.storageKey,this.autoRefreshToken=s.autoRefreshToken,this.admin=new Cb({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=cv(s.fetch),this.lock=s.lock||kf,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,s.lock?this.lock=s.lock:Et()&&(!((r=globalThis==null?void 0:globalThis.navigator)===null||r===void 0)&&r.locks)?this.lock=Tb:this.lock=kf,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new Jb(this)},this.persistSession?(s.storage?this.storage=s.storage:uv()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=jf(this.memoryStorage)),s.userStorage&&(this.userStorage=s.userStorage)):(this.memoryStorage={},this.storage=jf(this.memoryStorage)),Et()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(n=this.broadcastChannel)===null||n===void 0||n.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}_debug(...t){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${av}) ${new Date().toISOString()}`,...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{const r=ub(window.location.href);let n="none";if(this._isImplicitGrantCallback(r)?n="implicit":await this._isPKCECallback(r)&&(n="pkce"),Et()&&this.detectSessionInUrl&&n!=="none"){const{data:s,error:i}=await this._getSessionFromURL(r,n);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),tb(i)){const u=(t=i.details)===null||t===void 0?void 0:t.code;if(u==="identity_already_exists"||u==="identity_not_found"||u==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:a,redirectType:l}=s;return this._debug("#_initialize()","detected session in URL",a,"redirect type",l),await this._saveSession(a),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",a):await this._notifyAllSubscribers("SIGNED_IN",a)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return te(r)?{error:r}:{error:new Nn("Unexpected error during initialization",r)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var r,n,s;try{const i=await ie(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(r=t==null?void 0:t.options)===null||r===void 0?void 0:r.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(s=t==null?void 0:t.options)===null||s===void 0?void 0:s.captchaToken}},xform:Yt}),{data:a,error:l}=i;if(l||!a)return{data:{user:null,session:null},error:l};const u=a.session,c=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",u)),{data:{user:c,session:u},error:null}}catch(i){if(te(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(t){var r,n,s;try{let i;if("email"in t){const{email:d,password:h,options:f}=t;let m=null,x=null;this.flowType==="pkce"&&([m,x]=await Zn(this.storage,this.storageKey)),i=await ie(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:f==null?void 0:f.emailRedirectTo,body:{email:d,password:h,data:(r=f==null?void 0:f.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken},code_challenge:m,code_challenge_method:x},xform:Yt})}else if("phone"in t){const{phone:d,password:h,options:f}=t;i=await ie(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:d,password:h,data:(n=f==null?void 0:f.data)!==null&&n!==void 0?n:{},channel:(s=f==null?void 0:f.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken}},xform:Yt})}else throw new Va("You must provide either an email or phone number and a password");const{data:a,error:l}=i;if(l||!a)return{data:{user:null,session:null},error:l};const u=a.session,c=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",u)),{data:{user:c,session:u},error:null}}catch(i){if(te(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(t){try{let r;if("email"in t){const{email:i,password:a,options:l}=t;r=await ie(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:a,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:_f})}else if("phone"in t){const{phone:i,password:a,options:l}=t;r=await ie(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:a,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:_f})}else throw new Va("You must provide either an email or phone number and a password");const{data:n,error:s}=r;return s?{data:{user:null,session:null},error:s}:!n||!n.session||!n.user?{data:{user:null,session:null},error:new Xn}:(n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:s})}catch(r){if(te(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOAuth(t){var r,n,s,i;return await this._handleProviderSignIn(t.provider,{redirectTo:(r=t.options)===null||r===void 0?void 0:r.redirectTo,scopes:(n=t.options)===null||n===void 0?void 0:n.scopes,queryParams:(s=t.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(i=t.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:r}=t;switch(r){case"ethereum":return await this.signInWithEthereum(t);case"solana":return await this.signInWithSolana(t);default:throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}}async signInWithEthereum(t){var r,n,s,i,a,l,u,c,d,h,f;let m,x;if("message"in t)m=t.message,x=t.signature;else{const{chain:g,wallet:_,statement:v,options:p}=t;let y;if(Et())if(typeof _=="object")y=_;else{const z=window;if("ethereum"in z&&typeof z.ethereum=="object"&&"request"in z.ethereum&&typeof z.ethereum.request=="function")y=z.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof _!="object"||!(p!=null&&p.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");y=_}const j=new URL((r=p==null?void 0:p.url)!==null&&r!==void 0?r:window.location.href),N=await y.request({method:"eth_requestAccounts"}).then(z=>z).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!N||N.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const P=hv(N[0]);let b=(n=p==null?void 0:p.signInWithEthereum)===null||n===void 0?void 0:n.chainId;if(!b){const z=await y.request({method:"eth_chainId"});b=Rb(z)}const I={domain:j.host,address:P,statement:v,uri:j.href,version:"1",chainId:b,nonce:(s=p==null?void 0:p.signInWithEthereum)===null||s===void 0?void 0:s.nonce,issuedAt:(a=(i=p==null?void 0:p.signInWithEthereum)===null||i===void 0?void 0:i.issuedAt)!==null&&a!==void 0?a:new Date,expirationTime:(l=p==null?void 0:p.signInWithEthereum)===null||l===void 0?void 0:l.expirationTime,notBefore:(u=p==null?void 0:p.signInWithEthereum)===null||u===void 0?void 0:u.notBefore,requestId:(c=p==null?void 0:p.signInWithEthereum)===null||c===void 0?void 0:c.requestId,resources:(d=p==null?void 0:p.signInWithEthereum)===null||d===void 0?void 0:d.resources};m=Ab(I),x=await y.request({method:"personal_sign",params:[Ib(m),P]})}try{const{data:g,error:_}=await ie(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:m,signature:x},!((h=t.options)===null||h===void 0)&&h.captchaToken?{gotrue_meta_security:{captcha_token:(f=t.options)===null||f===void 0?void 0:f.captchaToken}}:null),xform:Yt});if(_)throw _;return!g||!g.session||!g.user?{data:{user:null,session:null},error:new Xn}:(g.session&&(await this._saveSession(g.session),await this._notifyAllSubscribers("SIGNED_IN",g.session)),{data:Object.assign({},g),error:_})}catch(g){if(te(g))return{data:{user:null,session:null},error:g};throw g}}async signInWithSolana(t){var r,n,s,i,a,l,u,c,d,h,f,m;let x,g;if("message"in t)x=t.message,g=t.signature;else{const{chain:_,wallet:v,statement:p,options:y}=t;let j;if(Et())if(typeof v=="object")j=v;else{const P=window;if("solana"in P&&typeof P.solana=="object"&&("signIn"in P.solana&&typeof P.solana.signIn=="function"||"signMessage"in P.solana&&typeof P.solana.signMessage=="function"))j=P.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof v!="object"||!(y!=null&&y.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");j=v}const N=new URL((r=y==null?void 0:y.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in j&&j.signIn){const P=await j.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},y==null?void 0:y.signInWithSolana),{version:"1",domain:N.host,uri:N.href}),p?{statement:p}:null));let b;if(Array.isArray(P)&&P[0]&&typeof P[0]=="object")b=P[0];else if(P&&typeof P=="object"&&"signedMessage"in P&&"signature"in P)b=P;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in b&&"signature"in b&&(typeof b.signedMessage=="string"||b.signedMessage instanceof Uint8Array)&&b.signature instanceof Uint8Array)x=typeof b.signedMessage=="string"?b.signedMessage:new TextDecoder().decode(b.signedMessage),g=b.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in j)||typeof j.signMessage!="function"||!("publicKey"in j)||typeof j!="object"||!j.publicKey||!("toBase58"in j.publicKey)||typeof j.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");x=[`${N.host} wants you to sign in with your Solana account:`,j.publicKey.toBase58(),...p?["",p,""]:[""],"Version: 1",`URI: ${N.href}`,`Issued At: ${(s=(n=y==null?void 0:y.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&s!==void 0?s:new Date().toISOString()}`,...!((i=y==null?void 0:y.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${y.signInWithSolana.notBefore}`]:[],...!((a=y==null?void 0:y.signInWithSolana)===null||a===void 0)&&a.expirationTime?[`Expiration Time: ${y.signInWithSolana.expirationTime}`]:[],...!((l=y==null?void 0:y.signInWithSolana)===null||l===void 0)&&l.chainId?[`Chain ID: ${y.signInWithSolana.chainId}`]:[],...!((u=y==null?void 0:y.signInWithSolana)===null||u===void 0)&&u.nonce?[`Nonce: ${y.signInWithSolana.nonce}`]:[],...!((c=y==null?void 0:y.signInWithSolana)===null||c===void 0)&&c.requestId?[`Request ID: ${y.signInWithSolana.requestId}`]:[],...!((h=(d=y==null?void 0:y.signInWithSolana)===null||d===void 0?void 0:d.resources)===null||h===void 0)&&h.length?["Resources",...y.signInWithSolana.resources.map(b=>`- ${b}`)]:[]].join(`
`);const P=await j.signMessage(new TextEncoder().encode(x),"utf8");if(!P||!(P instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");g=P}}try{const{data:_,error:v}=await ie(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:x,signature:In(g)},!((f=t.options)===null||f===void 0)&&f.captchaToken?{gotrue_meta_security:{captcha_token:(m=t.options)===null||m===void 0?void 0:m.captchaToken}}:null),xform:Yt});if(v)throw v;return!_||!_.session||!_.user?{data:{user:null,session:null},error:new Xn}:(_.session&&(await this._saveSession(_.session),await this._notifyAllSubscribers("SIGNED_IN",_.session)),{data:Object.assign({},_),error:v})}catch(_){if(te(_))return{data:{user:null,session:null},error:_};throw _}}async _exchangeCodeForSession(t){const r=await vn(this.storage,`${this.storageKey}-code-verifier`),[n,s]=(r??"").split("/");try{const{data:i,error:a}=await ie(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:n},xform:Yt});if(await Mr(this.storage,`${this.storageKey}-code-verifier`),a)throw a;return!i||!i.session||!i.user?{data:{user:null,session:null,redirectType:null},error:new Xn}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:s??null}),error:a})}catch(i){if(te(i))return{data:{user:null,session:null,redirectType:null},error:i};throw i}}async signInWithIdToken(t){try{const{options:r,provider:n,token:s,access_token:i,nonce:a}=t,l=await ie(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:s,access_token:i,nonce:a,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:Yt}),{data:u,error:c}=l;return c?{data:{user:null,session:null},error:c}:!u||!u.session||!u.user?{data:{user:null,session:null},error:new Xn}:(u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",u.session)),{data:u,error:c})}catch(r){if(te(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOtp(t){var r,n,s,i,a;try{if("email"in t){const{email:l,options:u}=t;let c=null,d=null;this.flowType==="pkce"&&([c,d]=await Zn(this.storage,this.storageKey));const{error:h}=await ie(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(r=u==null?void 0:u.data)!==null&&r!==void 0?r:{},create_user:(n=u==null?void 0:u.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken},code_challenge:c,code_challenge_method:d},redirectTo:u==null?void 0:u.emailRedirectTo});return{data:{user:null,session:null},error:h}}if("phone"in t){const{phone:l,options:u}=t,{data:c,error:d}=await ie(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(s=u==null?void 0:u.data)!==null&&s!==void 0?s:{},create_user:(i=u==null?void 0:u.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken},channel:(a=u==null?void 0:u.channel)!==null&&a!==void 0?a:"sms"}});return{data:{user:null,session:null,messageId:c==null?void 0:c.message_id},error:d}}throw new Va("You must provide either an email or phone number.")}catch(l){if(te(l))return{data:{user:null,session:null},error:l};throw l}}async verifyOtp(t){var r,n;try{let s,i;"options"in t&&(s=(r=t.options)===null||r===void 0?void 0:r.redirectTo,i=(n=t.options)===null||n===void 0?void 0:n.captchaToken);const{data:a,error:l}=await ie(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:i}}),redirectTo:s,xform:Yt});if(l)throw l;if(!a)throw new Error("An error occurred on token verification.");const u=a.session,c=a.user;return u!=null&&u.access_token&&(await this._saveSession(u),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",u)),{data:{user:c,session:u},error:null}}catch(s){if(te(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithSSO(t){var r,n,s;try{let i=null,a=null;return this.flowType==="pkce"&&([i,a]=await Zn(this.storage,this.storageKey)),await ie(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(n=(r=t.options)===null||r===void 0?void 0:r.redirectTo)!==null&&n!==void 0?n:void 0}),!((s=t==null?void 0:t.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:a}),headers:this.headers,xform:kb})}catch(i){if(te(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:r},error:n}=t;if(n)throw n;if(!r)throw new Fr;const{error:s}=await ie(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return{data:{user:null,session:null},error:s}})}catch(t){if(te(t))return{data:{user:null,session:null},error:t};throw t}}async resend(t){try{const r=`${this.url}/resend`;if("email"in t){const{email:n,type:s,options:i}=t,{error:a}=await ie(this.fetch,"POST",r,{headers:this.headers,body:{email:n,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:a}}else if("phone"in t){const{phone:n,type:s,options:i}=t,{data:a,error:l}=await ie(this.fetch,"POST",r,{headers:this.headers,body:{phone:n,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:a==null?void 0:a.message_id},error:l}}throw new Va("You must provide either an email or phone number and a type")}catch(r){if(te(r))return{data:{user:null,session:null},error:r};throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(t,r){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await n,await r()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=r();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await t(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const r=await vn(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?t=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const n=t.expires_at?t.expires_at*1e3-Date.now()<Wl:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",t.expires_at),!n){if(this.userStorage){const a=await vn(this.userStorage,this.storageKey+"-user");a!=null&&a.user?t.user=a.user:t.user=Kl()}if(this.storage.isServer&&t.user){let a=this.suppressGetSessionWarning;t=new Proxy(t,{get:(u,c,d)=>(!a&&c==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),a=!0,this.suppressGetSessionWarning=!0),Reflect.get(u,c,d))})}return{data:{session:t},error:null}}const{data:s,error:i}=await this._callRefreshToken(t.refresh_token);return i?{data:{session:null},error:i}:{data:{session:s},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(t){return t?await this._getUser(t):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(t){try{return t?await ie(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:Hr}):await this._useSession(async r=>{var n,s,i;const{data:a,error:l}=r;if(l)throw l;return!(!((n=a.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Fr}:await ie(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(s=a.session)===null||s===void 0?void 0:s.access_token)!==null&&i!==void 0?i:void 0,xform:Hr})})}catch(r){if(te(r))return eb(r)&&(await this._removeSession(),await Mr(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:r};throw r}}async updateUser(t,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,r))}async _updateUser(t,r={}){try{return await this._useSession(async n=>{const{data:s,error:i}=n;if(i)throw i;if(!s.session)throw new Fr;const a=s.session;let l=null,u=null;this.flowType==="pkce"&&t.email!=null&&([l,u]=await Zn(this.storage,this.storageKey));const{data:c,error:d}=await ie(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:l,code_challenge_method:u}),jwt:a.access_token,xform:Hr});if(d)throw d;return a.user=c.user,await this._saveSession(a),await this._notifyAllSubscribers("USER_UPDATED",a),{data:{user:a.user},error:null}})}catch(n){if(te(n))return{data:{user:null},error:n};throw n}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new Fr;const r=Date.now()/1e3;let n=r,s=!0,i=null;const{payload:a}=Hl(t.access_token);if(a.exp&&(n=a.exp,s=n<=r),s){const{data:l,error:u}=await this._callRefreshToken(t.refresh_token);if(u)return{data:{user:null,session:null},error:u};if(!l)return{data:{user:null,session:null},error:null};i=l}else{const{data:l,error:u}=await this._getUser(t.access_token);if(u)throw u;i={access_token:t.access_token,refresh_token:t.refresh_token,user:l.user,token_type:"bearer",expires_in:n-r,expires_at:n},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(r){if(te(r))return{data:{session:null,user:null},error:r};throw r}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async r=>{var n;if(!t){const{data:a,error:l}=r;if(l)throw l;t=(n=a.session)!==null&&n!==void 0?n:void 0}if(!(t!=null&&t.refresh_token))throw new Fr;const{data:s,error:i}=await this._callRefreshToken(t.refresh_token);return i?{data:{user:null,session:null},error:i}:s?{data:{user:s.user,session:s},error:null}:{data:{user:null,session:null},error:null}})}catch(r){if(te(r))return{data:{user:null,session:null},error:r};throw r}}async _getSessionFromURL(t,r){try{if(!Et())throw new Wa("No browser detected.");if(t.error||t.error_description||t.error_code)throw new Wa(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new pf("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Wa("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new pf("No code detected.");const{data:p,error:y}=await this._exchangeCodeForSession(t.code);if(y)throw y;const j=new URL(window.location.href);return j.searchParams.delete("code"),window.history.replaceState(window.history.state,"",j.toString()),{data:{session:p.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:s,access_token:i,refresh_token:a,expires_in:l,expires_at:u,token_type:c}=t;if(!i||!l||!a||!c)throw new Wa("No session defined in URL");const d=Math.round(Date.now()/1e3),h=parseInt(l);let f=d+h;u&&(f=parseInt(u));const m=f-d;m*1e3<=ns&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${m}s, should have been closer to ${h}s`);const x=f-h;d-x>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",x,f,d):d-x<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",x,f,d);const{data:g,error:_}=await this._getUser(i);if(_)throw _;const v={provider_token:n,provider_refresh_token:s,access_token:i,expires_in:h,expires_at:f,refresh_token:a,token_type:c,user:g.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:v,redirectType:t.type},error:null}}catch(n){if(te(n))return{data:{session:null,redirectType:null},error:n};throw n}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const r=await vn(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&r)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async r=>{var n;const{data:s,error:i}=r;if(i)return{error:i};const a=(n=s.session)===null||n===void 0?void 0:n.access_token;if(a){const{error:l}=await this.admin.signOut(a,t);if(l&&!(Z_(l)&&(l.status===404||l.status===401||l.status===403)))return{error:l}}return t!=="others"&&(await this._removeSession(),await Mr(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(t){const r=lb(),n={id:r,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,n),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:n}}}async _emitInitialSession(t){return await this._useSession(async r=>{var n,s;try{const{data:{session:i},error:a}=r;if(a)throw a;await((n=this.stateChangeEmitters.get(t))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",t,"session",i)}catch(i){await((s=this.stateChangeEmitters.get(t))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",i),console.error(i)}})}async resetPasswordForEmail(t,r={}){let n=null,s=null;this.flowType==="pkce"&&([n,s]=await Zn(this.storage,this.storageKey,!0));try{return await ie(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:n,code_challenge_method:s,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(i){if(te(i))return{data:null,error:i};throw i}}async getUserIdentities(){var t;try{const{data:r,error:n}=await this.getUser();if(n)throw n;return{data:{identities:(t=r.user.identities)!==null&&t!==void 0?t:[]},error:null}}catch(r){if(te(r))return{data:null,error:r};throw r}}async linkIdentity(t){return"token"in t?this.linkIdentityIdToken(t):this.linkIdentityOAuth(t)}async linkIdentityOAuth(t){var r;try{const{data:n,error:s}=await this._useSession(async i=>{var a,l,u,c,d;const{data:h,error:f}=i;if(f)throw f;const m=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(a=t.options)===null||a===void 0?void 0:a.redirectTo,scopes:(l=t.options)===null||l===void 0?void 0:l.scopes,queryParams:(u=t.options)===null||u===void 0?void 0:u.queryParams,skipBrowserRedirect:!0});return await ie(this.fetch,"GET",m,{headers:this.headers,jwt:(d=(c=h.session)===null||c===void 0?void 0:c.access_token)!==null&&d!==void 0?d:void 0})});if(s)throw s;return Et()&&!(!((r=t.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(n==null?void 0:n.url),{data:{provider:t.provider,url:n==null?void 0:n.url},error:null}}catch(n){if(te(n))return{data:{provider:t.provider,url:null},error:n};throw n}}async linkIdentityIdToken(t){return await this._useSession(async r=>{var n;try{const{error:s,data:{session:i}}=r;if(s)throw s;const{options:a,provider:l,token:u,access_token:c,nonce:d}=t,h=await ie(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(n=i==null?void 0:i.access_token)!==null&&n!==void 0?n:void 0,body:{provider:l,id_token:u,access_token:c,nonce:d,link_identity:!0,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:Yt}),{data:f,error:m}=h;return m?{data:{user:null,session:null},error:m}:!f||!f.session||!f.user?{data:{user:null,session:null},error:new Xn}:(f.session&&(await this._saveSession(f.session),await this._notifyAllSubscribers("USER_UPDATED",f.session)),{data:f,error:m})}catch(s){if(te(s))return{data:{user:null,session:null},error:s};throw s}})}async unlinkIdentity(t){try{return await this._useSession(async r=>{var n,s;const{data:i,error:a}=r;if(a)throw a;return await ie(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(s=(n=i.session)===null||n===void 0?void 0:n.access_token)!==null&&s!==void 0?s:void 0})})}catch(r){if(te(r))return{data:null,error:r};throw r}}async _refreshAccessToken(t){const r=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(r,"begin");try{const n=Date.now();return await hb(async s=>(s>0&&await db(200*Math.pow(2,s-1)),this._debug(r,"refreshing attempt",s),await ie(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:Yt})),(s,i)=>{const a=200*Math.pow(2,s);return i&&ql(i)&&Date.now()+a-n<ns})}catch(n){if(this._debug(r,"error",n),te(n))return{data:{session:null,user:null},error:n};throw n}finally{this._debug(r,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,r){const n=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",r,"url",n),Et()&&!r.skipBrowserRedirect&&window.location.assign(n),{data:{provider:t,url:n},error:null}}async _recoverAndRefresh(){var t,r;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const s=await vn(this.storage,this.storageKey);if(s&&this.userStorage){let a=await vn(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!a&&(a={user:s.user},await ss(this.userStorage,this.storageKey+"-user",a)),s.user=(t=a==null?void 0:a.user)!==null&&t!==void 0?t:Kl()}else if(s&&!s.user&&!s.user){const a=await vn(this.storage,this.storageKey+"-user");a&&(a!=null&&a.user)?(s.user=a.user,await Mr(this.storage,this.storageKey+"-user"),await ss(this.storage,this.storageKey,s)):s.user=Kl()}if(this._debug(n,"session from storage",s),!this._isValidSession(s)){this._debug(n,"session is not valid"),s!==null&&await this._removeSession();return}const i=((r=s.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<Wl;if(this._debug(n,`session has${i?"":" not"} expired with margin of ${Wl}s`),i){if(this.autoRefreshToken&&s.refresh_token){const{error:a}=await this._callRefreshToken(s.refresh_token);a&&(console.error(a),ql(a)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",a),await this._removeSession()))}}else if(s.user&&s.user.__isUserNotAvailableProxy===!0)try{const{data:a,error:l}=await this._getUser(s.access_token);!l&&(a!=null&&a.user)?(s.user=a.user,await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)):this._debug(n,"could not get user data, skipping SIGNED_IN notification")}catch(a){console.error("Error getting user data:",a),this._debug(n,"error getting user data, skipping SIGNED_IN notification",a)}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(n,"error",s),console.error(s);return}finally{this._debug(n,"end")}}async _callRefreshToken(t){var r,n;if(!t)throw new Fr;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new al;const{data:i,error:a}=await this._refreshAccessToken(t);if(a)throw a;if(!i.session)throw new Fr;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const l={data:i.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(i){if(this._debug(s,"error",i),te(i)){const a={data:null,error:i};return ql(i)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(a),a}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(i),i}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(t,r,n=!0){const s=`#_notifyAllSubscribers(${t})`;this._debug(s,"begin",r,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:t,session:r});const i=[],a=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(t,r)}catch(u){i.push(u)}});if(await Promise.all(a),i.length>0){for(let l=0;l<i.length;l+=1)console.error(i[l]);throw i[0]}}finally{this._debug(s,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0;const r=Object.assign({},t),n=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!n&&r.user&&await ss(this.userStorage,this.storageKey+"-user",{user:r.user});const s=Object.assign({},r);delete s.user;const i=wf(s);await ss(this.storage,this.storageKey,i)}else{const s=wf(r);await ss(this.storage,this.storageKey,s)}}async _removeSession(){this._debug("#_removeSession()"),await Mr(this.storage,this.storageKey),await Mr(this.storage,this.storageKey+"-code-verifier"),await Mr(this.storage,this.storageKey+"-user"),this.userStorage&&await Mr(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&Et()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),ns);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async r=>{const{data:{session:n}}=r;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((n.expires_at*1e3-t)/ns);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${ns}ms, refresh threshold is ${sc} ticks`),s<=sc&&await this._callRefreshToken(n.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof dv)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Et()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const r=`#_onVisibilityChanged(${t})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,r,n){const s=[`provider=${encodeURIComponent(r)}`];if(n!=null&&n.redirectTo&&s.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&s.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[i,a]=await Zn(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(a)}`});s.push(l.toString())}if(n!=null&&n.queryParams){const i=new URLSearchParams(n.queryParams);s.push(i.toString())}return n!=null&&n.skipBrowserRedirect&&s.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${t}?${s.join("&")}`}async _unenroll(t){try{return await this._useSession(async r=>{var n;const{data:s,error:i}=r;return i?{data:null,error:i}:await ie(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(te(r))return{data:null,error:r};throw r}}async _enroll(t){try{return await this._useSession(async r=>{var n,s;const{data:i,error:a}=r;if(a)return{data:null,error:a};const l=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:t.factorType==="totp"?{issuer:t.issuer}:{}),{data:u,error:c}=await ie(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token});return c?{data:null,error:c}:(t.factorType==="totp"&&u.type==="totp"&&(!((s=u==null?void 0:u.totp)===null||s===void 0)&&s.qr_code)&&(u.totp.qr_code=`data:image/svg+xml;utf-8,${u.totp.qr_code}`),{data:u,error:null})})}catch(r){if(te(r))return{data:null,error:r};throw r}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:s,error:i}=r;if(i)return{data:null,error:i};const a=Object.assign({challenge_id:t.challengeId},"webauthn"in t?{webauthn:Object.assign(Object.assign({},t.webauthn),{credential_response:t.webauthn.type==="create"?zb(t.webauthn.credential_response):Bb(t.webauthn.credential_response)})}:{code:t.code}),{data:l,error:u}=await ie(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:a,headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token});return u?{data:null,error:u}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+l.expires_in},l)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",l),{data:l,error:u})})}catch(r){if(te(r))return{data:null,error:r};throw r}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:s,error:i}=r;if(i)return{data:null,error:i};const a=await ie(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:t,headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token});if(a.error)return a;const{data:l}=a;if(l.type!=="webauthn")return{data:l,error:null};switch(l.webauthn.type){case"create":return{data:Object.assign(Object.assign({},l),{webauthn:Object.assign(Object.assign({},l.webauthn),{credential_options:Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:Ub(l.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},l),{webauthn:Object.assign(Object.assign({},l.webauthn),{credential_options:Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:Fb(l.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(r){if(te(r))return{data:null,error:r};throw r}})}async _challengeAndVerify(t){const{data:r,error:n}=await this._challenge({factorId:t.factorId});return n?{data:null,error:n}:await this._verify({factorId:t.factorId,challengeId:r.id,code:t.code})}async _listFactors(){var t;const{data:{user:r},error:n}=await this.getUser();if(n)return{data:null,error:n};const s={all:[],phone:[],totp:[],webauthn:[]};for(const i of(t=r==null?void 0:r.factors)!==null&&t!==void 0?t:[])s.all.push(i),i.status==="verified"&&s[i.factor_type].push(i);return{data:s,error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async t=>{var r,n;const{data:{session:s},error:i}=t;if(i)return{data:null,error:i};if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:a}=Hl(s.access_token);let l=null;a.aal&&(l=a.aal);let u=l;((n=(r=s.user.factors)===null||r===void 0?void 0:r.filter(h=>h.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(u="aal2");const d=a.amr||[];return{data:{currentLevel:l,nextLevel:u,currentAuthenticationMethods:d},error:null}}))}async fetchJwk(t,r={keys:[]}){let n=r.keys.find(l=>l.kid===t);if(n)return n;const s=Date.now();if(n=this.jwks.keys.find(l=>l.kid===t),n&&this.jwks_cached_at+Y_>s)return n;const{data:i,error:a}=await ie(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(a)throw a;return!i.keys||i.keys.length===0||(this.jwks=i,this.jwks_cached_at=s,n=i.keys.find(l=>l.kid===t),!n)?null:n}async getClaims(t,r={}){try{let n=t;if(!n){const{data:m,error:x}=await this.getSession();if(x||!m.session)return{data:null,error:x};n=m.session.access_token}const{header:s,payload:i,signature:a,raw:{header:l,payload:u}}=Hl(n);r!=null&&r.allowExpired||wb(i.exp);const c=!s.alg||s.alg.startsWith("HS")||!s.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(s.kid,r!=null&&r.keys?{keys:r.keys}:r==null?void 0:r.jwks);if(!c){const{error:m}=await this.getUser(n);if(m)throw m;return{data:{claims:i,header:s,signature:a},error:null}}const d=xb(s.alg),h=await crypto.subtle.importKey("jwk",c,d,!0,["verify"]);if(!await crypto.subtle.verify(d,h,a,ab(`${l}.${u}`)))throw new oc("Invalid JWT signature");return{data:{claims:i,header:s,signature:a},error:null}}catch(n){if(te(n))return{data:null,error:n};throw n}}}Zi.nextInstanceID=0;const Yb=Zi;class Xb extends Yb{constructor(t){super(t)}}class Zb{constructor(t,r,n){var s,i,a;this.supabaseUrl=t,this.supabaseKey=r;const l=H_(t);if(!r)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",l),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",l),this.storageUrl=new URL("storage/v1",l),this.functionsUrl=new URL("functions/v1",l);const u=`sb-${l.hostname.split(".")[0]}-auth-token`,c={db:M_,realtime:F_,auth:Object.assign(Object.assign({},U_),{storageKey:u}),global:$_},d=q_(n??{},c);this.storageKey=(s=d.auth.storageKey)!==null&&s!==void 0?s:"",this.headers=(i=d.global.headers)!==null&&i!==void 0?i:{},d.accessToken?(this.accessToken=d.accessToken,this.auth=new Proxy({},{get:(h,f)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(f)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((a=d.auth)!==null&&a!==void 0?a:{},this.headers,d.global.fetch),this.fetch=V_(r,this._getAccessToken.bind(this),d.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},d.realtime)),this.rest=new Kx(new URL("rest/v1",l).href,{headers:this.headers,schema:d.db.schema,fetch:this.fetch}),this.storage=new A_(this.storageUrl.href,this.headers,this.fetch,n==null?void 0:n.storage),d.accessToken||this._listenForAuthEvents()}get functions(){return new Ux(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,r={},n={head:!1,get:!1,count:void 0}){return this.rest.rpc(t,r,n)}channel(t,r={config:{}}){return this.realtime.channel(t,r)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var t,r;if(this.accessToken)return await this.accessToken();const{data:n}=await this.auth.getSession();return(r=(t=n.session)===null||t===void 0?void 0:t.access_token)!==null&&r!==void 0?r:this.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:r,detectSessionInUrl:n,storage:s,userStorage:i,storageKey:a,flowType:l,lock:u,debug:c},d,h){const f={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Xb({url:this.authUrl.href,headers:Object.assign(Object.assign({},f),d),storageKey:a,autoRefreshToken:t,persistSession:r,detectSessionInUrl:n,storage:s,userStorage:i,flowType:l,lock:u,debug:c,fetch:h,hasCustomAuthorizationHeader:Object.keys(this.headers).some(m=>m.toLowerCase()==="authorization")})}_initRealtimeClient(t){return new c_(this.realtimeUrl.href,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((r,n)=>{this._handleTokenChanged(r,"CLIENT",n==null?void 0:n.access_token)})}_handleTokenChanged(t,r,n){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==n?(this.changedAccessToken=n,this.realtime.setAuth(n)):t==="SIGNED_OUT"&&(this.realtime.setAuth(),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const ej=(e,t,r)=>new Zb(e,t,r);function tj(){if(typeof window<"u"||typeof process>"u")return!1;const e=process.version;if(e==null)return!1;const t=e.match(/^v(\d+)\./);return t?parseInt(t[1],10)<=18:!1}tj()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const rj="https://ojvulwptexxflqxwclwz.supabase.co",nj="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im9qdnVsd3B0ZXh4ZmxxeHdjbHd6Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjA2Mjc5OTksImV4cCI6MjA3NjIwMzk5OX0.tYpi49K0gS_Cggpn2liw5cPNxl7IGOaYpefMJGh8lyA",K=ej(rj,nj,{auth:{persistSession:!0,autoRefreshToken:!0}}),pv=w.createContext(void 0);function sj({children:e}){const[t,r]=w.useState(null),[n,s]=w.useState(!0);w.useEffect(()=>{let a=!0;(async()=>{const{data:c}=await K.auth.getSession();a&&(r(c.session?{user:c.session.user}:null),s(!1))})();const{data:u}=K.auth.onAuthStateChange((c,d)=>{a&&r(d?{user:d.user}:null)});return()=>{a=!1,u.subscription.unsubscribe()}},[]);const i=w.useMemo(()=>({session:t,loading:n,signIn:async(a,l)=>{const{data:u,error:c}=await K.auth.signInWithPassword({email:a,password:l});if(c)return{ok:!1,error:c.message};const{data:d,error:h}=await K.auth.getSession();return h?{ok:!1,error:h.message}:(r(d.session?{user:d.session.user}:null),{ok:!0})},signOut:async()=>{await K.auth.signOut(),r(null)}}),[t,n]);return o.jsx(pv.Provider,{value:i,children:e})}function ol(){const e=w.useContext(pv);if(!e)throw new Error("useAuth must be used within AuthProvider");return e}const mv=w.createContext(void 0);function ij({children:e}){const[t,r]=w.useState("light");w.useEffect(()=>{const i=localStorage.getItem("theme");if(i){r(i),document.documentElement.classList.toggle("dark",i==="dark");return}const l=window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light";r(l),document.documentElement.classList.toggle("dark",l==="dark")},[]);const n=i=>{r(i),localStorage.setItem("theme",i),document.documentElement.classList.toggle("dark",i==="dark")},s=()=>n(t==="dark"?"light":"dark");return o.jsx(mv.Provider,{value:{theme:t,setTheme:n,toggle:s},children:e})}function aj(){const e=w.useContext(mv);if(!e)throw new Error("useTheme must be used within ThemeProvider");return e}function xd(){const{theme:e,toggle:t}=aj();return o.jsx("button",{onClick:t,className:"btn",title:"Alternar tema",children:e==="dark"?" Escuro":" Claro"})}function oj(){return o.jsxs("div",{className:"min-h-screen flex flex-col",children:[o.jsx("header",{className:"sticky top-0 z-40 border-b border-border/60 bg-[var(--bg)]/80 backdrop-blur",children:o.jsxs("div",{className:"mx-auto w-full max-w-screen-2xl px-4 md:px-6 flex h-14 items-center justify-between",children:[o.jsx(zs,{to:"/",className:"font-semibold tracking-tight",children:"VISIONAGENDA"}),o.jsxs("nav",{className:"hidden md:flex items-center gap-2",children:[o.jsx(Xe,{to:"/precos",className:({isActive:e})=>["rounded-md px-3 py-2 text-sm transition",e?"bg-muted text-foreground":"text-mutedForeground hover:text-foreground hover:bg-muted"].join(" "),children:"Preos"}),o.jsx(Xe,{to:"/contato",className:({isActive:e})=>["rounded-md px-3 py-2 text-sm transition",e?"bg-muted text-foreground":"text-mutedForeground hover:text-foreground hover:bg-muted"].join(" "),children:"Contato"})]}),o.jsx(xd,{})]})}),o.jsx("main",{className:"mx-auto w-full max-w-screen-2xl px-4 md:px-6 py-6",children:o.jsx(la,{})}),o.jsx("footer",{className:"mt-auto border-t border-border bg-card",children:o.jsxs("div",{className:"mx-auto w-full max-w-screen-2xl px-4 md:px-6 py-4 text-sm text-mutedForeground",children:[" ",new Date().getFullYear()," VisionWare  VISIONAGENDA SaaS"]})})]})}/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lj=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),uj=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,r,n)=>n?n.toUpperCase():r.toLowerCase()),Ef=e=>{const t=uj(e);return t.charAt(0).toUpperCase()+t.slice(1)},gv=(...e)=>e.filter((t,r,n)=>!!t&&t.trim()!==""&&n.indexOf(t)===r).join(" ").trim(),cj=e=>{for(const t in e)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var dj={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hj=w.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:n,className:s="",children:i,iconNode:a,...l},u)=>w.createElement("svg",{ref:u,...dj,width:t,height:t,stroke:e,strokeWidth:n?Number(r)*24/Number(t):r,className:gv("lucide",s),...!i&&!cj(l)&&{"aria-hidden":"true"},...l},[...a.map(([c,d])=>w.createElement(c,d)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qe=(e,t)=>{const r=w.forwardRef(({className:n,...s},i)=>w.createElement(hj,{ref:i,iconNode:t,className:gv(`lucide-${lj(Ef(e))}`,`lucide-${e}`,n),...s}));return r.displayName=Ef(e),r};/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fj=[["path",{d:"M4.929 4.929 19.07 19.071",key:"196cmz"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Mo=qe("ban",fj);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pj=[["path",{d:"M10 12h4",key:"a56b0p"}],["path",{d:"M10 8h4",key:"1sr2af"}],["path",{d:"M14 21v-3a2 2 0 0 0-4 0v3",key:"1rgiei"}],["path",{d:"M6 10H4a2 2 0 0 0-2 2v7a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-2",key:"secmi2"}],["path",{d:"M6 21V5a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v16",key:"16ra0t"}]],lc=qe("building-2",pj);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mj=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]],uc=qe("calendar-days",mj);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gj=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],vj=qe("chevron-left",gj);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yj=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],wj=qe("chevron-right",yj);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xj=[["path",{d:"m7 15 5 5 5-5",key:"1hf1tw"}],["path",{d:"m7 9 5-5 5 5",key:"sgt6xg"}]],cc=qe("chevrons-up-down",xj);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _j=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],bj=qe("circle-check",_j);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jj=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],Sj=qe("circle-x",jj);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kj=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}]],Ej=qe("clipboard",kj);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nj=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Ls=qe("eye",Nj);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cj=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],Uo=qe("log-out",Cj);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pj=[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]],vv=qe("menu",Pj);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tj=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]],on=qe("pencil",Tj);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oj=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Hs=qe("plus",Oj);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rj=[["path",{d:"M12 2v10",key:"mnfbl"}],["path",{d:"M18.4 6.6a9 9 0 1 1-12.77.04",key:"obofu9"}]],ea=qe("power",Rj);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ij=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],yv=qe("search",Ij);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Aj=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"M9 12h6",key:"1c52cq"}],["path",{d:"M12 9v6",key:"199k2o"}]],Nf=qe("shield-plus",Aj);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lj=[["path",{d:"M11 2v2",key:"1539x4"}],["path",{d:"M5 2v2",key:"1yf1q8"}],["path",{d:"M5 3H4a2 2 0 0 0-2 2v4a6 6 0 0 0 12 0V5a2 2 0 0 0-2-2h-1",key:"rb5t3r"}],["path",{d:"M8 15a6 6 0 0 0 12 0v-3",key:"x18d4x"}],["circle",{cx:"20",cy:"10",r:"2",key:"ts1r5v"}]],Cf=qe("stethoscope",Lj);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dj=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],gr=qe("trash-2",Dj);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $j=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],Pf=qe("users",$j);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mj=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Lr=qe("x",Mj);function Uj(e){var s,i;const t=e,r=((s=t==null?void 0:t.user)==null?void 0:s.email)??void 0,n=((i=t==null?void 0:t.user)==null?void 0:i.user_metadata)??{};return(n==null?void 0:n.full_name)||(n==null?void 0:n.name)||(r?r.split("@")[0]:"")||"Usurio"}function Fj({onNavigate:e}){const t=({to:r,children:n})=>o.jsx(Xe,{to:r,onClick:e,className:({isActive:s})=>"block px-4 py-2 rounded-md hover:bg-muted "+(s?"bg-muted font-medium":""),children:n});return o.jsxs("aside",{className:"sidebar p-4 space-y-2 hidden md:block",children:[o.jsx("div",{className:"text-sm uppercase text-mutedForeground mb-2",children:"Admin"}),o.jsx(t,{to:"/admin/clients",children:"Clientes"}),o.jsx(t,{to:"/admin/plans",children:"Planos"}),o.jsx(t,{to:"/admin/billing",children:"Financeiro"})]})}function zj(){const{session:e,signOut:t}=ol(),[r,n]=w.useState(!1),[s,i]=w.useState("Usurio");return w.useEffect(()=>i(Uj(e)),[e]),o.jsxs("div",{className:"app-grid",children:[o.jsx(Fj,{}),o.jsxs("div",{className:"flex min-h-screen flex-col",children:[o.jsx("header",{className:"header sticky top-0 z-40 border-b border-border/60 bg-[var(--bg)]/80 backdrop-blur",children:o.jsxs("div",{className:"container mx-auto flex h-14 items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("button",{className:"md:hidden inline-flex items-center rounded-md bg-card text-foreground border border-border p-2 hover:bg-muted focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-border","aria-label":"Abrir menu",onClick:()=>n(!0),children:o.jsx(vv,{className:"h-5 w-5"})}),o.jsx(zs,{to:"/",className:"font-semibold tracking-tight",children:"VISIONAGENDA  Admin"}),o.jsxs("nav",{className:"ml-4 hidden md:flex items-center gap-2",children:[o.jsx(Xe,{to:"/admin/clients",className:({isActive:a})=>["rounded-md px-3 py-2 text-sm transition",a?"bg-muted text-foreground":"text-mutedForeground hover:text-foreground hover:bg-muted"].join(" "),children:"Clientes"}),o.jsx(Xe,{to:"/admin/plans",className:({isActive:a})=>["rounded-md px-3 py-2 text-sm transition",a?"bg-muted text-foreground":"text-mutedForeground hover:text-foreground hover:bg-muted"].join(" "),children:"Planos"}),o.jsx(Xe,{to:"/admin/billing",className:({isActive:a})=>["rounded-md px-3 py-2 text-sm transition",a?"bg-muted text-foreground":"text-mutedForeground hover:text-foreground hover:bg-muted"].join(" "),children:"Financeiro"})]})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsxs("div",{className:"hidden md:flex items-center gap-1 text-sm",children:[o.jsx("span",{className:"text-mutedForeground",children:"Ol,"}),o.jsx("span",{className:"font-medium",children:s})]}),o.jsx(xd,{}),o.jsxs("button",{onClick:t,className:"inline-flex items-center gap-2 rounded-md bg-card text-foreground border border-border px-3 py-2 text-sm hover:bg-muted focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-border",title:"Sair",children:[o.jsx(Uo,{className:"h-4 w-4"}),o.jsx("span",{className:"hidden sm:inline",children:"Sair"})]})]})]})}),o.jsx("main",{className:"content",children:o.jsx(la,{})}),o.jsx("footer",{className:"mt-auto border-t border-border bg-card",children:o.jsxs("div",{className:"container mx-auto py-4 text-sm text-mutedForeground",children:[" ",new Date().getFullYear()," VisionWare  VISIONAGENDA SaaS"]})})]}),o.jsxs("div",{className:`md:hidden fixed inset-0 z-50 transition ${r?"pointer-events-auto":"pointer-events-none"}`,"aria-hidden":!r,children:[o.jsx("div",{className:`absolute inset-0 bg-black/50 transition-opacity ${r?"opacity-100":"opacity-0"}`,onClick:()=>n(!1)}),o.jsxs("aside",{className:`absolute left-0 top-0 h-full w-72 border-r border-border bg-card text-foreground
                      shadow-xl transition-transform ${r?"translate-x-0":"-translate-x-full"}`,role:"dialog","aria-modal":"true",children:[o.jsxs("div",{className:"flex items-center justify-between px-4 h-14 border-b border-border bg-card",children:[o.jsx("span",{className:"font-semibold",children:"Menu"}),o.jsx("button",{className:"rounded-md bg-card text-foreground border border-border p-2 hover:bg-muted focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-border",onClick:()=>n(!1),"aria-label":"Fechar menu",children:o.jsx(Lr,{className:"h-5 w-5"})})]}),o.jsxs("div",{className:"p-3",children:[o.jsxs("div",{className:"mb-3 text-sm",children:["Ol, ",o.jsx("span",{className:"font-medium",children:s})]}),o.jsxs("nav",{className:"space-y-2",children:[o.jsx(Xe,{to:"/admin/clients",onClick:()=>n(!1),className:({isActive:a})=>`block rounded-md px-3 py-2 text-sm border border-border
                   ${a?"bg-muted text-foreground":"bg-card text-mutedForeground hover:text-foreground hover:bg-muted"}`,children:"Clientes"}),o.jsx(Xe,{to:"/admin/plans",onClick:()=>n(!1),className:({isActive:a})=>`block rounded-md px-3 py-2 text-sm border border-border
                   ${a?"bg-muted text-foreground":"bg-card text-mutedForeground hover:text-foreground hover:bg-muted"}`,children:"Planos"}),o.jsx(Xe,{to:"/admin/billing",onClick:()=>n(!1),className:({isActive:a})=>`block rounded-md px-3 py-2 text-sm border border-border
                   ${a?"bg-muted text-foreground":"bg-card text-mutedForeground hover:text-foreground hover:bg-muted"}`,children:"Financeiro"})]}),o.jsxs("button",{onClick:()=>{n(!1),t()},className:"mt-3 w-full rounded-md bg-card text-foreground border border-border px-3 py-2 text-left text-sm hover:bg-muted focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-border",children:[o.jsx(Uo,{className:"mr-2 inline h-4 w-4"}),"Sair"]})]})]})]})]})}const fi="va_active_org_id";function Ks(){const[e,t]=w.useState([]),[r,n]=w.useState(()=>{try{return localStorage.getItem(fi)||null}catch{return null}}),[s,i]=w.useState(!0);async function a(){var c;i(!0);try{const{data:d}=await K.auth.getUser(),h=(c=d.user)==null?void 0:c.id;if(!h){t([]),n(null);return}const f=await K.from("org_members").select("org:organizations (id, name, created_at)").eq("user_id",h);let m=[];if(!f.error&&f.data&&(m=f.data.flatMap(g=>g.org?Array.isArray(g.org)?g.org:[g.org]:[]).filter(g=>!!(g!=null&&g.id&&(g!=null&&g.name))).reduce((g,_)=>(g.some(v=>v.id===_.id)||g.push({..._,created_at:_.created_at??null}),g),[])),m.length===0){const x=await K.from("organizations").select("id, name, created_at").order("created_at",{ascending:!0});!x.error&&x.data&&(m=x.data.map(g=>({id:g.id,name:g.name,created_at:g.created_at??null})))}m.sort((x,g)=>{const _=x.created_at??"9999-12-31",v=g.created_at??"9999-12-31";return _.localeCompare(v)}),t(m),n(x=>{var v;const _=x&&m.some(p=>p.id===x)?x:((v=m[0])==null?void 0:v.id)??null;try{_?localStorage.setItem(fi,_):localStorage.removeItem(fi)}catch{}return _})}finally{i(!1)}}function l(c){try{c?localStorage.setItem(fi,c):localStorage.removeItem(fi)}catch{}n(c)}return w.useEffect(()=>{a()},[]),w.useMemo(()=>({orgs:e,activeOrgId:r,setActiveOrgId:l,loading:s,refresh:a}),[e,r,s])}function Bj(e){var s,i;const t=e,r=((s=t==null?void 0:t.user)==null?void 0:s.email)??void 0,n=((i=t==null?void 0:t.user)==null?void 0:i.user_metadata)??{};return(n==null?void 0:n.full_name)||(n==null?void 0:n.name)||(r?r.split("@")[0]:"Usurio")}const dr=({isActive:e})=>["rounded-md px-3 py-2 text-sm transition",e?"bg-muted text-foreground":"text-mutedForeground hover:text-foreground hover:bg-muted"].join(" ");function Vj(){const{session:e,signOut:t}=ol(),[r,n]=w.useState(!1),[s,i]=w.useState("Usurio"),{orgs:a,activeOrgId:l,setActiveOrgId:u,loading:c}=Ks(),d=w.useMemo(()=>a.find(h=>h.id===l)||null,[a,l]);return w.useEffect(()=>i(Bj(e)),[e]),o.jsxs("div",{className:"min-h-screen flex flex-col",children:[o.jsx("header",{className:"sticky top-0 z-40 border-b border-border/60 bg-[var(--bg)]/80 backdrop-blur",children:o.jsxs("div",{className:"mx-auto w-full max-w-screen-2xl px-4 md:px-6 flex h-14 items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("button",{className:"md:hidden inline-flex items-center rounded-md bg-card text-foreground border border-border p-2 hover:bg-muted focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-border","aria-label":"Abrir menu",onClick:()=>n(!0),children:o.jsx(vv,{className:"h-5 w-5"})}),o.jsx(zs,{to:"/app",className:"font-semibold tracking-tight",children:"VISIONAGENDA  App"}),o.jsxs("nav",{className:"ml-4 hidden md:flex items-center gap-2",children:[o.jsxs(Xe,{to:"/app/agenda",className:dr,children:[o.jsx(uc,{className:"h-4 w-4 mr-1"}),"Agenda"]}),o.jsxs(Xe,{to:"/app/clinics",className:dr,children:[o.jsx(lc,{className:"h-4 w-4 mr-1"}),"Minhas clnicas"]}),o.jsxs(Xe,{to:"/app/patients",className:dr,children:[o.jsx(Pf,{className:"h-4 w-4 mr-1"}),"Pacientes"]}),o.jsxs(Xe,{to:"/app/doctors",className:dr,children:[o.jsx(Cf,{className:"h-4 w-4 mr-1"}),"Mdicos"]}),o.jsxs(Xe,{to:"/app/insurances",className:dr,children:[o.jsx(Nf,{className:"h-4 w-4 mr-1"}),"Convnios"]})]})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("div",{className:"hidden md:flex items-center",children:o.jsxs("div",{className:"input flex items-center justify-between w-64 mr-2",children:[o.jsx("select",{className:"bg-transparent w-full outline-none",value:l??"",onChange:h=>u(h.target.value||null),disabled:c||a.length===0,"aria-label":"Selecionar organizao",children:a.map(h=>o.jsx("option",{value:h.id,children:h.name},h.id))}),o.jsx(cc,{className:"w-4 h-4 opacity-60"})]})}),o.jsxs("div",{className:"hidden md:flex items-center gap-1 text-sm",children:[o.jsx("span",{className:"text-mutedForeground",children:"Ol,"}),o.jsx("span",{className:"font-medium",children:s}),d&&o.jsxs(o.Fragment,{children:[o.jsx("span",{className:"mx-1 text-mutedForeground",children:""}),o.jsx("span",{className:"text-mutedForeground truncate max-w-[180px]",title:d.name,children:d.name})]})]}),o.jsx(xd,{}),o.jsxs("button",{onClick:t,className:"inline-flex items-center gap-2 rounded-md bg-card text-foreground border border-border px-3 py-2 text-sm hover:bg-muted focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-border",title:"Sair",children:[o.jsx(Uo,{className:"h-4 w-4"}),o.jsx("span",{className:"hidden sm:inline",children:"Sair"})]})]})]})}),o.jsx("main",{className:"mx-auto w-full max-w-screen-2xl px-4 md:px-6 py-6",children:o.jsx(la,{})}),o.jsx("footer",{className:"mt-auto border-t border-border bg-card",children:o.jsxs("div",{className:"mx-auto w-full max-w-screen-2xl px-4 md:px-6 py-4 text-sm text-mutedForeground",children:[" ",new Date().getFullYear()," VisionWare  VISIONAGENDA SaaS"]})}),o.jsxs("div",{className:`md:hidden fixed inset-0 z-50 transition ${r?"pointer-events-auto":"pointer-events-none"}`,"aria-hidden":!r,children:[o.jsx("div",{className:`absolute inset-0 bg-black/50 transition-opacity ${r?"opacity-100":"opacity-0"}`,onClick:()=>n(!1)}),o.jsxs("aside",{className:`absolute left-0 top-0 h-full w-72 border-r border-border bg-card text-foreground shadow-xl transition-transform ${r?"translate-x-0":"-translate-x-full"}`,role:"dialog","aria-modal":"true",children:[o.jsxs("div",{className:"flex items-center justify-between px-4 h-14 border-b border-border bg-card",children:[o.jsx("span",{className:"font-semibold",children:"Menu"}),o.jsx("button",{className:"rounded-md bg-card text-foreground border border-border p-2 hover:bg-muted focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-border",onClick:()=>n(!1),"aria-label":"Fechar menu",children:o.jsx(Lr,{className:"h-5 w-5"})})]}),o.jsxs("div",{className:"p-3 space-y-3",children:[o.jsxs("div",{className:"text-sm",children:["Ol, ",o.jsx("span",{className:"font-medium",children:s})]}),o.jsxs("div",{className:"input flex items-center justify-between",children:[o.jsx("select",{className:"bg-transparent w-full outline-none",value:l??"",onChange:h=>u(h.target.value||null),disabled:c||a.length===0,"aria-label":"Selecionar organizao",children:a.map(h=>o.jsx("option",{value:h.id,children:h.name},h.id))}),o.jsx(cc,{className:"w-4 h-4 opacity-60"})]}),o.jsxs("nav",{className:"space-y-2",children:[o.jsxs(Xe,{to:"/app/agenda",onClick:()=>n(!1),className:dr,children:[o.jsx(uc,{className:"h-4 w-4 mr-1"})," Agenda"]}),o.jsxs(Xe,{to:"/app/clinics",onClick:()=>n(!1),className:dr,children:[o.jsx(lc,{className:"h-4 w-4 mr-1"})," Minhas clnicas"]}),o.jsxs(Xe,{to:"/app/patients",onClick:()=>n(!1),className:dr,children:[o.jsx(Pf,{className:"h-4 w-4 mr-1"})," Pacientes"]}),o.jsxs(Xe,{to:"/app/doctors",onClick:()=>n(!1),className:dr,children:[o.jsx(Cf,{className:"h-4 w-4 mr-1"})," Mdicos"]}),o.jsxs(Xe,{to:"/app/insurances",onClick:()=>n(!1),className:dr,children:[o.jsx(Nf,{className:"h-4 w-4 mr-1"})," Convnios"]})]}),o.jsxs("button",{onClick:()=>{n(!1),t()},className:"mt-2 w-full rounded-md bg-card text-foreground border border-border px-3 py-2 text-left text-sm hover:bg-muted focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-border",children:[o.jsx(Uo,{className:"mr-2 inline h-4 w-4"})," Sair"]})]})]})]})]})}function Wj(){const{session:e}=ol();return e!=null&&e.user?o.jsx(la,{}):o.jsx(Rn,{to:"/login",replace:!0})}function qj(){var n;const{session:e}=ol(),[t,r]=w.useState(null);return w.useEffect(()=>{let s=!0;async function i(){var u;if(!((u=e==null?void 0:e.user)!=null&&u.email)){s&&r(!1);return}const{data:a,error:l}=await K.from("admin_emails").select("email").ilike("email",e.user.email).maybeSingle();s&&r(l?!1:!!a)}return i(),()=>{s=!1}},[(n=e==null?void 0:e.user)==null?void 0:n.email]),e!=null&&e.user?t===null?null:t?o.jsx(la,{}):o.jsx(Rn,{to:"/app",replace:!0}):o.jsx(Rn,{to:"/login",replace:!0})}function Hj(){const e=oa(),[t,r]=w.useState(""),[n,s]=w.useState(""),[i,a]=w.useState(!1),[l,u]=w.useState(null),[c,d]=w.useState(!1),[h,f]=w.useState("");async function m(g){g.preventDefault(),u(null),a(!0);try{const{error:_}=await K.auth.signInWithPassword({email:t,password:n});if(_)throw _;e("/app",{replace:!0})}catch(_){u((_==null?void 0:_.message)||"No foi possvel entrar.")}finally{a(!1)}}async function x(g){g.preventDefault(),u(null),a(!0);try{const _=(h||t).trim();if(!_)throw new Error("Informe seu e-mail.");const{error:v}=await K.auth.resetPasswordForEmail(_,{redirectTo:`${window.location.origin}/reset-password`});if(v)throw v;alert("Enviamos um e-mail com o link para redefinir sua senha."),d(!1)}catch(_){u((_==null?void 0:_.message)||"Falha ao enviar e-mail de redefinio.")}finally{a(!1)}}return o.jsx("div",{className:"mx-auto w-full max-w-screen-2xl px-4 md:px-6 py-8 md:py-14",children:o.jsxs("div",{className:"grid items-stretch gap-8 md:grid-cols-2",children:[o.jsxs("div",{className:"hidden md:flex flex-col justify-center",children:[o.jsx("h1",{className:"text-3xl font-semibold tracking-tight",children:"Bem-vindo ao VISIONAGENDA"}),o.jsx("p",{className:"mt-2 text-mutedForeground",children:"Acesse o sistema para gerenciar sua agenda, clnicas, mdicos e convnios em um s lugar."}),o.jsxs("div",{className:"mt-6 grid grid-cols-2 gap-3 text-sm",children:[o.jsxs("div",{className:"card p-3",children:[o.jsx("div",{className:"font-medium",children:"Agenda inteligente"}),o.jsx("div",{className:"text-mutedForeground",children:"Visualize e confirme atendimentos rapidamente."})]}),o.jsxs("div",{className:"card p-3",children:[o.jsx("div",{className:"font-medium",children:"Multi-clnica"}),o.jsx("div",{className:"text-mutedForeground",children:"Troque de organizao sem sair do app."})]})]})]}),o.jsxs("div",{className:"card p-6 md:p-8 max-w-[480px] md:max-w-none md:ml-auto",children:[o.jsxs("div",{className:"mb-4",children:[o.jsx("div",{className:"text-2xl font-semibold tracking-tight",children:"Entrar"}),o.jsx("div",{className:"text-sm text-mutedForeground",children:"Use seu e-mail e senha cadastrados."})]}),o.jsxs("form",{onSubmit:m,className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"label",children:"E-mail"}),o.jsx("input",{type:"email",className:"input",value:t,onChange:g=>r(g.target.value),placeholder:"seu@email.com",autoComplete:"username",required:!0})]}),o.jsxs("div",{children:[o.jsx("label",{className:"label",children:"Senha"}),o.jsx("input",{type:"password",className:"input",value:n,onChange:g=>s(g.target.value),placeholder:"",autoComplete:"current-password",required:!0})]}),l&&o.jsx("div",{className:"text-sm text-red-600 border border-red-500/40 bg-red-500/5 rounded-md px-3 py-2",children:l}),o.jsxs("div",{className:"flex items-center justify-between gap-3",children:[o.jsx("button",{className:"btn",disabled:i,children:i?"Entrando":"Entrar"}),o.jsx("button",{type:"button",className:"text-sm text-mutedForeground hover:underline",onClick:()=>d(g=>!g),children:"Esqueci minha senha"})]})]}),c&&o.jsxs("form",{onSubmit:x,className:"mt-6 space-y-3",children:[o.jsx("div",{className:"text-sm",children:"Informe seu e-mail para receber o link de redefinio."}),o.jsx("input",{type:"email",className:"input",value:h,onChange:g=>f(g.target.value),placeholder:"seu@email.com"}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{className:"btn",disabled:i,children:"Enviar link"}),o.jsx("button",{type:"button",className:"btn",onClick:()=>d(!1),children:"Cancelar"})]})]}),o.jsxs("div",{className:"mt-6 text-xs text-mutedForeground",children:["Recebeu um link de redefinio e voltou aqui? Abra-o novamente ou acesse"," ",o.jsx(zs,{to:"/reset-password",className:"underline",children:"/reset-password"}),"."]})]})]})})}function Kj(){const e=oa(),[t,r]=w.useState(""),[n,s]=w.useState(""),[i,a]=w.useState(null),[l,u]=w.useState(!1),[c,d]=w.useState(!1);async function h(f){if(f.preventDefault(),a(null),!t||t.length<6){a("A senha deve ter pelo menos 6 caracteres.");return}if(t!==n){a("As senhas no coincidem.");return}d(!0);try{const{error:m}=await K.auth.updateUser({password:t});if(m)throw m;u(!0),setTimeout(()=>e("/login",{replace:!0}),1200)}catch(m){a((m==null?void 0:m.message)||"No foi possvel alterar a senha.")}finally{d(!1)}}return l?o.jsxs("div",{className:"max-w-md mx-auto card p-4",children:[o.jsx("div",{className:"text-green-600 font-medium",children:"Senha alterada!"}),o.jsx("div",{className:"text-sm text-mutedForeground",children:"Voc j pode entrar com sua nova senha."})]}):o.jsxs("div",{className:"max-w-md mx-auto",children:[o.jsx("h1",{children:"Definir nova senha"}),o.jsxs("form",{onSubmit:h,className:"mt-4 space-y-3",children:[o.jsxs("div",{children:[o.jsx("label",{className:"label",children:"Nova senha"}),o.jsx("input",{type:"password",className:"input",value:t,onChange:f=>r(f.target.value),placeholder:"",autoFocus:!0})]}),o.jsxs("div",{children:[o.jsx("label",{className:"label",children:"Confirmar senha"}),o.jsx("input",{type:"password",className:"input",value:n,onChange:f=>s(f.target.value),placeholder:""})]}),i&&o.jsx("div",{className:"text-sm text-red-600 border border-red-500/40 bg-red-500/5 rounded-md px-3 py-2",children:i}),o.jsx("div",{className:"flex gap-2",children:o.jsx("button",{className:"btn",disabled:c,children:c?"Salvando":"Salvar"})})]})]})}function Gj(){const{token:e}=Jw(),t=oa(),[r,n]=w.useState(!0),[s,i]=w.useState(null),[a,l]=w.useState(null),[u,c]=w.useState(null),[d,h]=w.useState(null);w.useEffect(()=>{(async()=>{var g,_;if(!e){c("Token invlido."),n(!1);return}try{const{data:v}=await K.auth.getSession();l(((_=(g=v.session)==null?void 0:g.user)==null?void 0:_.email)??null);const{data:p,error:y}=await K.rpc("invite_verify",{p_token:e});if(y)throw y;i(p)}catch(v){c((v==null?void 0:v.message)||"Erro ao validar convite")}finally{n(!1)}})()},[e]);async function f(){if(s!=null&&s.email){h("Enviando link de login para o e-mail do convite"),c(null);try{const g=`${window.location.origin}/accept-invite/${e}`,{error:_}=await K.auth.signInWithOtp({email:s.email,options:{emailRedirectTo:g}});if(_)throw _;h("Enviamos um link de login para seu e-mail. Abra-o e volte para c.")}catch(g){c((g==null?void 0:g.message)||"No foi possvel enviar o link de login.")}}}async function m(){if(e){h("Aceitando convite"),c(null);try{const{data:g,error:_}=await K.rpc("accept_invite",{p_token:e});if(_)throw _;t("/admin/clients",{replace:!0})}catch(g){const _=String((g==null?void 0:g.message)||"");_.includes("email_mismatch")?c("Voc est logado com um e-mail diferente do convite."):_.includes("expired_token")?c("Este convite expirou."):_.includes("already_accepted")?c("Este convite j foi aceito."):_.includes("invalid_token")?c("Convite invlido."):_.includes("not_authenticated")?c("Voc precisa estar logado para aceitar o convite."):c("No foi possvel aceitar o convite.")}finally{h(null)}}}if(r)return o.jsx("div",{className:"vf-container py-10",children:o.jsx("div",{className:"card p-6",children:"Validando convite"})});if(!s)return o.jsx("div",{className:"vf-container py-10",children:o.jsx("div",{className:"card p-6 text-red-600",children:"Convite no encontrado."})});if(s.is_expired)return o.jsx("div",{className:"vf-container py-10",children:o.jsxs("div",{className:"card p-6",children:[o.jsx("h2",{className:"text-lg font-semibold mb-2",children:"Convite expirado"}),o.jsx("p",{children:"Pea um novo convite ao administrador."})]})});if(!s.is_valid)return o.jsx("div",{className:"vf-container py-10",children:o.jsxs("div",{className:"card p-6",children:[o.jsx("h2",{className:"text-lg font-semibold mb-2",children:"Convite invlido"}),o.jsx("p",{children:"Este convite no est mais disponvel."})]})});const x=!a||a.toLowerCase()!==(s.email||"").toLowerCase();return o.jsx("div",{className:"vf-container py-10",children:o.jsxs("div",{className:"card p-6 space-y-4",children:[o.jsx("h1",{className:"text-xl font-semibold",children:"Aceitar convite"}),o.jsxs("div",{className:"text-sm",children:[o.jsxs("div",{children:[o.jsx("b",{children:"Empresa:"})," ",s.org_name]}),o.jsxs("div",{children:[o.jsx("b",{children:"E-mail do convite:"})," ",s.email]}),o.jsxs("div",{children:[o.jsx("b",{children:"Papel:"})," ",s.role]})]}),x?o.jsx(o.Fragment,{children:o.jsx("div",{className:"rounded-md border border-border p-3 text-sm",children:a?o.jsxs(o.Fragment,{children:["Voc est logado como ",o.jsx("b",{children:a}),", mas o convite  para ",o.jsx("b",{children:s.email}),".",o.jsxs("div",{className:"mt-3 flex gap-2",children:[o.jsx("button",{className:"rounded-md border border-border px-3 py-2 hover:bg-muted",onClick:()=>K.auth.signOut(),children:"Sair"}),o.jsxs("button",{className:"rounded-md border border-border px-3 py-2 hover:bg-muted",onClick:f,children:["Entrar como ",s.email]})]})]}):o.jsxs(o.Fragment,{children:["Voc precisa entrar como ",o.jsx("b",{children:s.email})," para aceitar.",o.jsx("div",{className:"mt-3",children:o.jsx("button",{className:"rounded-md border border-border px-3 py-2 hover:bg-muted",onClick:f,children:"Receber link de login"})})]})})}):o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{className:"rounded-md border border-border px-3 py-2 hover:bg-muted",onClick:m,children:"Aceitar convite"}),o.jsx(zs,{to:"/",className:"rounded-md border border-border px-3 py-2 hover:bg-muted",children:"Cancelar"})]}),d&&o.jsx("div",{className:"text-sm text-blue-600 bg-blue-500/10 border border-blue-500/40 rounded p-2",children:d}),u&&o.jsx("div",{className:"text-sm text-red-600 bg-red-500/10 border border-red-500/40 rounded p-2",children:u})]})})}const yr=e=>(e||"").replace(/\D+/g,"");function Jj(e){return yr(e).slice(0,11).replace(/^(\d{3})(\d)/,"$1.$2").replace(/^(\d{3})\.(\d{3})(\d)/,"$1.$2.$3").replace(/^(\d{3})\.(\d{3})\.(\d{3})(\d)/,"$1.$2.$3-$4")}function Qj(e){return yr(e).slice(0,14).replace(/^(\d{2})(\d)/,"$1.$2").replace(/^(\d{2})\.(\d{3})(\d)/,"$1.$2.$3").replace(/^(\d{2})\.(\d{3})\.(\d{3})(\d)/,"$1.$2.$3/$4").replace(/^(\d{2})\.(\d{3})\.(\d{3})\/(\d{4})(\d)/,"$1.$2.$3/$4-$5")}function Yj(e){const t=yr(e);return t.length<=11?Jj(t):Qj(t)}function Xj(e){const t=yr(e);if(t.length!==11||/^(\d)\1+$/.test(t))return!1;let r=0;for(let s=0;s<9;s++)r+=parseInt(t[s])*(10-s);let n=11-r%11;if(n=n>=10?0:n,n!==parseInt(t[9]))return!1;r=0;for(let s=0;s<10;s++)r+=parseInt(t[s])*(11-s);return n=11-r%11,n=n>=10?0:n,n===parseInt(t[10])}function Zj(e){const t=yr(e);if(t.length!==14||/^(\d)\1+$/.test(t))return!1;let r=t.length-2,n=t.substring(0,r);const s=t.substring(r);let i=0,a=r-7;for(let u=r;u>=1;u--)i+=parseInt(n[r-u])*a--,a<2&&(a=9);let l=i%11<2?0:11-i%11;if(l!==parseInt(s[0]))return!1;r=r+1,n=t.substring(0,r),i=0,a=r-7;for(let u=r;u>=1;u--)i+=parseInt(n[r-u])*a--,a<2&&(a=9);return l=i%11<2?0:11-i%11,l===parseInt(s[1])}function eS(e){const t=yr(e);return t.length<=11?Xj(t):Zj(t)}function tS(e){const t=yr(e).slice(0,11);return t.length<=10?t.replace(/^(\d{2})(\d)/,"($1) $2").replace(/(\d{4})(\d)/,"$1-$2"):t.replace(/^(\d{2})(\d)/,"($1) $2").replace(/(\d{5})(\d)/,"$1-$2")}function rS(e){return yr(e).slice(0,8).replace(/^(\d{5})(\d{1,3})/,"$1-$2")}async function nS(e){const t=yr(e);if(t.length!==8)return null;try{const r=await fetch(`https://viacep.com.br/ws/${t}/json/`);if(!r.ok)return null;const n=await r.json();return n!=null&&n.erro?null:{address_line1:n.logradouro||"",district:n.bairro||"",city:n.localidade||"",state:n.uf||""}}catch{return null}}function sS(...e){return e.filter(Boolean).join(" ")}function vt({onClick:e,children:t,title:r,variant:n="base",disabled:s}){const i={base:"bg-card text-foreground border-border hover:bg-muted",primary:"bg-accent text-accent-foreground border-transparent hover:opacity-90",warn:"bg-yellow-500/90 text-black border-yellow-600/40 hover:opacity-90",danger:"bg-red-600 text-white border-red-700 hover:opacity-90",muted:"bg-muted text-foreground border-border hover:bg-muted/80"};return o.jsx("button",{type:"button",onClick:e,title:r,disabled:s,className:sS("inline-flex items-center gap-2 rounded-md border px-3 py-2 text-sm transition disabled:opacity-50 disabled:cursor-not-allowed",i[n]),children:t})}function Tf({open:e,onClose:t,title:r,children:n}){const s=w.useRef(null);return w.useEffect(()=>{if(!e)return;const i=a=>{a.key==="Escape"&&t()};return window.addEventListener("keydown",i),()=>window.removeEventListener("keydown",i)},[e,t]),e?o.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[o.jsx("div",{className:"absolute inset-0 bg-black/40",onClick:t,"aria-hidden":!0}),o.jsxs("div",{ref:s,role:"dialog","aria-modal":"true",onClick:i=>i.stopPropagation(),className:`\r
          relative card w-full sm:max-w-2xl\r
          max-h-[90vh] overflow-hidden\r
          flex flex-col\r
        `,children:[o.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b border-border sticky top-0 bg-background z-10",children:[o.jsx("h3",{className:"text-lg font-semibold",children:r}),o.jsxs(vt,{onClick:t,title:"Fechar",variant:"muted",children:[o.jsx(Lr,{className:"w-4 h-4"}),"Fechar"]})]}),o.jsx("div",{className:"p-4 overflow-y-auto",style:{WebkitOverflowScrolling:"touch"},children:n})]})]}):null}function iS(){const[e,t]=w.useState([]),[r,n]=w.useState([]),[s,i]=w.useState([]),[a,l]=w.useState(!1),[u,c]=w.useState(null),[d,h]=w.useState(null),[f,m]=w.useState(null),[x,g]=w.useState(""),[_,v]=w.useState(!1),[p,y]=w.useState(null),[j,N]=w.useState("invite"),[P,b]=w.useState("owner"),[I,z]=w.useState(!1),[L,ne]=w.useState(null),[O,J]=w.useState({name:"",cpfCnpj:"",phone:"",email:"",cep:"",address_line1:"",address_line2:"",district:"",city:"",state:"",planId:"",planName:"",typeId:"",typeName:""}),[M,oe]=w.useState({});async function we(){const{data:S,error:U}=await K.from("plans").select("id,name,status").eq("status","active").order("price_cents",{ascending:!0});if(U)throw new Error(U.message);const W=(S||[]).map(ae=>({id:ae.id,name:ae.name}));t(W)}async function Ie(){const{data:S,error:U}=await K.from("org_types").select("id,key,name,status").order("name",{ascending:!0});if(U)throw new Error(U.message);const W=(S||[]).filter(ae=>ae.status==="active"||!0).map(ae=>({id:ae.id,key:ae.key,name:ae.name}));n(W)}async function D(S){l(!0),h(null),m(null);const U=[];U.push({});try{let W=null,ae=null;for(const He of U){const{data:tt,error:$t}=await K.rpc("admin_clients_list",He);if(!$t){ae=Array.isArray(tt)?tt:tt?[tt]:[];break}W=$t}if(!ae){const He=(W==null?void 0:W.message)||"Erro ao carregar clientes. Verifique a funo SQL.",tt=/structure of query does not match function result type/i.test(He);h(tt?"A funo SQL 'admin_clients_list' est retornando colunas diferentes do que declara. Ajuste o RETURNS/SELECT no banco.":He),i([]);return}const je=ae.map(Se);i(je)}catch(W){h((W==null?void 0:W.message)||"Erro ao carregar clientes")}finally{l(!1)}}w.useEffect(()=>{Promise.all([we(),Ie(),D()]).catch(S=>h(S.message))},[]),w.useEffect(()=>{_?J(S=>{var U,W,ae,je;return{...S,planId:S.planId||((U=e[0])==null?void 0:U.id)||"",planName:S.planName||((W=e[0])==null?void 0:W.name)||"",typeId:S.typeId||((ae=r[0])==null?void 0:ae.id)||"",typeName:S.typeName||((je=r[0])==null?void 0:je.name)||""}}):(J(S=>{var U,W,ae,je;return{name:"",cpfCnpj:"",phone:"",email:"",cep:"",address_line1:"",address_line2:"",district:"",city:"",state:"",planId:((U=e[0])==null?void 0:U.id)||"",planName:((W=e[0])==null?void 0:W.name)||"",typeId:((ae=r[0])==null?void 0:ae.id)||"",typeName:((je=r[0])==null?void 0:je.name)||""}}),oe({}),y(null),N("invite"),b("owner"))},[_,e,r]);const Q=w.useMemo(()=>{const S=x.trim().toLowerCase();return S?s.filter(U=>[U.name,U.cpfCnpj,U.email,U.phone,U.city,U.state,U.typeName].filter(Boolean).some(W=>String(W).toLowerCase().includes(S))):s},[s,x]);function ee(S){const U={active:"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300",inactive:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-300",blocked:"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-300"};return o.jsx("span",{className:`badge ${U[S]}`,children:S==="active"?"Ativo":S==="inactive"?"Inativo":"Bloqueado"})}function fe(S){ne(S),z(!0)}function ue(S){y(S),J({...S,planId:S.planId,planName:S.planName,typeId:S.typeId,typeName:S.typeName}),N("direct"),b("owner"),v(!0)}async function Ae(S){c(S.id),h(null);try{const{data:U,error:W}=await K.rpc("admin_clients_toggle",{p_org_id:S.id});if(W)throw new Error(W.message);const ae=U;i(je=>je.map(He=>He.id===S.id?{...He,status:ae}:He))}catch(U){h((U==null?void 0:U.message)||"Erro ao atualizar status")}finally{c(null)}}async function Ve(S){c(S.id),h(null);try{const U=S.status==="blocked"?"admin_clients_unblock":"admin_clients_block",{data:W,error:ae}=await K.rpc(U,{p_org_id:S.id});if(ae)throw new Error(ae.message);const je=W;i(He=>He.map(tt=>tt.id===S.id?{...tt,status:je}:tt))}catch(U){h((U==null?void 0:U.message)||"Erro ao atualizar bloqueio")}finally{c(null)}}async function Te(S){if(confirm(`Excluir cliente "${S.name}"?`)){c(S.id),h(null);try{const{data:U,error:W}=await K.rpc("admin_clients_delete",{p_org_id:S.id});if(W)throw new Error(W.message);U&&i(ae=>ae.filter(je=>je.id!==S.id))}catch(U){h((U==null?void 0:U.message)||"Erro ao excluir cliente")}finally{c(null)}}}function me(S,U){J(W=>({...W,[S]:U}))}async function R(){if(!O.cep)return;const S=await nS(O.cep);S&&J(U=>({...U,...S}))}function Z(){var W,ae,je;const S={};(W=O.name)!=null&&W.trim()||(S.name="Informe o nome do cliente");const U=((ae=O.cpfCnpj)==null?void 0:ae.trim())||"";return U?eS(U)||(S.cpfCnpj="CPF/CNPJ invlido"):S.cpfCnpj="Informe CPF ou CNPJ",p?O.email&&!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(O.email)&&(S.email="E-mail invlido"):(je=O.email)!=null&&je.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(O.email)||(S.email="E-mail invlido"):S.email="Informe o e-mail do administrador",O.cep&&yr(O.cep).length!==8&&(S.cep="CEP invlido"),O.planId||(S.planId="Selecione um plano"),O.typeId||(S.typeId="Selecione um tipo de cliente"),oe(S),Object.keys(S).length===0}function xe(S){const U=typeof S=="string"&&S||(S==null?void 0:S.org_id)||(S==null?void 0:S.id)||"",W=(S==null?void 0:S.invite_token)??(S==null?void 0:S.token)??null;return{orgId:U,inviteToken:W}}async function lt(S,U){if(!(!S||!U))try{const ae=new Date().toISOString(),{error:je}=await K.rpc("admin_invoices_seed_plan_12",{p_org_id:S,p_plan_id:U,p_start_date:ae});je?(console.warn("Seed 12 invoices falhou:",je.message),m("Cliente criado. Obs: no foi possvel gerar as 12 mensalidades automaticamente (verifique a funo SQL).")):m("Cliente criado + 12 mensalidades geradas no Financeiro.")}catch(W){console.warn("Seed 12 invoices exception:",W==null?void 0:W.message)}}async function Dt(){var S,U;if(Z())try{if(c("form"),h(null),m(null),p){const{error:W}=await K.rpc("admin_clients_update",{p_org_id:p.id,p_name:((S=O.name)==null?void 0:S.trim())||null,p_status:p.status,p_cpf_cnpj:O.cpfCnpj||null,p_phone:O.phone||null,p_email:O.email||null,p_cep:O.cep||null,p_address_line1:O.address_line1||null,p_address_line2:O.address_line2||null,p_district:O.district||null,p_city:O.city||null,p_state:O.state||null,p_plan_id:O.planId||null,p_type_id:O.typeId||null});if(W)throw new Error(W.message);await D()}else{const W=P==="admin"?"admin":"owner",{data:ae,error:je}=await K.rpc("admin_clients_create",{p_name:(U=O.name)==null?void 0:U.trim(),p_plan_id:O.planId,p_cpf_cnpj:O.cpfCnpj||null,p_phone:O.phone||null,p_email:O.email||null,p_cep:O.cep||null,p_address_line1:O.address_line1||null,p_address_line2:O.address_line2||null,p_district:O.district||null,p_city:O.city||null,p_state:O.state||null,p_member_email:O.email||null,p_member_role:W,p_invite:j==="invite",p_type_id:O.typeId||null});if(je)throw new Error(je.message);const{orgId:He,inviteToken:tt}=xe(ae);if(await lt(He,O.planId||null),j==="invite")if(tt){const $t=`${window.location.origin}/accept-invite/${tt}`;try{await navigator.clipboard.writeText($t),m(`Cliente criado. Convite gerado e link copiado: ${$t}`)}catch{m(`Cliente criado. Convite gerado. Copie e envie o link: ${$t}`)}}else m(`Cliente criado (ID: ${He}). Um convite deve ser enviado pela Edge Function.`);else m(`Cliente criado (ID: ${He}). Usurio ${O.email||"(sem e-mail)"} foi ${O.email?"vinculado (se j existia).":"ignorado."}`);await D()}v(!1)}catch(W){h((W==null?void 0:W.message)||"Erro ao salvar")}finally{c(null)}}function Se(S){return{id:S.id,name:S.name,cpfCnpj:S.cpf_cnpj??S.cpfCnpj??"",phone:S.phone??"",email:S.email??"",cep:S.cep??S.zip??S.postal_code??"",address_line1:S.address_line1??S.address1??S.address??"",address_line2:S.address_line2??S.address2??"",district:S.district??S.bairro??"",city:S.city??"",state:S.state??S.uf??"",planId:S.plan_id??S.planId??"",planName:S.plan_name??S.planName??"",typeId:S.type_id??S.typeId??"",typeKey:S.type_key??S.typeKey??"",typeName:S.type_name??S.typeName??"",status:S.status??"inactive",hasAppointments:S.has_appointments??S.hasAppointments??!1,createdAt:S.created_at??S.createdAt??""}}return o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"flex flex-col gap-3 md:flex-row md:items-center md:justify-between",children:[o.jsx("h1",{children:"Clientes"}),o.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 sm:items-center w-full md:w-auto",children:[o.jsxs("div",{className:"relative w-full sm:w-80",children:[o.jsx(yv,{className:"w-4 h-4 absolute left-3 top-1/2 -translate-y-1/2 opacity-60"}),o.jsx("input",{className:"input pl-9",placeholder:"Pesquisar por nome, documento, e-mail ou tipo...",value:x,onChange:S=>g(S.target.value)})]}),o.jsxs(vt,{variant:"primary",onClick:()=>v(!0),disabled:a,children:[o.jsx(Hs,{className:"w-4 h-4"}),"Adicionar novo cliente"]})]})]}),d&&o.jsx("div",{className:"card p-3 text-sm text-red-600 border border-red-500/40 bg-red-500/5",children:d}),f&&o.jsx("div",{className:"card p-3 text-sm text-green-600 border border-green-500/40 bg-green-500/5",children:f}),o.jsxs("div",{className:"grid gap-3 sm:hidden",children:[a&&o.jsx("div",{className:"card p-4 text-sm text-mutedForeground",children:"Carregando"}),!a&&Q.map(S=>o.jsxs("div",{className:"card p-4",children:[o.jsxs("div",{className:"flex items-start justify-between gap-3",children:[o.jsxs("div",{children:[o.jsx("div",{className:"font-semibold text-base break-words",children:S.name}),o.jsx("div",{className:"text-mutedForeground text-sm break-all",children:S.email||"-"}),o.jsxs("div",{className:"mt-2 text-sm space-y-0.5",children:[o.jsxs("div",{children:[o.jsx("span",{className:"text-mutedForeground",children:"Tipo:"})," ",S.typeName||"-"]}),o.jsxs("div",{children:[o.jsx("span",{className:"text-mutedForeground",children:"Doc:"})," ",S.cpfCnpj||"-"]}),o.jsxs("div",{children:[o.jsx("span",{className:"text-mutedForeground",children:"Tel:"})," ",S.phone||"-"]}),o.jsxs("div",{children:[o.jsx("span",{className:"text-mutedForeground",children:"Plano:"})," ",S.planName||"-"]})]})]}),ee(S.status)]}),o.jsxs("div",{className:"mt-3 flex flex-wrap gap-2",children:[o.jsxs(vt,{onClick:()=>fe(S),title:"Visualizar",disabled:u===S.id,children:[o.jsx(Ls,{className:"w-4 h-4"})," Ver"]}),o.jsxs(vt,{onClick:()=>ue(S),title:"Editar",disabled:u===S.id,children:[o.jsx(on,{className:"w-4 h-4"})," Editar"]}),o.jsxs(vt,{onClick:()=>Ae(S),title:S.status==="active"?"Desativar":"Ativar",disabled:u===S.id,children:[o.jsx(ea,{className:"w-4 h-4"}),S.status==="active"?"Desativar":"Ativar"]}),o.jsxs(vt,{variant:"warn",onClick:()=>Ve(S),title:S.status==="blocked"?"Desbloquear":"Bloquear",disabled:u===S.id,children:[o.jsx(Mo,{className:"w-4 h-4"}),S.status==="blocked"?"Desbloquear":"Bloquear"]}),o.jsxs(vt,{variant:"danger",onClick:()=>Te(S),disabled:u===S.id,title:"Excluir",children:[o.jsx(gr,{className:"w-4 h-4"})," Excluir"]})]})]},S.id)),!a&&Q.length===0&&o.jsx("div",{className:"text-center text-mutedForeground py-6 card",children:"Nenhum cliente encontrado."})]}),o.jsx("div",{className:"card overflow-hidden hidden sm:block",children:o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"min-w-full text-sm",children:[o.jsx("thead",{className:"bg-muted/70",children:o.jsxs("tr",{className:"[&>th]:text-left [&>th]:px-4 [&>th]:py-3",children:[o.jsx("th",{children:"Cliente"}),o.jsx("th",{children:"Tipo"}),o.jsx("th",{children:"CPF/CNPJ"}),o.jsx("th",{children:"Telefone"}),o.jsx("th",{children:"Plano"}),o.jsx("th",{children:"Status"}),o.jsx("th",{className:"text-right pr-4",children:"Aes"})]})}),o.jsxs("tbody",{children:[a&&o.jsx("tr",{children:o.jsx("td",{colSpan:7,className:"px-4 py-6 text-center text-mutedForeground",children:"Carregando"})}),!a&&Q.map(S=>o.jsxs("tr",{className:"border-t border-border",children:[o.jsxs("td",{className:"px-4 py-3",children:[o.jsx("div",{className:"font-medium",children:S.name}),o.jsx("div",{className:"text-mutedForeground",children:S.email||"-"})]}),o.jsx("td",{className:"px-4 py-3",children:S.typeName||"-"}),o.jsx("td",{className:"px-4 py-3",children:S.cpfCnpj||"-"}),o.jsx("td",{className:"px-4 py-3",children:S.phone||"-"}),o.jsx("td",{className:"px-4 py-3",children:S.planName||"-"}),o.jsx("td",{className:"px-4 py-3",children:ee(S.status)}),o.jsx("td",{className:"px-4 py-3",children:o.jsxs("div",{className:"flex flex-wrap gap-2 justify-end",children:[o.jsxs(vt,{onClick:()=>fe(S),title:"Visualizar",disabled:u===S.id,children:[o.jsx(Ls,{className:"w-4 h-4"})," Ver"]}),o.jsxs(vt,{onClick:()=>ue(S),title:"Editar",disabled:u===S.id,children:[o.jsx(on,{className:"w-4 h-4"})," Editar"]}),o.jsxs(vt,{onClick:()=>Ae(S),title:S.status==="active"?"Desativar":"Ativar",disabled:u===S.id,children:[o.jsx(ea,{className:"w-4 h-4"}),S.status==="active"?"Desativar":"Ativar"]}),o.jsxs(vt,{variant:"warn",onClick:()=>Ve(S),title:S.status==="blocked"?"Desbloquear":"Bloquear",disabled:u===S.id,children:[o.jsx(Mo,{className:"w-4 h-4"}),S.status==="blocked"?"Desbloquear":"Bloquear"]}),o.jsxs(vt,{variant:"danger",onClick:()=>Te(S),disabled:u===S.id,title:"Excluir",children:[o.jsx(gr,{className:"w-4 h-4"})," Excluir"]})]})})]},S.id)),!a&&Q.length===0&&o.jsx("tr",{children:o.jsx("td",{colSpan:7,className:"px-4 py-6 text-center text-mutedForeground",children:"Nenhum cliente encontrado."})})]})]})})}),o.jsxs(Tf,{open:_,onClose:()=>v(!1),title:p?"Editar cliente":"Novo cliente",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"label",children:"Nome *"}),o.jsx("input",{className:"input",value:O.name||"",onChange:S=>me("name",S.target.value)}),M.name&&o.jsx("small",{className:"text-red-600",children:M.name})]}),o.jsxs("div",{children:[o.jsx("label",{className:"label",children:"E-mail (contato / admin)"}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("input",{className:"input flex-1",value:O.email||"",onChange:S=>me("email",S.target.value),placeholder:"contato@cliente.com"}),o.jsx("button",{type:"button",className:"rounded-md border border-border px-3 text-sm hover:bg-muted",onClick:()=>O.email&&navigator.clipboard.writeText(O.email),children:o.jsx(Ej,{className:"h-4 w-4"})})]}),M.email&&o.jsx("small",{className:"text-red-600",children:M.email}),o.jsxs("small",{className:"text-mutedForeground block mt-1",children:["Este e-mail ser usado para o ",o.jsx("b",{children:"usurio administrador"}),"."]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"label",children:"CPF/CNPJ *"}),o.jsx("input",{className:"input",value:O.cpfCnpj||"",onChange:S=>me("cpfCnpj",Yj(S.target.value))}),M.cpfCnpj&&o.jsx("small",{className:"text-red-600",children:M.cpfCnpj})]}),o.jsxs("div",{children:[o.jsx("label",{className:"label",children:"Telefone"}),o.jsx("input",{className:"input",value:O.phone||"",onChange:S=>me("phone",tS(S.target.value)),placeholder:"(00) 00000-0000"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"label",children:"CEP"}),o.jsx("input",{className:"input",value:O.cep||"",onChange:S=>me("cep",rS(S.target.value)),onBlur:R,placeholder:"00000-000"}),M.cep&&o.jsx("small",{className:"text-red-600",children:M.cep})]}),o.jsxs("div",{children:[o.jsx("label",{className:"label",children:"Endereo"}),o.jsx("input",{className:"input",value:O.address_line1||"",onChange:S=>me("address_line1",S.target.value),placeholder:"Rua/Av, nmero"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"label",children:"Complemento"}),o.jsx("input",{className:"input",value:O.address_line2||"",onChange:S=>me("address_line2",S.target.value),placeholder:"Apto, sala, etc."})]}),o.jsxs("div",{children:[o.jsx("label",{className:"label",children:"Bairro"}),o.jsx("input",{className:"input",value:O.district||"",onChange:S=>me("district",S.target.value)})]}),o.jsxs("div",{children:[o.jsx("label",{className:"label",children:"Cidade"}),o.jsx("input",{className:"input",value:O.city||"",onChange:S=>me("city",S.target.value)})]}),o.jsxs("div",{children:[o.jsx("label",{className:"label",children:"UF"}),o.jsx("input",{className:"input",value:O.state||"",onChange:S=>me("state",S.target.value.toUpperCase().slice(0,2)),placeholder:"CE"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"label",children:"Plano *"}),o.jsx("select",{className:"input",value:O.planId||"",onChange:S=>{const U=e.find(W=>W.id===S.target.value);J(W=>({...W,planId:U==null?void 0:U.id,planName:U==null?void 0:U.name}))},children:e.map(S=>o.jsx("option",{value:S.id,children:S.name},S.id))}),M.planId&&o.jsx("small",{className:"text-red-600",children:M.planId})]}),o.jsxs("div",{children:[o.jsx("label",{className:"label",children:"Tipo de cliente *"}),o.jsx("select",{className:"input",value:O.typeId||"",onChange:S=>{const U=r.find(W=>W.id===S.target.value);J(W=>({...W,typeId:U==null?void 0:U.id,typeName:U==null?void 0:U.name}))},children:r.map(S=>o.jsx("option",{value:S.id,children:S.name},S.id))}),M.typeId&&o.jsx("small",{className:"text-red-600",children:M.typeId})]}),!p&&o.jsxs("div",{className:"md:col-span-2 space-y-2",children:[o.jsx("div",{className:"label",children:"Usurio administrador do tenant"}),o.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[o.jsxs("label",{className:"inline-flex items-center gap-2 cursor-pointer",children:[o.jsx("input",{type:"radio",name:"inviteMode",checked:j==="invite",onChange:()=>N("invite")}),o.jsx("span",{children:"Enviar convite"})]}),o.jsxs("label",{className:"inline-flex items-center gap-2 cursor-pointer",children:[o.jsx("input",{type:"radio",name:"inviteMode",checked:j==="direct",onChange:()=>N("direct")}),o.jsx("span",{children:"Vincular usurio existente"})]}),o.jsxs("div",{className:"inline-flex items-center gap-2",children:[o.jsx("span",{className:"text-sm text-mutedForeground",children:"Papel:"}),o.jsxs("select",{className:"input",value:P,onChange:S=>b(S.target.value),children:[o.jsx("option",{value:"owner",children:"Owner"}),o.jsx("option",{value:"admin",children:"Admin"})]})]})]}),o.jsxs("small",{className:"text-mutedForeground block",children:[" ",o.jsx("b",{children:"Convite"}),": cria um token; o envio do e-mail  tarefa da Edge Function. ",o.jsx("br",{})," ",o.jsx("b",{children:"Vincular"}),": associa um usurio que"," ",o.jsx("i",{children:"j exista"})," com este e-mail no Auth."]})]})]}),o.jsxs("div",{className:"flex flex-col-reverse sm:flex-row sm:justify-end gap-2 mt-6",children:[o.jsx(vt,{variant:"muted",onClick:()=>v(!1),disabled:u==="form",children:"Cancelar"}),o.jsx(vt,{variant:"primary",onClick:Dt,disabled:u==="form",children:p?"Salvar alteraes":"Criar cliente"})]})]}),o.jsx(Tf,{open:I,onClose:()=>z(!1),title:"Detalhes do cliente",children:L?o.jsxs("div",{className:"space-y-3 text-sm",children:[o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[o.jsx(Qt,{label:"Nome",value:L.name}),o.jsx(Qt,{label:"E-mail",value:L.email||"-"}),o.jsx(Qt,{label:"Tipo",value:L.typeName||"-"}),o.jsx(Qt,{label:"Documento",value:L.cpfCnpj||"-"}),o.jsx(Qt,{label:"Telefone",value:L.phone||"-"}),o.jsx(Qt,{label:"Plano",value:L.planName||"-"}),o.jsx(Qt,{label:"Status",value:aS(L.status)})]}),o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[o.jsx(Qt,{label:"CEP",value:L.cep||"-"}),o.jsx(Qt,{label:"UF",value:L.state||"-"}),o.jsx(Qt,{label:"Endereo",value:[L.address_line1,L.address_line2].filter(Boolean).join(", ")||"-"}),o.jsx(Qt,{label:"Bairro/Cidade",value:[L.district,L.city].filter(Boolean).join(" / ")||"-"})]})]}):o.jsx("div",{className:"text-mutedForeground",children:"Carregando"})})]})}function Qt({label:e,value:t}){return o.jsxs("div",{children:[o.jsx("div",{className:"text-xs text-mutedForeground",children:e}),o.jsx("div",{className:"mt-0.5",children:t})]})}function aS(e){return e==="active"?"Ativo":e==="inactive"?"Inativo":"Bloqueado"}function oS(...e){return e.filter(Boolean).join(" ")}function yt({onClick:e,children:t,title:r,variant:n="base",disabled:s}){const i={base:"bg-card text-foreground border-border hover:bg-muted",primary:"bg-accent text-accent-foreground border-transparent hover:opacity-90",warn:"bg-yellow-500/90 text-black border-yellow-600/40 hover:opacity-90",danger:"bg-red-600 text-white border-red-700 hover:opacity-90",muted:"bg-muted text-foreground border-border hover:bg-muted/80"};return o.jsx("button",{type:"button",onClick:e,title:r,disabled:s,className:oS("inline-flex items-center gap-2 rounded-md border px-3 py-2 text-sm transition disabled:opacity-50 disabled:cursor-not-allowed",i[n]),children:t})}function zr(e){return new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(e/100)}function lS(e){const r=(e||"").replace(/\D+/g,"").replace(/^0+/,"")||"0",n=parseInt(r,10);return zr(n)}function Of(e){const t=(e||"").replace(/\D+/g,"");return t?parseInt(t,10):0}function Jl(e){return(e||"").normalize("NFD").replace(/[\u0300-\u036f]/g,"").toLowerCase().replace(/[^a-z0-9-_ ]+/g,"").trim().replace(/\s+/g,"-").slice(0,64)}function Rf({open:e,onClose:t,title:r,children:n}){const s=w.useRef(null);return w.useEffect(()=>{if(!e)return;const i=a=>{a.key==="Escape"&&t()};return window.addEventListener("keydown",i),()=>window.removeEventListener("keydown",i)},[e,t]),e?o.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[o.jsx("div",{className:"absolute inset-0 bg-black/40",onClick:t,"aria-hidden":!0}),o.jsxs("div",{ref:s,role:"dialog","aria-modal":"true",onClick:i=>i.stopPropagation(),className:`
          relative card w-full sm:max-w-2xl 
          max-h-[90vh] overflow-hidden
          flex flex-col
        `,children:[o.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b border-border sticky top-0 bg-background z-10",children:[o.jsx("h3",{className:"text-lg font-semibold",children:r}),o.jsxs(yt,{onClick:t,title:"Fechar",variant:"muted",children:[o.jsx(Lr,{className:"w-4 h-4"}),"Fechar"]})]}),o.jsx("div",{className:"p-4 overflow-y-auto",style:{WebkitOverflowScrolling:"touch"},children:n})]})]}):null}function yn({label:e,value:t}){return o.jsxs("div",{children:[o.jsx("div",{className:"text-xs text-mutedForeground",children:e}),o.jsx("div",{className:"mt-0.5",children:t})]})}function uS(e){return e==="active"?"Ativo":e==="inactive"?"Inativo":"Bloqueado"}function Ql(e){var t,r,n;return{id:e.id,code:e.code,name:e.name,priceCents:e.price_cents??e.priceCents??0,currency:e.currency??"BRL",limits:{clinics:((t=e.limits)==null?void 0:t.clinics)??e.clinics_limit??0,users:((r=e.limits)==null?void 0:r.users)??e.users_limit??0,doctors:((n=e.limits)==null?void 0:n.doctors)??e.doctors_limit??0},status:e.status??"inactive",createdAt:e.created_at??e.createdAt??new Date().toISOString()}}function If(e){return{id:e.id,code:e.code,name:e.name,price_cents:e.priceCents,currency:e.currency,limits:{clinics:e.limits.clinics,users:e.limits.users,doctors:e.limits.doctors},status:e.status}}function cS(){const[e,t]=w.useState([]),[r,n]=w.useState(!1),[s,i]=w.useState(null),[a,l]=w.useState(null),[u,c]=w.useState(""),[d,h]=w.useState(!1),[f,m]=w.useState(null),[x,g]=w.useState(!1),[_,v]=w.useState(null),[p,y]=w.useState(""),[j,N]=w.useState(""),[P,b]=w.useState(zr(9900)),[I,z]=w.useState("1"),[L,ne]=w.useState("5"),[O,J]=w.useState("3"),[M,oe]=w.useState({});async function we(){n(!0),l(null);try{const{data:R,error:Z}=await K.from("plans").select("id, code, name, price_cents, currency, limits, status, created_at").order("price_cents",{ascending:!0});if(Z)throw new Error(Z.message);t((R||[]).map(Ql))}catch(R){l((R==null?void 0:R.message)||"Erro ao carregar planos")}finally{n(!1)}}w.useEffect(()=>{we()},[]),w.useEffect(()=>{d||(m(null),oe({}),y(""),N(""),b(zr(9900)),z("1"),ne("5"),J("3"))},[d]),w.useEffect(()=>{f||y(R=>{const Z=Jl(j);return!R||R===Jl(R)?Z:R})},[j,f]);const Ie=w.useMemo(()=>{const R=u.trim().toLowerCase();return R?e.filter(Z=>[Z.name,Z.code,zr(Z.priceCents),String(Z.limits.clinics),String(Z.limits.users),String(Z.limits.doctors)].some(xe=>String(xe).toLowerCase().includes(R))):e},[e,u]);function D(R){const Z={active:"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300",inactive:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-300",blocked:"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-300"};return o.jsx("span",{className:`badge ${Z[R]}`,children:R==="active"?"Ativo":R==="inactive"?"Inativo":"Bloqueado"})}function Q(R){v(R),g(!0)}function ee(R){m(R),y(R.code),N(R.name),b(zr(R.priceCents)),z(String(R.limits.clinics)),ne(String(R.limits.users)),J(String(R.limits.doctors)),h(!0)}async function fe(R,Z){i(R.id),l(null);try{const{data:xe,error:lt}=await K.from("plans").update({status:Z}).eq("id",R.id).select("id,status").maybeSingle();if(lt)throw new Error(lt.message);if(!xe){await we(),l("No foi possvel atualizar o status do plano (nenhuma linha afetada). Verifique polticas RLS/permisses.");return}const Dt=xe.status??Z;t(Se=>Se.map(S=>S.id===R.id?{...S,status:Dt}:S))}catch(xe){l((xe==null?void 0:xe.message)||"Erro ao atualizar status do plano"),await we()}finally{i(null)}}function ue(R){const Z=R.status==="active"?"inactive":"active";fe(R,Z)}function Ae(R){const Z=R.status==="blocked"?"active":"blocked";fe(R,Z)}async function Ve(R){if(R.status==="active"){alert("Desative o plano antes de excluir.");return}if(confirm(`Excluir plano "${R.name}"?`)){i(R.id),l(null);try{const{error:Z}=await K.from("plans").delete().eq("id",R.id);if(Z)throw new Error(Z.message);t(xe=>xe.filter(lt=>lt.id!==R.id))}catch(Z){l((Z==null?void 0:Z.message)||"Erro ao excluir plano"),await we()}finally{i(null)}}}function Te(){const R={},Z=p.trim();Z?/^[a-z0-9][a-z0-9-_]{2,63}$/.test(Z)||(R.code="Use letras/nmeros/hfen/underline (mn. 3 caracteres, iniciar com letra/nmero)."):R.code="Informe o cdigo do plano",j.trim()||(R.name="Informe o nome do plano");const xe=Of(P);return(!Number.isFinite(xe)||xe<0)&&(R.price="Valor invlido"),/^\d+$/.test(I)||(R.clinics="Quantidade invlida"),/^\d+$/.test(L)||(R.users="Quantidade invlida"),/^\d+$/.test(O)||(R.doctors="Quantidade invlida"),oe(R),Object.keys(R).length===0}async function me(){if(!Te())return;const R={id:(f==null?void 0:f.id)||crypto.randomUUID(),code:p.trim(),name:j.trim(),priceCents:Of(P),currency:"BRL",limits:{clinics:parseInt(I,10),users:parseInt(L,10),doctors:parseInt(O,10)},status:(f==null?void 0:f.status)||"active",createdAt:(f==null?void 0:f.createdAt)||new Date().toISOString()};i("form"),l(null);try{if(f){const{error:Z,data:xe}=await K.from("plans").update(If(R)).eq("id",f.id).select("id, code, name, price_cents, currency, limits, status, created_at").maybeSingle();if(Z)throw new Error(Z.message);if(!xe)await we(),l("No foi possvel salvar (nenhuma linha afetada). Verifique RLS/permisses.");else{const lt=Ql(xe);t(Dt=>Dt.map(Se=>Se.id===f.id?lt:Se))}}else{const Z=If(R),{error:xe}=await K.from("plans").insert([{...Z,id:R.id}]);if(xe)throw new Error(xe.message);const{data:lt,error:Dt}=await K.from("plans").select("id, code, name, price_cents, currency, limits, status, created_at").eq("id",R.id).maybeSingle();if(Dt)throw new Error(Dt.message);if(!lt)await we();else{const Se=Ql(lt);t(S=>[Se,...S])}}h(!1)}catch(Z){const xe=(Z==null?void 0:Z.message)||(Z==null?void 0:Z.error_description)||(Z==null?void 0:Z.hint)||"Erro ao salvar plano";l(xe)}finally{i(null)}}return o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"flex flex-col gap-3 md:flex-row md:items-center md:justify-between",children:[o.jsx("h1",{children:"Planos"}),o.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 sm:items-center w-full md:w-auto",children:[o.jsxs("div",{className:"relative w-full sm:w-80",children:[o.jsx(yv,{className:"w-4 h-4 absolute left-3 top-1/2 -translate-y-1/2 opacity-60"}),o.jsx("input",{className:"input pl-9",placeholder:"Pesquisar por cdigo, nome, valor, limites...",value:u,onChange:R=>c(R.target.value)})]}),o.jsxs(yt,{variant:"primary",onClick:()=>h(!0),disabled:r,children:[o.jsx(Hs,{className:"w-4 h-4"}),"Adicionar novo plano"]})]})]}),a&&o.jsx("div",{className:"card p-3 text-sm text-red-600 border border-red-500/40 bg-red-500/5",children:a}),o.jsxs("div",{className:"grid gap-3 sm:hidden",children:[r&&o.jsx("div",{className:"card p-4 text-sm text-mutedForeground",children:"Carregando"}),!r&&Ie.map(R=>o.jsxs("div",{className:"card p-4",children:[o.jsxs("div",{className:"flex items-start justify-between gap-3",children:[o.jsxs("div",{children:[o.jsx("div",{className:"font-semibold text-base break-words",children:R.name}),o.jsx("div",{className:"text-mutedForeground text-xs break-all",children:R.code}),o.jsx("div",{className:"text-mutedForeground text-sm",children:zr(R.priceCents)}),o.jsxs("div",{className:"mt-2 text-sm space-y-0.5",children:[o.jsxs("div",{children:[o.jsx("span",{className:"text-mutedForeground",children:"Clnicas:"})," ",R.limits.clinics]}),o.jsxs("div",{children:[o.jsx("span",{className:"text-mutedForeground",children:"Usurios:"})," ",R.limits.users]}),o.jsxs("div",{children:[o.jsx("span",{className:"text-mutedForeground",children:"Mdicos:"})," ",R.limits.doctors]})]})]}),D(R.status)]}),o.jsxs("div",{className:"mt-3 flex flex-wrap gap-2",children:[o.jsxs(yt,{onClick:()=>Q(R),title:"Visualizar",disabled:s===R.id,children:[o.jsx(Ls,{className:"w-4 h-4"})," Ver"]}),o.jsxs(yt,{onClick:()=>ee(R),title:"Editar",disabled:s===R.id,children:[o.jsx(on,{className:"w-4 h-4"})," Editar"]}),o.jsxs(yt,{onClick:()=>ue(R),title:R.status==="active"?"Desativar":"Ativar",disabled:s===R.id,children:[o.jsx(ea,{className:"w-4 h-4"}),R.status==="active"?"Desativar":"Ativar"]}),o.jsxs(yt,{variant:"warn",onClick:()=>Ae(R),title:R.status==="blocked"?"Desbloquear":"Bloquear",disabled:s===R.id,children:[o.jsx(Mo,{className:"w-4 h-4"}),R.status==="blocked"?"Desbloquear":"Bloquear"]}),o.jsxs(yt,{variant:"danger",onClick:()=>Ve(R),title:"Excluir",disabled:s===R.id,children:[o.jsx(gr,{className:"w-4 h-4"})," Excluir"]})]})]},R.id)),!r&&Ie.length===0&&o.jsx("div",{className:"text-center text-mutedForeground py-6 card",children:"Nenhum plano encontrado."})]}),o.jsx("div",{className:"card overflow-hidden hidden sm:block",children:o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"min-w-full text-sm",children:[o.jsx("thead",{className:"bg-muted/70",children:o.jsxs("tr",{className:"[&>th]:text-left [&>th]:px-4 [&>th]:py-3",children:[o.jsx("th",{children:"Cdigo"}),o.jsx("th",{children:"Plano"}),o.jsx("th",{children:"Valor"}),o.jsx("th",{children:"Clnicas"}),o.jsx("th",{children:"Usurios"}),o.jsx("th",{children:"Mdicos"}),o.jsx("th",{children:"Status"}),o.jsx("th",{className:"text-right pr-4",children:"Aes"})]})}),o.jsxs("tbody",{children:[r&&o.jsx("tr",{children:o.jsx("td",{colSpan:8,className:"px-4 py-6 text-center text-mutedForeground",children:"Carregando"})}),!r&&Ie.map(R=>o.jsxs("tr",{className:"border-t border-border",children:[o.jsx("td",{className:"px-4 py-3 text-xs break-all",children:R.code}),o.jsx("td",{className:"px-4 py-3 font-medium",children:R.name}),o.jsx("td",{className:"px-4 py-3",children:zr(R.priceCents)}),o.jsx("td",{className:"px-4 py-3",children:R.limits.clinics}),o.jsx("td",{className:"px-4 py-3",children:R.limits.users}),o.jsx("td",{className:"px-4 py-3",children:R.limits.doctors}),o.jsx("td",{className:"px-4 py-3",children:D(R.status)}),o.jsx("td",{className:"px-4 py-3",children:o.jsxs("div",{className:"flex flex-wrap gap-2 justify-end",children:[o.jsxs(yt,{onClick:()=>Q(R),title:"Visualizar",disabled:s===R.id,children:[o.jsx(Ls,{className:"w-4 h-4"})," Ver"]}),o.jsxs(yt,{onClick:()=>ee(R),title:"Editar",disabled:s===R.id,children:[o.jsx(on,{className:"w-4 h-4"})," Editar"]}),o.jsxs(yt,{onClick:()=>ue(R),title:R.status==="active"?"Desativar":"Ativar",disabled:s===R.id,children:[o.jsx(ea,{className:"w-4 h-4"}),R.status==="active"?"Desativar":"Ativar"]}),o.jsxs(yt,{variant:"warn",onClick:()=>Ae(R),title:R.status==="blocked"?"Desbloquear":"Bloquear",disabled:s===R.id,children:[o.jsx(Mo,{className:"w-4 h-4"}),R.status==="blocked"?"Desbloquear":"Bloquear"]}),o.jsxs(yt,{variant:"danger",onClick:()=>Ve(R),title:"Excluir",disabled:s===R.id,children:[o.jsx(gr,{className:"w-4 h-4"})," Excluir"]})]})})]},R.id)),!r&&Ie.length===0&&o.jsx("tr",{children:o.jsx("td",{colSpan:8,className:"px-4 py-6 text-center text-mutedForeground",children:"Nenhum plano encontrado."})})]})]})})}),o.jsxs(Rf,{open:d,onClose:()=>h(!1),title:f?"Editar plano":"Novo plano",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"label",children:"Cdigo *"}),o.jsx("input",{className:"input",value:p,onChange:R=>y(Jl(R.target.value)),placeholder:"ex.: plano-basic"}),M.code&&o.jsx("small",{className:"text-red-600",children:M.code}),o.jsxs("small",{className:"text-mutedForeground block mt-1",children:["nico, sem espaos (ex.: ",o.jsx("b",{children:"basic"}),", ",o.jsx("b",{children:"pro"}),","," ",o.jsx("b",{children:"clinic-premium"}),")."]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"label",children:"Nome *"}),o.jsx("input",{className:"input",value:j,onChange:R=>N(R.target.value),placeholder:"Ex.: Plano Basic"}),M.name&&o.jsx("small",{className:"text-red-600",children:M.name})]}),o.jsxs("div",{children:[o.jsx("label",{className:"label",children:"Valor *"}),o.jsx("input",{className:"input",value:P,onChange:R=>b(lS(R.target.value)),placeholder:"R$ 0,00"}),M.price&&o.jsx("small",{className:"text-red-600",children:M.price})]}),o.jsxs("div",{children:[o.jsx("label",{className:"label",children:"Qtde de clnicas *"}),o.jsx("input",{className:"input",value:I,onChange:R=>/^\d*$/.test(R.target.value)&&z(R.target.value),placeholder:"1"}),M.clinics&&o.jsx("small",{className:"text-red-600",children:M.clinics})]}),o.jsxs("div",{children:[o.jsx("label",{className:"label",children:"Qtde de usurios *"}),o.jsx("input",{className:"input",value:L,onChange:R=>/^\d*$/.test(R.target.value)&&ne(R.target.value),placeholder:"5"}),M.users&&o.jsx("small",{className:"text-red-600",children:M.users})]}),o.jsxs("div",{children:[o.jsx("label",{className:"label",children:"Qtde de mdicos *"}),o.jsx("input",{className:"input",value:O,onChange:R=>/^\d*$/.test(R.target.value)&&J(R.target.value),placeholder:"3"}),M.doctors&&o.jsx("small",{className:"text-red-600",children:M.doctors})]})]}),o.jsxs("div",{className:"flex flex-col-reverse sm:flex-row sm:justify-end gap-2 mt-6",children:[o.jsx(yt,{variant:"muted",onClick:()=>h(!1),disabled:s==="form",children:"Cancelar"}),o.jsx(yt,{variant:"primary",onClick:me,disabled:s==="form",children:f?"Salvar alteraes":"Criar plano"})]})]}),o.jsx(Rf,{open:x,onClose:()=>g(!1),title:"Detalhes do plano",children:_?o.jsx("div",{className:"space-y-3 text-sm",children:o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[o.jsx(yn,{label:"Cdigo",value:_.code}),o.jsx(yn,{label:"Nome",value:_.name}),o.jsx(yn,{label:"Valor",value:zr(_.priceCents)}),o.jsx(yn,{label:"Clnicas",value:String(_.limits.clinics)}),o.jsx(yn,{label:"Usurios",value:String(_.limits.users)}),o.jsx(yn,{label:"Mdicos",value:String(_.limits.doctors)}),o.jsx(yn,{label:"Status",value:uS(_.status)})]})}):o.jsx("div",{className:"text-mutedForeground",children:"Carregando"})})]})}function wv(...e){return e.filter(Boolean).join(" ")}function jn({children:e,onClick:t,variant:r="base",disabled:n,title:s,type:i="button"}){const a={base:"border border-border bg-card hover:bg-muted",primary:"bg-accent text-accent-foreground border border-transparent hover:opacity-90",muted:"border border-border bg-muted/60 hover:bg-muted",danger:"border border-red-700 bg-red-600 text-white hover:opacity-90"};return o.jsx("button",{type:i,title:s,disabled:n,onClick:t,className:wv("inline-flex items-center gap-2 rounded-md px-3 py-2 text-sm transition disabled:opacity-50 disabled:cursor-not-allowed",a[r]),children:e})}function dS({active:e}){return o.jsx("span",{className:wv("px-2 py-0.5 rounded-full text-xs",e?"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300":"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-300"),children:e?"Ativa":"Inativa"})}function hS({open:e,onClose:t,title:r,children:n}){return e?o.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[o.jsx("div",{className:"absolute inset-0 bg-black/40",onClick:t}),o.jsxs("div",{className:"relative card w-full sm:max-w-2xl max-h-[90vh] overflow-hidden flex flex-col",children:[o.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b border-border sticky top-0 bg-background z-10",children:[o.jsx("h3",{className:"text-lg font-semibold",children:r}),o.jsxs(jn,{onClick:t,variant:"muted",title:"Fechar",children:[o.jsx(Lr,{className:"h-4 w-4"}),"Fechar"]})]}),o.jsx("div",{className:"p-4 overflow-y-auto",children:n})]})]}):null}function fS(){const{orgs:e,activeOrgId:t,setActiveOrgId:r,loading:n}=Ks(),[s,i]=w.useState([]),[a,l]=w.useState(!1),[u,c]=w.useState(null),[d,h]=w.useState(""),[f,m]=w.useState(!1),[x,g]=w.useState(null),[_,v]=w.useState(""),[p,y]=w.useState(!0);async function j(){if(!t){i([]);return}l(!0),c(null);try{const{data:O,error:J}=await K.from("clinics").select("id,name,is_active,created_at").eq("org_id",t).order("created_at",{ascending:!0});if(J)throw J;i(O||[])}catch(O){c((O==null?void 0:O.message)||"Erro ao carregar clnicas"),i([])}finally{l(!1)}}w.useEffect(()=>{j()},[t]);function N(){g(null),v(""),y(!0),m(!0)}function P(O){g(O),v(O.name),y(!!O.is_active),m(!0)}async function b(){if(!(!t||!_.trim()))try{const O={org_id:t,name:_.trim(),is_active:p};x!=null&&x.id&&(O.id=x.id);const{error:J}=await K.from("clinics").upsert(O,{onConflict:"id"});if(J)throw J;m(!1),await j()}catch(O){alert((O==null?void 0:O.message)||"Erro ao salvar clnica")}}async function I(O){if(t)try{const{error:J}=await K.from("clinics").update({is_active:!O.is_active}).eq("org_id",t).eq("id",O.id);if(J)throw J;i(M=>M.map(oe=>oe.id===O.id?{...oe,is_active:!oe.is_active}:oe))}catch(J){alert((J==null?void 0:J.message)||"Erro ao alterar status")}}async function z(O){if(t&&confirm("Excluir clnica? Esta ao no pode ser desfeita."))try{const{count:J,error:M}=await K.from("appointments").select("id",{count:"exact",head:!0}).eq("org_id",t).eq("clinic_id",O);if(M)throw M;if((J??0)>0){alert("Esta clnica possui agendamentos e no pode ser excluda.");return}const{error:oe}=await K.from("clinics").delete().eq("org_id",t).eq("id",O);if(oe)throw oe;await j()}catch(J){alert((J==null?void 0:J.message)||"Erro ao excluir clnica")}}const L=w.useMemo(()=>{const O=d.trim().toLowerCase();return O?s.filter(J=>[J.name,J.is_active?"ativa":"inativa"].some(M=>String(M).toLowerCase().includes(O))):s},[s,d]),ne=w.useMemo(()=>e.find(O=>O.id===t)||null,[e,t]);return o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"flex flex-col gap-3 md:flex-row md:items-center md:justify-between",children:[o.jsxs("h1",{className:"flex items-center gap-2",children:[o.jsx(lc,{className:"h-5 w-5"}),ne?`Minhas clnicas  ${ne.name}`:"Minhas clnicas"]}),o.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 sm:items-center w-full md:w-auto",children:[o.jsx("div",{className:"relative w-full sm:w-72",children:o.jsxs("div",{className:"input flex items-center justify-between",children:[o.jsx("select",{className:"bg-transparent w-full outline-none",value:t??"",onChange:O=>r(O.target.value||null),disabled:n||e.length===0,children:e.map(O=>o.jsx("option",{value:O.id,children:O.name},O.id))}),o.jsx(cc,{className:"w-4 h-4 opacity-60"})]})}),o.jsx("div",{className:"relative w-full sm:w-80",children:o.jsx("input",{className:"input w-full",placeholder:"Pesquisar por nome ou status",value:d,onChange:O=>h(O.target.value)})}),o.jsxs(jn,{onClick:N,variant:"primary",disabled:!t,children:[o.jsx(Hs,{className:"h-4 w-4"})," Nova clnica"]})]})]}),u&&o.jsx("div",{className:"card p-3 text-sm text-red-600 border border-red-500/40 bg-red-500/5",children:u}),o.jsx("div",{className:"card overflow-hidden",children:o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"min-w-full text-sm",children:[o.jsx("thead",{className:"bg-muted/70",children:o.jsxs("tr",{className:"[&>th]:text-left [&>th]:px-4 [&>th]:py-3",children:[o.jsx("th",{children:"Nome"}),o.jsx("th",{children:"Status"}),o.jsx("th",{children:"Criada em"}),o.jsx("th",{className:"text-right pr-4",children:"Aes"})]})}),o.jsxs("tbody",{children:[a&&o.jsx("tr",{children:o.jsx("td",{colSpan:4,className:"px-4 py-6 text-center text-mutedForeground",children:"Carregando"})}),!a&&L.map(O=>o.jsxs("tr",{className:"border-t border-border",children:[o.jsx("td",{className:"px-4 py-3 font-medium",children:O.name}),o.jsx("td",{className:"px-4 py-3",children:o.jsx(dS,{active:O.is_active})}),o.jsx("td",{className:"px-4 py-3",children:new Date(O.created_at).toLocaleDateString()}),o.jsx("td",{className:"px-4 py-3",children:o.jsxs("div",{className:"flex flex-wrap gap-2 justify-end",children:[o.jsxs(jn,{onClick:()=>P(O),title:"Editar",children:[o.jsx(on,{className:"h-4 w-4"}),"Editar"]}),o.jsxs(jn,{onClick:()=>I(O),title:O.is_active?"Desativar":"Ativar",children:[o.jsx(ea,{className:"h-4 w-4"}),O.is_active?"Desativar":"Ativar"]}),o.jsxs(jn,{variant:"danger",onClick:()=>z(O.id),title:"Excluir",children:[o.jsx(gr,{className:"h-4 w-4"}),"Excluir"]})]})})]},O.id)),!a&&L.length===0&&o.jsx("tr",{children:o.jsx("td",{colSpan:4,className:"px-4 py-6 text-center text-mutedForeground",children:t?"Sem clnicas nesta organizao.":"Vincule-se a uma organizao para comear."})})]})]})})}),o.jsx(hS,{open:f,onClose:()=>m(!1),title:x?"Editar clnica":"Nova clnica",children:t?o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"label",children:"Nome *"}),o.jsx("input",{className:"input w-full",value:_,onChange:O=>v(O.target.value),placeholder:"Ex.: Clnica Centro"})]}),o.jsxs("label",{className:"inline-flex items-center gap-2 cursor-pointer",children:[o.jsx("input",{type:"checkbox",checked:p,onChange:O=>y(O.target.checked)}),o.jsx("span",{children:"Ativa"})]}),o.jsxs("div",{className:"flex flex-col-reverse sm:flex-row sm:justify-end gap-2",children:[o.jsx(jn,{onClick:()=>m(!1),variant:"muted",children:"Cancelar"}),o.jsx(jn,{onClick:b,variant:"primary",children:x?"Salvar alteraes":"Criar clnica"})]})]}):o.jsx("div",{className:"text-sm text-mutedForeground",children:"Selecione/associe uma organizao antes de criar clnicas."})})]})}function Af({open:e,onClose:t,title:r,children:n}){return e?o.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[o.jsx("div",{className:"absolute inset-0 bg-black/40",onClick:t}),o.jsxs("div",{className:"relative card w-full sm:max-w-lg max-h-[90vh] overflow-hidden flex flex-col",children:[o.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b",children:[o.jsx("h3",{className:"text-lg font-semibold",children:r}),o.jsx("button",{onClick:t,className:"rounded-md border px-3 py-1 text-sm",children:o.jsx(Lr,{className:"h-4 w-4"})})]}),o.jsx("div",{className:"p-4 overflow-y-auto",children:n})]})]}):null}function pS(){const{activeOrgId:e}=Ks(),[t,r]=w.useState([]),[n,s]=w.useState(!1),[i,a]=w.useState(null),[l,u]=w.useState(null),[c,d]=w.useState(""),[h,f]=w.useState(""),[m,x]=w.useState("#0ea5e9");async function g(){if(!e)return;const{data:j,error:N}=await K.rpc("app_doctors_list",{p_org_id:e});N||r(j||[])}w.useEffect(()=>{g()},[e]);function _(){u(null),d(""),f(""),x("#0ea5e9"),s(!0)}function v(j){u(j),d(j.name),f(j.specialty||""),x(j.color||"#0ea5e9"),s(!0)}async function p(){if(!e||!c.trim())return;const{error:j}=await K.rpc("app_doctor_upsert",{p_org_id:e,p_id:(l==null?void 0:l.id)||null,p_name:c.trim(),p_specialty:h||null,p_color:m||"#0ea5e9",p_is_active:!0});if(j){alert(j.message);return}s(!1),g()}async function y(j){if(!e||!confirm("Excluir mdico?"))return;const{error:N}=await K.rpc("app_doctor_delete",{p_org_id:e,p_id:j});if(N){alert(N.message);return}g()}return o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("h1",{children:"Mdicos"}),o.jsxs("button",{onClick:_,className:"rounded-md border px-3 py-2 text-sm inline-flex items-center gap-2",children:[o.jsx(Hs,{className:"h-4 w-4"})," Novo"]})]}),o.jsx("div",{className:"grid gap-3 sm:grid-cols-2 lg:grid-cols-3",children:t.map(j=>o.jsxs("div",{className:"card p-4 flex flex-col gap-2",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"inline-block w-3 h-3 rounded",style:{background:j.color||"#0ea5e9"}}),o.jsx("div",{className:"font-medium",children:j.name})]}),o.jsx("div",{className:"text-sm text-mutedForeground",children:j.specialty||""}),o.jsxs("div",{className:"mt-2 flex gap-2 justify-end",children:[o.jsxs("button",{onClick:()=>a(j),className:"rounded-md border px-3 py-1 text-sm inline-flex items-center gap-2",children:[o.jsx(Ls,{className:"h-4 w-4"})," Ver"]}),o.jsxs("button",{onClick:()=>v(j),className:"rounded-md border px-3 py-1 text-sm inline-flex items-center gap-2",children:[o.jsx(on,{className:"h-4 w-4"})," Editar"]}),o.jsxs("button",{onClick:()=>y(j.id),className:"rounded-md border px-3 py-1 text-sm inline-flex items-center gap-2",children:[o.jsx(gr,{className:"h-4 w-4"})," Excluir"]})]})]},j.id))}),o.jsxs(Af,{open:n,onClose:()=>s(!1),title:l?"Editar mdico":"Novo mdico",children:[o.jsx("label",{className:"label",children:"Nome *"}),o.jsx("input",{className:"input w-full",value:c,onChange:j=>d(j.target.value)}),o.jsx("label",{className:"label mt-3",children:"Especialidade"}),o.jsx("input",{className:"input w-full",value:h,onChange:j=>f(j.target.value)}),o.jsx("label",{className:"label mt-3",children:"Cor"}),o.jsx("input",{type:"color",className:"input w-28 p-1",value:m,onChange:j=>x(j.target.value)}),o.jsxs("div",{className:"mt-4 flex justify-end gap-2",children:[o.jsx("button",{onClick:()=>s(!1),className:"rounded-md border px-3 py-2 text-sm",children:"Cancelar"}),o.jsx("button",{onClick:p,className:"rounded-md border px-3 py-2 text-sm",children:"Salvar"})]})]}),o.jsx(Af,{open:!!i,onClose:()=>a(null),title:"Detalhes do mdico",children:i&&o.jsxs("div",{className:"space-y-2 text-sm",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"inline-block w-3 h-3 rounded",style:{background:i.color||"#0ea5e9"}}),o.jsx("b",{children:i.name})]}),o.jsxs("div",{children:["Especialidade: ",i.specialty||""]})]})})]})}function mS({open:e,onClose:t,title:r,children:n}){return e?o.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[o.jsx("div",{className:"absolute inset-0 bg-black/40",onClick:t}),o.jsxs("div",{className:"relative card w-full sm:max-w-lg max-h-[90vh] overflow-hidden flex flex-col",children:[o.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b",children:[o.jsx("h3",{className:"text-lg font-semibold",children:r}),o.jsx("button",{onClick:t,className:"rounded-md border px-3 py-1 text-sm",children:o.jsx(Lr,{className:"h-4 w-4"})})]}),o.jsx("div",{className:"p-4 overflow-y-auto",children:n})]})]}):null}function gS(){const{activeOrgId:e}=Ks(),[t,r]=w.useState([]),[n,s]=w.useState(!1),[i,a]=w.useState(null),[l,u]=w.useState(""),[c,d]=w.useState("0"),[h,f]=w.useState("0"),[m,x]=w.useState(!1),[g,_]=w.useState(!0);async function v(){e&&await K.rpc("app_insurance_ensure_default",{p_org_id:e})}async function p(){if(!e)return;await v();const{data:P,error:b}=await K.rpc("app_insurances_list",{p_org_id:e});b||r(P||[])}w.useEffect(()=>{p()},[e]);function y(){a(null),u(""),d("0"),f("0"),x(!1),_(!0),s(!0)}function j(P){a(P),u(P.name),d(String(P.min_days_between)),f(String(P.max_days_between)),x(P.is_default),_(P.is_active),s(!0)}async function N(){if(!e||!l.trim())return;const{error:P}=await K.rpc("app_insurance_upsert",{p_org_id:e,p_id:(i==null?void 0:i.id)||null,p_name:l.trim(),p_min_days:parseInt(c||"0",10),p_max_days:parseInt(h||"0",10),p_is_default:m,p_is_active:g});if(P){alert(P.message);return}s(!1),p()}return o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("h1",{children:"Convnios"}),o.jsxs("button",{onClick:y,className:"rounded-md border px-3 py-2 text-sm inline-flex items-center gap-2",children:[o.jsx(Hs,{className:"h-4 w-4"})," Novo"]})]}),o.jsx("div",{className:"grid gap-3 sm:grid-cols-2 lg:grid-cols-3",children:t.map(P=>o.jsxs("div",{className:"card p-4 flex flex-col gap-2",children:[o.jsxs("div",{className:"font-medium",children:[P.name," ",P.is_default&&o.jsx("span",{className:"badge bg-muted",children:"Padro"})]}),o.jsxs("div",{className:"text-xs text-mutedForeground",children:["Mn: ",P.min_days_between,"d  Mx: ",P.max_days_between,"d"]}),o.jsxs("div",{className:"mt-2 flex gap-2 justify-end",children:[o.jsxs("button",{onClick:()=>j(P),className:"rounded-md border px-3 py-1 text-sm inline-flex items-center gap-2",children:[o.jsx(on,{className:"h-4 w-4"})," Editar"]}),!P.is_default&&o.jsxs("button",{onClick:()=>alert("Use 'Editar' para desativar/remover. (Remoo direta opcional)"),className:"rounded-md border px-3 py-1 text-sm inline-flex items-center gap-2",children:[o.jsx(gr,{className:"h-4 w-4"})," Excluir"]})]})]},P.id))}),o.jsxs(mS,{open:n,onClose:()=>s(!1),title:i?"Editar convnio":"Novo convnio",children:[o.jsx("label",{className:"label",children:"Nome *"}),o.jsx("input",{className:"input w-full",value:l,onChange:P=>u(P.target.value)}),o.jsxs("div",{className:"grid grid-cols-2 gap-3 mt-3",children:[o.jsxs("div",{children:[o.jsx("label",{className:"label",children:"Mn. dias"}),o.jsx("input",{className:"input w-full",value:c,onChange:P=>/^\d*$/.test(P.target.value)&&d(P.target.value)})]}),o.jsxs("div",{children:[o.jsx("label",{className:"label",children:"Mx. dias"}),o.jsx("input",{className:"input w-full",value:h,onChange:P=>/^\d*$/.test(P.target.value)&&f(P.target.value)})]})]}),o.jsxs("div",{className:"mt-3 flex items-center gap-3",children:[o.jsxs("label",{className:"inline-flex items-center gap-2",children:[o.jsx("input",{type:"checkbox",checked:m,onChange:P=>x(P.target.checked)}),o.jsx("span",{children:"Definir como padro (Particular)"})]}),o.jsxs("label",{className:"inline-flex items-center gap-2",children:[o.jsx("input",{type:"checkbox",checked:g,onChange:P=>_(P.target.checked)}),o.jsx("span",{children:"Ativo"})]})]}),o.jsxs("div",{className:"mt-4 flex justify-end gap-2",children:[o.jsx("button",{onClick:()=>s(!1),className:"rounded-md border px-3 py-2 text-sm",children:"Cancelar"}),o.jsx("button",{onClick:N,className:"rounded-md border px-3 py-2 text-sm",children:"Salvar"})]})]})]})}function Lf(e){return new Date(e.getFullYear(),e.getMonth(),1)}function Df(e){return new Date(e.getFullYear(),e.getMonth()+1,0)}function wn(e){return e.toISOString().slice(0,10)}function vS(e){return e.toLocaleDateString("pt-BR",{weekday:"short"})}function $f(e){const t=new Date(e),r=t.getTimezoneOffset();return new Date(t.getTime()-r*6e4).toISOString().slice(0,16)}function yS(e){return new Date(e).toISOString()}function Yl({open:e,onClose:t,title:r,children:n}){return e?o.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[o.jsx("div",{className:"absolute inset-0 bg-black/40",onClick:t}),o.jsxs("div",{className:"relative card w-full sm:max-w-2xl max-h-[90vh] overflow-hidden flex flex-col",children:[o.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b",children:[o.jsx("h3",{className:"text-lg font-semibold",children:r}),o.jsx("button",{onClick:t,className:"rounded-md border px-3 py-1 text-sm",children:o.jsx(Lr,{className:"h-4 w-4"})})]}),o.jsx("div",{className:"p-4 overflow-y-auto",children:n})]})]}):null}function wS(){var ma,Ys;const{activeOrgId:e}=Ks(),[t,r]=w.useState(!1),[n,s]=w.useState(new Date),[i,a]=w.useState([]),[l,u]=w.useState([]),[c,d]=w.useState([]),[h,f]=w.useState([]),[m,x]=w.useState([]),[g,_]=w.useState([]),[v,p]=w.useState("view"),[y,j]=w.useState(!1),[N,P]=w.useState(null),[b,I]=w.useState(""),[z,L]=w.useState(""),[ne,O]=w.useState(""),[J,M]=w.useState(""),[oe,we]=w.useState(""),[Ie,D]=w.useState(!1),[Q,ee]=w.useState(""),[fe,ue]=w.useState(!1),[Ae,Ve]=w.useState(null),[Te,me]=w.useState(!1),[R,Z]=w.useState([]),[xe,lt]=w.useState(!1),[Dt,Se]=w.useState(!1),[S,U]=w.useState(""),[W,ae]=w.useState(""),je=Lf(n),He=Df(n);w.useEffect(()=>{(async()=>{var C;try{if(!e)return r(!1);const{data:re}=await K.auth.getUser(),ce=(C=re.user)==null?void 0:C.id;if(!ce)return r(!1);const{data:Ue,error:Gt}=await K.from("org_members").select("role").eq("org_id",e).eq("user_id",ce).maybeSingle();if(Gt)throw Gt;r((Ue==null?void 0:Ue.role)==="owner"||(Ue==null?void 0:Ue.role)==="admin")}catch{r(!1)}})()},[e]);async function tt(){if(!e)return;const[C,re,ce,Ue]=await Promise.all([K.from("clinics").select("id,name").eq("org_id",e).order("name"),K.from("doctors").select("id,name,color").eq("org_id",e).order("name"),K.from("insurances").select("id,name").eq("org_id",e).order("name"),K.from("patients").select("id,name").eq("org_id",e).order("name")]);C.error||u(C.data||[]),re.error||d(re.data||[]),ce.error||f(ce.data||[]),Ue.error||x(Ue.data||[])}async function $t(){if(!e)return;const{data:C,error:re}=await K.from("holidays").select("id,date,name").eq("org_id",e).gte("date",wn(je)).lte("date",wn(He)).order("date");re||_(C||[])}async function ll(){if(!e||!S||!W.trim())return;const{error:C}=await K.from("holidays").insert({org_id:e,date:S,name:W.trim()});if(C){alert(C.message);return}U(""),ae(""),await $t()}async function ul(C){if(!e||!confirm(`Remover feriado "${C.name}" de ${C.date}?`))return;const{error:ce}=await K.from("holidays").delete().eq("org_id",e).eq("id",C.id);if(ce){alert(ce.message);return}await $t()}async function qn(){if(!e)return;const{data:C,error:re}=await K.from("appointments").select("id, clinic_id, doctor_id, insurance_id, patient_name, when_at, attended, status").eq("org_id",e).gte("when_at",wn(je)).lt("when_at",wn(new Date(He.getTime()+864e5))).order("when_at",{ascending:!0});re||a(C||[])}w.useEffect(()=>{tt()},[e]),w.useEffect(()=>{qn(),$t()},[e,n]);const qt=w.useMemo(()=>{const C={};return l.forEach(re=>C[re.id]=re.name),C},[l]),or=w.useMemo(()=>{const C={};return c.forEach(re=>C[re.id]=re),C},[c]),fn=w.useMemo(()=>{const C=new Set;return g.forEach(re=>C.add(re.date)),C},[g]),Dr=w.useMemo(()=>{const C={};return g.forEach(re=>C[re.date]=re.name),C},[g]),Mt=w.useMemo(()=>{const C={};for(const re of i){const ce=re.when_at.slice(0,10);(C[ce]||(C[ce]=[])).push(re)}return C},[i]);function Ht(){const C=new Date(n);C.setMonth(C.getMonth()-1),s(C)}function ca(){const C=new Date(n);C.setMonth(C.getMonth()+1),s(C)}function pn(C){var re,ce,Ue,Gt;if(C&&fn.has(C)){alert(`${Dr[C]||"Feriado"}  agendamentos bloqueados para este dia.`);return}p("create"),P(null),I(""),L(((re=l[0])==null?void 0:re.id)||""),O(((ce=c[0])==null?void 0:ce.id)||""),M(((Ue=h.find(Xs=>Xs.name==="Particular"))==null?void 0:Ue.id)||((Gt=h[0])==null?void 0:Gt.id)||""),we(C?`${C}T09:00`:$f(new Date().toISOString())),D(!1),ee(""),me(!1),j(!0)}function da(C){p("view"),P(C),me(!1),j(!0)}function Kt(C){p("edit"),P(C),I(C.patient_name),L(C.clinic_id),O(C.doctor_id),M(C.insurance_id),we($f(C.when_at)),D(!1),ee(""),me(!1),j(!0)}async function Gs(C){if(!e||!C)return Z([]);try{lt(!0);const{data:re,error:ce}=await K.from("appointments").select("id, clinic_id, doctor_id, insurance_id, patient_name, when_at, attended, status").eq("org_id",e).eq("patient_name",C).order("when_at",{ascending:!1}).limit(50);if(ce)throw ce;Z(re||[])}finally{lt(!1)}}async function ha(){if(v==="view"||!e||!b.trim()||!z||!ne||!J||!oe)return;const C=yS(oe),re=C.slice(0,10);if(fn.has(re)&&!Ie){alert(`${Dr[re]||"Feriado"}  agendamentos bloqueados. Se necessrio, marque a opo de override (admin) e informe o motivo.`);return}const ce={org_id:e,clinic_id:z,doctor_id:ne,insurance_id:J,patient_name:b.trim(),when_at:C,status:(N==null?void 0:N.status)||"scheduled",attended:(N==null?void 0:N.attended)??null};N!=null&&N.id&&(ce.id=N.id),Ie&&t&&(ce.override_reason=Q||"override admin");const{error:Ue}=await K.from("appointments").upsert(ce,{onConflict:"id"});if(Ue){alert(Ue.message);return}j(!1),qn()}async function Js(C,re){if(!e)return;const{error:ce}=await K.from("appointments").update({attended:re}).eq("org_id",e).eq("id",C.id);ce||qn()}async function fa(C){if(!e||!confirm(`Excluir agendamento de "${C.patient_name}" em ${new Date(C.when_at).toLocaleString("pt-BR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"})}?`))return;const{error:ce}=await K.from("appointments").delete().eq("org_id",e).eq("id",C.id);if(ce){alert(ce.message);return}j(!1),ue(!1),await qn()}const lr=[],wr=Lf(n),pa=Df(n),Hn=(wr.getDay()+6)%7;for(let C=0;C<Hn;C++)lr.push(new Date(wr.getTime()-(Hn-C)*864e5));for(let C=1;C<=pa.getDate();C++)lr.push(new Date(wr.getFullYear(),wr.getMonth(),C));for(;lr.length%7!==0;)lr.push(new Date(lr[lr.length-1].getTime()+864e5));function Qs(C){Ve(C),ue(!0)}return o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between",children:[o.jsx("div",{className:"inline-flex items-center gap-2",children:o.jsx("button",{className:"rounded-md border p-2",onClick:Ht,children:o.jsx(vj,{className:"h-4 w-4"})})}),o.jsx("div",{className:"font-semibold text-center",children:n.toLocaleString("pt-BR",{month:"long",year:"numeric"})}),o.jsxs("div",{className:"inline-flex items-center gap-2 justify-end",children:[o.jsxs("button",{onClick:()=>Se(!0),className:"rounded-md border px-3 py-2 text-sm inline-flex items-center gap-2",title:"Gerenciar feriados",children:[o.jsx(uc,{className:"h-4 w-4"})," Feriados"]}),o.jsx("button",{className:"rounded-md border p-2",onClick:ca,children:o.jsx(wj,{className:"h-4 w-4"})}),o.jsx("button",{onClick:()=>pn(),className:"rounded-md border px-3 py-2 text-sm",children:"Novo agendamento"})]})]}),o.jsx("div",{className:"hidden md:grid md:grid-cols-7 md:gap-2",children:["Seg","Ter","Qua","Qui","Sex","Sb","Dom"].map(C=>o.jsx("div",{className:"text-xs text-mutedForeground",children:C},C))}),o.jsx("div",{className:"grid grid-cols-2 md:grid-cols-7 gap-2",children:lr.map((C,re)=>{const ce=wn(C),Ue=Mt[ce]||[],Gt=C.getMonth()===n.getMonth(),Xs=`${C.getDate()}  ${vS(C)}`,k=fn.has(ce),E=k?Dr[ce]||"Feriado":"";return o.jsxs("div",{className:`card p-2 min-h-[120px] ${Gt?"":"opacity-50"} ${k?"ring-1 ring-red-400/70":""}`,onClick:()=>Gt&&Qs(ce),role:"button",title:k?E:void 0,children:[o.jsxs("div",{className:"flex items-center justify-between text-xs mb-1",children:[o.jsxs("span",{className:"font-medium md:font-semibold",children:[o.jsx("span",{className:"md:hidden",children:Xs}),o.jsx("span",{className:"hidden md:inline",children:C.getDate()}),k&&o.jsx("span",{className:"ml-2 rounded px-1 py-[1px] text-[10px] border border-red-300",children:E})]}),Gt&&o.jsxs("button",{onClick:T=>{if(T.stopPropagation(),k){alert(`${E}  agendamentos bloqueados para este dia.`);return}pn(ce)},className:`rounded-md border px-2 py-[2px] text-[11px] inline-flex items-center gap-1 ${k?"opacity-50 cursor-not-allowed":""}`,title:k?"Bloqueado por feriado":"Novo agendamento",children:[o.jsx(Hs,{className:"h-3 w-3"})," agendar"]})]}),o.jsx("div",{className:"space-y-1",children:Ue.map(T=>{const A=or[T.doctor_id],F=(A==null?void 0:A.color)||"#0ea5e9";return o.jsxs("button",{onClick:X=>{X.stopPropagation(),da(T)},className:"w-full text-left rounded-md px-2 py-1 border",style:{borderColor:F},title:`${T.patient_name}  ${(A==null?void 0:A.name)||"Mdico"}`,children:[o.jsx("div",{className:"text-xs font-medium",children:T.patient_name}),o.jsxs("div",{className:"text-[11px] text-mutedForeground",children:[new Date(T.when_at).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),"  ",(A==null?void 0:A.name)||"Mdico"]})]},T.id)})})]},re)})}),o.jsx(Yl,{open:fe,onClose:()=>ue(!1),title:Ae?`Agendamentos de ${new Date(Ae).toLocaleDateString("pt-BR")}`:"Agendamentos do dia",children:Ae&&o.jsxs("div",{className:"space-y-2",children:[(Mt[Ae]||[]).slice().sort((C,re)=>new Date(C.when_at).getTime()-new Date(re.when_at).getTime()).map(C=>{const re=or[C.doctor_id];return o.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2 border rounded-md px-3 py-2",children:[o.jsxs("div",{className:"text-sm",children:[o.jsx("div",{className:"font-medium",children:C.patient_name}),o.jsxs("div",{className:"text-xs text-mutedForeground",children:[new Date(C.when_at).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),"  ",(re==null?void 0:re.name)||"Mdico","  ",qt[C.clinic_id]||"Clnica"]})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{className:"rounded-md border px-3 py-1 text-sm",onClick:()=>{ue(!1),da(C)},children:"Abrir"}),o.jsx("button",{className:"rounded-md border px-3 py-1 text-sm",onClick:()=>{ue(!1),Kt(C)},children:"Editar"}),o.jsxs("button",{className:"rounded-md border px-3 py-1 text-sm",onClick:()=>fa(C),title:"Excluir agendamento",children:[o.jsx(gr,{className:"inline h-4 w-4 mr-1"}),"Excluir"]})]})]},C.id)}),(Mt[Ae]||[]).length===0&&o.jsx("div",{className:"text-sm text-mutedForeground",children:"Sem agendamentos neste dia."})]})}),o.jsxs(Yl,{open:y,onClose:()=>j(!1),title:v==="view"?"Ver agendamento":v==="edit"?"Editar agendamento":"Novo agendamento",children:[v==="view"&&N&&o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 text-sm",children:[o.jsxs("div",{children:[o.jsx("div",{className:"label",children:"Paciente"}),o.jsx("div",{className:"font-medium",children:N.patient_name})]}),o.jsxs("div",{children:[o.jsx("div",{className:"label",children:"Data/Hora"}),o.jsx("div",{className:"font-medium",children:new Date(N.when_at).toLocaleString("pt-BR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"})})]}),o.jsxs("div",{children:[o.jsx("div",{className:"label",children:"Clnica"}),o.jsx("div",{className:"font-medium",children:qt[N.clinic_id]||""})]}),o.jsxs("div",{children:[o.jsx("div",{className:"label",children:"Mdico"}),o.jsx("div",{className:"font-medium",children:((ma=or[N.doctor_id])==null?void 0:ma.name)||""})]}),o.jsxs("div",{className:"sm:col-span-2",children:[o.jsx("div",{className:"label",children:"Convnio"}),o.jsx("div",{className:"font-medium",children:((Ys=h.find(C=>C.id===N.insurance_id))==null?void 0:Ys.name)||""})]})]}),o.jsxs("div",{className:"flex flex-wrap items-center gap-2 pt-2",children:[o.jsxs("button",{onClick:()=>Js(N,!0),className:"rounded-md border px-3 py-2 text-sm inline-flex items-center gap-2",children:[o.jsx(bj,{className:"h-4 w-4"})," Compareceu"]}),o.jsxs("button",{onClick:()=>Js(N,!1),className:"rounded-md border px-3 py-2 text-sm inline-flex items-center gap-2",children:[o.jsx(Sj,{className:"h-4 w-4"})," No compareceu"]}),o.jsxs("div",{className:"ml-auto flex gap-2",children:[o.jsx("button",{onClick:()=>N&&Kt(N),className:"rounded-md border px-3 py-2 text-sm",children:"Editar"}),o.jsx("button",{onClick:async()=>{me(C=>!C),Te||await Gs(N.patient_name)},className:"rounded-md border px-3 py-2 text-sm",children:Te?"Ocultar histrico":"Ver histrico"}),o.jsxs("button",{onClick:()=>fa(N),className:"rounded-md border px-3 py-2 text-sm",title:"Excluir agendamento",children:[o.jsx(gr,{className:"inline h-4 w-4 mr-1"}),"Excluir"]})]})]}),Te&&o.jsxs("div",{className:"mt-3",children:[xe&&o.jsx("div",{className:"text-sm text-mutedForeground",children:"Carregando"}),!xe&&R.length===0&&o.jsx("div",{className:"text-sm text-mutedForeground",children:"Nenhum histrico encontrado."}),!xe&&R.length>0&&o.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto pr-1",children:R.map(C=>{const re=or[C.doctor_id],ce=qt[C.clinic_id]||"Clnica";return o.jsxs("div",{className:"border rounded-md px-3 py-2 text-sm",children:[o.jsx("div",{className:"font-medium",children:new Date(C.when_at).toLocaleString("pt-BR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"})}),o.jsxs("div",{className:"text-xs text-mutedForeground",children:[(re==null?void 0:re.name)||"Mdico","  ",ce]}),o.jsxs("div",{className:"text-xs mt-1",children:[C.attended===!0&&o.jsx("span",{className:"text-green-600",children:"compareceu"}),C.attended===!1&&o.jsx("span",{className:"text-red-600",children:"no compareceu"}),C.attended===null&&o.jsx("span",{className:"text-mutedForeground",children:""})]})]},C.id)})})]})]}),(v==="edit"||v==="create")&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[o.jsxs("div",{children:[o.jsx("label",{className:"label",children:"Paciente *"}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("input",{className:"input w-full",list:"patientsList",value:b,onChange:C=>I(C.target.value),placeholder:"Digite ou selecione"}),o.jsx("button",{type:"button",className:"rounded-md border px-3 py-2 text-sm",onClick:()=>b&&Gs(b),title:"Ver histrico desse paciente",children:"Histrico"})]}),o.jsx("datalist",{id:"patientsList",children:m.map(C=>o.jsx("option",{value:C.name},C.id))})]}),o.jsxs("div",{children:[o.jsx("label",{className:"label",children:"Data/Hora *"}),o.jsx("input",{type:"datetime-local",className:"input w-full",value:oe,onChange:C=>we(C.target.value)}),oe&&fn.has(oe.slice(0,10))&&o.jsxs("div",{className:"mt-1 text-xs text-red-600",children:[Dr[oe.slice(0,10)]||"Feriado","  agendamentos bloqueados. (Use override admin se necessrio.)"]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"label",children:"Clnica *"}),o.jsx("select",{className:"input w-full",value:z,onChange:C=>L(C.target.value),children:l.map(C=>o.jsx("option",{value:C.id,children:C.name},C.id))})]}),o.jsxs("div",{children:[o.jsx("label",{className:"label",children:"Mdico *"}),o.jsx("select",{className:"input w-full",value:ne,onChange:C=>O(C.target.value),children:c.map(C=>o.jsx("option",{value:C.id,children:C.name},C.id))})]}),o.jsxs("div",{className:"sm:col-span-2",children:[o.jsx("label",{className:"label",children:"Convnio *"}),o.jsx("select",{className:"input w-full",value:J,onChange:C=>M(C.target.value),children:h.map(C=>o.jsxs("option",{value:C.id,children:[C.name,C.name==="Particular"?" (padro)":""]},C.id))})]}),t&&o.jsxs("div",{className:"sm:col-span-2",children:[o.jsxs("label",{className:"inline-flex items-center gap-2",children:[o.jsx("input",{type:"checkbox",checked:Ie,onChange:C=>D(C.target.checked)}),o.jsx("span",{children:"Override (admin): permitir fora de regras/feriado"})]}),Ie&&o.jsx("input",{className:"input w-full mt-2",placeholder:"Motivo do override",value:Q,onChange:C=>ee(C.target.value)})]})]}),o.jsxs("div",{className:"mt-4 flex justify-end gap-2",children:[o.jsx("button",{onClick:()=>j(!1),className:"rounded-md border px-3 py-2 text-sm",children:"Cancelar"}),o.jsx("button",{onClick:ha,className:"rounded-md border px-3 py-2 text-sm",children:"Salvar"})]})]})]}),o.jsx(Yl,{open:Dt,onClose:()=>Se(!1),title:"Feriados do ms",children:o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"text-sm text-mutedForeground",children:["Gerencie os feriados deste ms (",n.toLocaleString("pt-BR",{month:"long",year:"numeric"}),"). Dias marcados aqui ficam bloqueados para novos agendamentos."]}),t?o.jsxs("form",{className:"grid grid-cols-1 sm:grid-cols-3 gap-2 items-end",onSubmit:C=>{C.preventDefault(),ll()},children:[o.jsxs("div",{children:[o.jsx("label",{className:"label",children:"Data *"}),o.jsx("input",{type:"date",className:"input w-full",value:S,min:wn(je),max:wn(He),onChange:C=>U(C.target.value)})]}),o.jsxs("div",{className:"sm:col-span-2",children:[o.jsx("label",{className:"label",children:"Nome *"}),o.jsx("input",{className:"input w-full",value:W,onChange:C=>ae(C.target.value),placeholder:"Ex.: Proclamao da Repblica"})]}),o.jsx("div",{className:"sm:col-span-3 flex justify-end",children:o.jsx("button",{className:"rounded-md border px-3 py-2 text-sm",children:"Adicionar"})})]}):o.jsx("div",{className:"text-sm text-mutedForeground",children:"Somente administradores podem editar."}),o.jsxs("div",{className:"space-y-2",children:[g.length===0&&o.jsx("div",{className:"text-sm text-mutedForeground",children:"Nenhum feriado neste ms."}),g.map(C=>o.jsxs("div",{className:"border rounded-md px-3 py-2 text-sm flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("div",{className:"font-medium",children:new Date(C.date+"T00:00:00").toLocaleDateString("pt-BR")}),o.jsx("div",{className:"text-xs text-mutedForeground",children:C.name})]}),t&&o.jsx("button",{onClick:()=>ul(C),className:"rounded-md border px-3 py-1 text-sm",title:"Remover feriado",children:"Remover"})]},C.id))]})]})})]})}function xS({open:e,onClose:t,title:r,children:n}){return e?o.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[o.jsx("div",{className:"absolute inset-0 bg-black/40",onClick:t}),o.jsxs("div",{className:"relative card w-full sm:max-w-lg max-h-[90vh] overflow-hidden flex flex-col",children:[o.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b",children:[o.jsx("h3",{className:"text-lg font-semibold",children:r}),o.jsx("button",{onClick:t,className:"rounded-md border px-3 py-1 text-sm",children:o.jsx(Lr,{className:"h-4 w-4"})})]}),o.jsx("div",{className:"p-4 overflow-y-auto",children:n})]})]}):null}function _S(){const{activeOrgId:e}=Ks(),[t,r]=w.useState([]),[n,s]=w.useState(""),[i,a]=w.useState(""),[l,u]=w.useState(""),[c,d]=w.useState(!1),[h,f]=w.useState(!1),[m,x]=w.useState("view"),[g,_]=w.useState(null),[v,p]=w.useState(""),[y,j]=w.useState(""),[N,P]=w.useState(""),b=w.useMemo(()=>t.length,[t]);async function I(){if(!e)return;const{data:M,error:oe}=await K.from("patients").select("id,name,cpf,phone").eq("org_id",e).order("name",{ascending:!0});oe||r(M||[])}async function z(M){if(M.preventDefault(),!e)return;const oe=n.trim();if(oe){d(!0);try{const we={org_id:e,name:oe,cpf:i.trim()||null,phone:l.trim()||null},{error:Ie}=await K.from("patients").insert(we);if(Ie)throw Ie;s(""),a(""),u(""),await I()}catch(we){alert((we==null?void 0:we.message)||"Erro ao salvar paciente")}finally{d(!1)}}}function L(M){_(M),x("view"),f(!0)}function ne(M){_(M),p(M.name),j(M.cpf||""),P(M.phone||""),x("edit"),f(!0)}async function O(){if(!e||!g)return;const M=v.trim();if(!M)return;const{error:oe}=await K.from("patients").update({name:M,cpf:y.trim()||null,phone:N.trim()||null}).eq("org_id",e).eq("id",g.id);if(oe){alert(oe.message);return}f(!1),await I()}async function J(M){if(!e||!confirm(`Excluir paciente "${M.name}"?`))return;const{error:we}=await K.from("patients").delete().eq("org_id",e).eq("id",M.id);if(we){alert(we.message);return}await I()}return w.useEffect(()=>{I()},[e]),o.jsxs("div",{className:"space-y-6",children:[o.jsx("h1",{children:"Pacientes"}),o.jsxs("form",{onSubmit:z,className:"card p-4 grid gap-3 md:grid-cols-3",children:[o.jsxs("div",{className:"md:col-span-1",children:[o.jsx("label",{className:"label",children:"Nome *"}),o.jsx("input",{className:"input w-full",value:n,onChange:M=>s(M.target.value),required:!0})]}),o.jsxs("div",{children:[o.jsx("label",{className:"label",children:"CPF"}),o.jsx("input",{className:"input w-full",value:i,onChange:M=>a(M.target.value),placeholder:"000.000.000-00"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"label",children:"Telefone"}),o.jsx("input",{className:"input w-full",value:l,onChange:M=>u(M.target.value),placeholder:"(00) 90000-0000"})]}),o.jsx("div",{className:"md:col-span-3 flex justify-end",children:o.jsx("button",{className:"btn",disabled:c,children:c?"Salvando":"Adicionar"})})]}),o.jsxs("div",{className:"card p-4",children:[o.jsxs("div",{className:"text-sm text-mutedForeground mb-2",children:[b," paciente(s)"]}),o.jsxs("div",{className:"grid gap-2",children:[t.map(M=>o.jsxs("div",{className:"border rounded-md px-3 py-2 text-sm flex justify-between items-center",children:[o.jsxs("div",{children:[o.jsx("div",{className:"font-medium",children:M.name}),o.jsxs("div",{className:"text-xs text-mutedForeground",children:[M.cpf||"","  ",M.phone||""]})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsxs("button",{className:"rounded-md border px-3 py-1 text-sm",onClick:()=>L(M),title:"Visualizar",children:[o.jsx(Ls,{className:"inline h-4 w-4 mr-1"}),"Ver"]}),o.jsxs("button",{className:"rounded-md border px-3 py-1 text-sm",onClick:()=>ne(M),title:"Editar",children:[o.jsx(on,{className:"inline h-4 w-4 mr-1"}),"Editar"]}),o.jsxs("button",{className:"rounded-md border px-3 py-1 text-sm",onClick:()=>J(M),title:"Excluir",children:[o.jsx(gr,{className:"inline h-4 w-4 mr-1"}),"Excluir"]})]})]},M.id)),b===0&&o.jsx("div",{className:"text-sm text-mutedForeground",children:"Nenhum paciente cadastrado."})]})]}),o.jsxs(xS,{open:h,onClose:()=>f(!1),title:m==="view"?"Detalhes do paciente":"Editar paciente",children:[m==="view"&&g&&o.jsxs("div",{className:"space-y-3 text-sm",children:[o.jsxs("div",{children:[o.jsx("div",{className:"label",children:"Nome"}),o.jsx("div",{className:"font-medium",children:g.name})]}),o.jsxs("div",{children:[o.jsx("div",{className:"label",children:"CPF"}),o.jsx("div",{className:"font-medium",children:g.cpf||""})]}),o.jsxs("div",{children:[o.jsx("div",{className:"label",children:"Telefone"}),o.jsx("div",{className:"font-medium",children:g.phone||""})]}),o.jsx("div",{className:"pt-2 flex justify-end",children:o.jsx("button",{className:"rounded-md border px-3 py-2 text-sm",onClick:()=>{g&&(f(!1),ne(g))},children:"Editar"})})]}),m==="edit"&&g&&o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{children:[o.jsx("label",{className:"label",children:"Nome *"}),o.jsx("input",{className:"input w-full",value:v,onChange:M=>p(M.target.value)})]}),o.jsxs("div",{children:[o.jsx("label",{className:"label",children:"CPF"}),o.jsx("input",{className:"input w-full",value:y,onChange:M=>j(M.target.value),placeholder:"000.000.000-00"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"label",children:"Telefone"}),o.jsx("input",{className:"input w-full",value:N,onChange:M=>P(M.target.value),placeholder:"(00) 90000-0000"})]}),o.jsxs("div",{className:"pt-2 flex justify-end gap-2",children:[o.jsx("button",{className:"rounded-md border px-3 py-2 text-sm",onClick:()=>f(!1),children:"Cancelar"}),o.jsx("button",{className:"rounded-md border px-3 py-2 text-sm",onClick:O,children:"Salvar alteraes"})]})]})]})]})}const bS=gx([{path:"/",element:o.jsx(oj,{}),children:[{index:!0,element:o.jsx(Rn,{to:"/login",replace:!0})},{path:"login",element:o.jsx(Hj,{})},{path:"reset-password",element:o.jsx(Kj,{})},{path:"accept-invite/:token",element:o.jsx(Gj,{})}]},{path:"/app",element:o.jsx(Wj,{}),children:[{path:"",element:o.jsx(Vj,{}),children:[{index:!0,element:o.jsx(Rn,{to:"/app/agenda",replace:!0})},{path:"agenda",element:o.jsx(wS,{})},{path:"clinics",element:o.jsx(fS,{})},{path:"patients",element:o.jsx(_S,{})},{path:"doctors",element:o.jsx(pS,{})},{path:"insurances",element:o.jsx(gS,{})}]}]},{path:"/admin",element:o.jsx(qj,{}),children:[{path:"",element:o.jsx(zj,{}),children:[{index:!0,element:o.jsx(Rn,{to:"/admin/clients",replace:!0})},{path:"clients",element:o.jsx(iS,{})},{path:"plans",element:o.jsx(cS,{})}]}]},{path:"*",element:o.jsx(Rn,{to:"/app",replace:!0})}]);Xl.createRoot(document.getElementById("root")).render(o.jsx(Yf.StrictMode,{children:o.jsx(ij,{children:o.jsx(sj,{children:o.jsx(Sx,{router:bS})})})}));
